{"version":3,"sources":["modules/OAuth/index.js"],"names":["OAuth","name","deps","oAuthReady","window","oAuthCallback","_handleCallbackUri","callbackUri","store","dispatch","type","actionTypes","setupOAuth","destroyOAuth","oAuthUri"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAQqBA,K,WANpB,gBAAO;AACNC,QAAM,OADA;AAENC,QAAM,CACJ,cADI;AAFA,CAAP,C;;;;;;;;;;;;;;;;;;AAcG,oBACE,CAAC,KAAKC,UADR,EAEE;AACAC,yBAAOC,aAAP,GAAuB;AAAA,2BAAe,OAAKC,kBAAL,CAAwBC,WAAxB,CAAf;AAAA,mBAAvB;AACA,uBAAKC,KAAL,CAAWC,QAAX,CAAoB;AAClBC,0BAAM,KAAKC,WAAL,CAAiBC;AADL,mBAApB;AAGD;;;;;;;;;;;;;;;;;;;;;;;;AAID,oBACE,KAAKT,UADP,EAEE;AACAC,yBAAOC,aAAP,GAAuB,IAAvB;AACA,uBAAKG,KAAL,CAAWC,QAAX,CAAoB;AAClBC,0BAAM,KAAKC,WAAL,CAAiBE;AADL,mBAApB;AAGD;;;;;;;;;;;;;;;;;;oCAIa;AACd,UAAI,KAAKV,UAAT,EAAqB;AACnB,iCAAU,KAAKW,QAAf,EAAyB,UAAzB,EAAqC,GAArC,EAA0C,GAA1C;AACD;AACF;;;wBAhCU;AACT,aAAO,OAAP;AACD;;;;kBAJkBd,K","file":"index.js","sourcesContent":["import OAuthBase from 'ringcentral-widgets/lib/OAuthBase';\r\nimport background from 'ringcentral-integration/lib/background';\r\nimport proxify from 'ringcentral-integration/lib/proxy/proxify';\r\nimport popWindow from 'ringcentral-integration/lib/popWindow';\r\nimport { Module } from 'ringcentral-integration/lib/di';\r\n\r\n@Module({\r\n  name: 'OAuth',\r\n  deps: [\r\n    'OAuthOptions',\r\n  ],\r\n})\r\nexport default class OAuth extends OAuthBase {\r\n\r\n  get name() {\r\n    return 'oAuth';\r\n  }\r\n\r\n  @background\r\n  async prepareOAuth() {\r\n    if (\r\n      !this.oAuthReady\r\n    ) {\r\n      window.oAuthCallback = callbackUri => this._handleCallbackUri(callbackUri);\r\n      this.store.dispatch({\r\n        type: this.actionTypes.setupOAuth,\r\n      });\r\n    }\r\n  }\r\n  @background\r\n  async destroyOAuth() {\r\n    if (\r\n      this.oAuthReady\r\n    ) {\r\n      window.oAuthCallback = null;\r\n      this.store.dispatch({\r\n        type: this.actionTypes.destroyOAuth,\r\n      });\r\n    }\r\n  }\r\n\r\n  @proxify\r\n  openOAuthPage() {\r\n    if (this.oAuthReady) {\r\n      popWindow(this.oAuthUri, 'rc-oauth', 600, 600);\r\n    }\r\n  }\r\n}\r\n"]}