{"version":3,"sources":["modules/OAuth/index.js"],"names":["OAuth","name","deps","dep","optional","redirectUri","options","oAuthReady","window","oAuthCallback","_handleCallbackUri","callbackUri","store","dispatch","type","actionTypes","setupOAuth","destroyOAuth","oAuthUri"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAQqBA,K,WANpB,gBAAO;AACNC,QAAM,OADA;AAENC,QAAM,CACJ,EAAEC,KAAK,cAAP,EAAuBC,UAAU,IAAjC,EADI;AAFA,CAAP,C;;;AAOC,uBAGG;AAAA,gCAFDC,WAEC;AAAA,QAFDA,WAEC,oCAFa,iBAEb;AAAA,QADEC,OACF;AAAA;AAAA;AAECD;AAFD,OAGIC,OAHJ;AAKF;;;;;;;;;;;;AAOC,oBACE,CAAC,KAAKC,UADR,EAEE;AACAC,yBAAOC,aAAP,GAAuB;AAAA,2BAAe,OAAKC,kBAAL,CAAwBC,WAAxB,CAAf;AAAA,mBAAvB;AACA,uBAAKC,KAAL,CAAWC,QAAX,CAAoB;AAClBC,0BAAM,KAAKC,WAAL,CAAiBC;AADL,mBAApB;AAGD;;;;;;;;;;;;;;;;;;;;;;;;AAID,oBACE,KAAKT,UADP,EAEE;AACAC,yBAAOC,aAAP,GAAuB,IAAvB;AACA,uBAAKG,KAAL,CAAWC,QAAX,CAAoB;AAClBC,0BAAM,KAAKC,WAAL,CAAiBE;AADL,mBAApB;AAGD;;;;;;;;;;;;;;;;;;oCAIa;AACd,UAAI,KAAKV,UAAT,EAAqB;AACnB,iCAAU,KAAKW,QAAf,EAAyB,UAAzB,EAAqC,GAArC,EAA0C,GAA1C;AACD;AACF;;;wBAhCU;AACT,aAAO,OAAP;AACD;;;;kBAZkBlB,K","file":"index.js","sourcesContent":["import background from 'ringcentral-integration/lib/background';\r\nimport proxify from 'ringcentral-integration/lib/proxy/proxify';\r\nimport popWindow from 'ringcentral-integration/lib/popWindow';\r\nimport { Module } from 'ringcentral-integration/lib/di';\r\n\r\nimport OAuthBase from '../../lib/OAuthBase';\r\n\r\n@Module({\r\n  name: 'OAuth',\r\n  deps: [\r\n    { dep: 'OAuthOptions', optional: true }\r\n  ],\r\n})\r\nexport default class OAuth extends OAuthBase {\r\n  constructor({\r\n    redirectUri = './redirect.html',\r\n    ...options\r\n  }) {\r\n    super({\r\n      redirectUri,\r\n      ...options,\r\n    });\r\n  }\r\n  get name() {\r\n    return 'OAuth';\r\n  }\r\n\r\n  @background\r\n  async setupOAuth() {\r\n    if (\r\n      !this.oAuthReady\r\n    ) {\r\n      window.oAuthCallback = callbackUri => this._handleCallbackUri(callbackUri);\r\n      this.store.dispatch({\r\n        type: this.actionTypes.setupOAuth,\r\n      });\r\n    }\r\n  }\r\n  @background\r\n  async destroyOAuth() {\r\n    if (\r\n      this.oAuthReady\r\n    ) {\r\n      window.oAuthCallback = null;\r\n      this.store.dispatch({\r\n        type: this.actionTypes.destroyOAuth,\r\n      });\r\n    }\r\n  }\r\n\r\n  @proxify\r\n  openOAuthPage() {\r\n    if (this.oAuthReady) {\r\n      popWindow(this.oAuthUri, 'rc-oauth', 600, 600);\r\n    }\r\n  }\r\n}\r\n"]}