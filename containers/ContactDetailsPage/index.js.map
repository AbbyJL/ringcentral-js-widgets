{"version":3,"sources":["containers/ContactDetailsPage/index.js"],"names":["mapToProps","_","params","phone","locale","contacts","contactDetails","contactSearch","currentLocale","contactItem","contact","showSpinner","ready","mapToFunctions","dialerRoute","composeTextRoute","routerInteraction","regionSettings","call","dialerUI","composeText","getContact","find","id","contactId","type","contactType","clearContact","clear","formatNumber","phoneNumber","areaCode","countryCode","getAvatar","getProfileImage","getPresence","onBackClick","goBack","onClickToDial","recipient","isIdle","push","undefined","onClickToSMS","isDummyContact","name","updateTypingToNumber","search","searchString","addToNumber","typingToNumber","cleanTypingToNumber","ContactDetailsPage"],"mappings":";;;;;;;;;;;;;;AAAA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,SAASA,UAAT,CAAoBC,CAApB,QAQG;AAAA,MAPDC,MAOC,QAPDA,MAOC;AAAA,wBANDC,KAMC;AAAA,MALCC,MAKD,cALCA,MAKD;AAAA,MAJCC,QAID,cAJCA,QAID;AAAA,MAHCC,cAGD,cAHCA,cAGD;AAAA,MAFCC,aAED,cAFCA,aAED;;AACD,SAAO;AACLC,mBAAeJ,OAAOI,aADjB;AAELC,iBAAaH,eAAeI,OAFvB;AAGLC,iBAAa,EACXP,OAAOQ,KAAP,IACAL,cAAcK,KADd,IAEAN,eAAeM,KAHJ;AAHR,GAAP;AASD;;AAED,SAASC,cAAT,CAAwBZ,CAAxB,SAaG;AAAA;;AAAA,MAZDC,MAYC,SAZDA,MAYC;AAAA,gCAXDY,WAWC;AAAA,MAXDA,WAWC,qCAXa,SAWb;AAAA,oCAVDC,gBAUC;AAAA,MAVDA,gBAUC,yCAVkB,cAUlB;AAAA,0BATDZ,KASC;AAAA,MARCa,iBAQD,eARCA,iBAQD;AAAA,MAPCV,cAOD,eAPCA,cAOD;AAAA,MANCW,cAMD,eANCA,cAMD;AAAA,MALCC,IAKD,eALCA,IAKD;AAAA,MAJCC,QAID,eAJCA,QAID;AAAA,MAHCC,WAGD,eAHCA,WAGD;AAAA,MAFCb,aAED,eAFCA,aAED;;AACD,SAAO;AACLc,gBAAY,sBAAM;AAChBf,qBAAegB,IAAf,CAAoB;AAClBC,YAAIrB,OAAOsB,SADO;AAElBC,cAAMvB,OAAOwB;AAFK,OAApB;AAID,KANI;AAOLC,kBAAc,wBAAM;AAClBrB,qBAAesB,KAAf;AACD,KATI;AAULC,kBAAc;AAAA,aAAe,4BAAa;AACxCC,gCADwC;AAExCC,kBAAUd,eAAec,QAFe;AAGxCC,qBAAaf,eAAee;AAHY,OAAb,CAAf;AAAA,KAVT;AAeLC,eAAW;AAAA,aAAW3B,eAAe4B,eAAf,CAA+BxB,OAA/B,CAAX;AAAA,KAfN;AAgBLyB,iBAAa;AAAA,aAAW7B,eAAe6B,WAAf,CAA2BzB,OAA3B,CAAX;AAAA,KAhBR;AAiBL0B,iBAAa,uBAAM;AACjBpB,wBAAkBqB,MAAlB;AACD,KAnBI;AAoBLC,mBAAenB,WACb,UAACoB,SAAD,EAAe;AACb,UAAIrB,KAAKsB,MAAT,EAAiB;AACfxB,0BAAkByB,IAAlB,CAAuB3B,WAAvB;AACAK,iBAASD,IAAT,CAAc,EAAEqB,oBAAF,EAAd;AACD;AACF,KANY,GAObG,SA3BG;AA4BLC,kBAAcvB;AAAA,6EACZ,iBAAOV,OAAP;AAAA,YAAgBkC,cAAhB,uEAAiC,KAAjC;AAAA;AAAA;AAAA;AAAA;AACE,oBAAI5B,iBAAJ,EAAuB;AACrBA,oCAAkByB,IAAlB,CAAuB1B,gBAAvB;AACD;AACD;AACA,oBAAIL,QAAQmC,IAAR,IAAgBnC,QAAQoB,WAAxB,IAAuCc,cAA3C,EAA2D;AACzDxB,8BAAY0B,oBAAZ,CAAiCpC,QAAQmC,IAAzC;AACAtC,gCAAcwC,MAAd,CAAqB,EAAEC,cAActC,QAAQmC,IAAxB,EAArB;AACD,iBAHD,MAGO;AACLzB,8BAAY6B,WAAZ,CAAwBvC,OAAxB;AACA,sBAAIU,YAAY8B,cAAZ,KAA+BxC,QAAQoB,WAA3C,EAAwD;AACtDV,gCAAY+B,mBAAZ;AACD;AACF;;AAbH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADY;;AAAA;AAAA;AAAA;AAAA,UAgBZT;AA5CG,GAAP;AA8CD;;AAED,IAAMU,qBAAqB,yBAAU,yBAAQpD,UAAR,EAAoBa,cAApB,+BAAV,CAA3B;;kBAEeuC,kB","file":"index.js","sourcesContent":["import { connect } from 'react-redux';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\nimport ContactDetailsView from '../../components/ContactDetailsView';\nimport withPhone from '../../lib/withPhone';\n\nfunction mapToProps(_, {\n  params,\n  phone: {\n    locale,\n    contacts,\n    contactDetails,\n    contactSearch,\n  },\n}) {\n  return {\n    currentLocale: locale.currentLocale,\n    contactItem: contactDetails.contact,\n    showSpinner: !(\n      locale.ready &&\n      contactSearch.ready &&\n      contactDetails.ready\n    ),\n  };\n}\n\nfunction mapToFunctions(_, {\n  params,\n  dialerRoute = '/dialer',\n  composeTextRoute = '/composeText',\n  phone: {\n    routerInteraction,\n    contactDetails,\n    regionSettings,\n    call,\n    dialerUI,\n    composeText,\n    contactSearch,\n  },\n}) {\n  return {\n    getContact: () => {\n      contactDetails.find({\n        id: params.contactId,\n        type: params.contactType\n      });\n    },\n    clearContact: () => {\n      contactDetails.clear();\n    },\n    formatNumber: phoneNumber => formatNumber({\n      phoneNumber,\n      areaCode: regionSettings.areaCode,\n      countryCode: regionSettings.countryCode,\n    }),\n    getAvatar: contact => contactDetails.getProfileImage(contact),\n    getPresence: contact => contactDetails.getPresence(contact),\n    onBackClick: () => {\n      routerInteraction.goBack();\n    },\n    onClickToDial: dialerUI ?\n      (recipient) => {\n        if (call.isIdle) {\n          routerInteraction.push(dialerRoute);\n          dialerUI.call({ recipient });\n        }\n      } :\n      undefined,\n    onClickToSMS: composeText ?\n      async (contact, isDummyContact = false) => {\n        if (routerInteraction) {\n          routerInteraction.push(composeTextRoute);\n        }\n        // if contact autocomplete, if no match fill the number only\n        if (contact.name && contact.phoneNumber && isDummyContact) {\n          composeText.updateTypingToNumber(contact.name);\n          contactSearch.search({ searchString: contact.name });\n        } else {\n          composeText.addToNumber(contact);\n          if (composeText.typingToNumber === contact.phoneNumber) {\n            composeText.cleanTypingToNumber();\n          }\n        }\n      } :\n      undefined,\n  };\n}\n\nconst ContactDetailsPage = withPhone(connect(mapToProps, mapToFunctions)(ContactDetailsView));\n\nexport default ContactDetailsPage;\n"]}