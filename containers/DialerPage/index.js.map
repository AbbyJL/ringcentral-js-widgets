{"version":3,"sources":["containers/DialerPage/index.js"],"names":["mapToProps","_","call","callingSettings","connectivityMonitor","locale","rateLimiter","webphone","isWebphoneMode","callingMode","waitingWebphoneConnected","connecting","webphoneDisconnected","connected","currentLocale","callButtonDisabled","isIdle","connectivity","throttling","toNumber","fromNumbers","fromNumber","showSpinner","ready","mapToFunctions","regionSettings","keepToNumber","value","onToNumberChange","onCall","changeFromNumber","updateFromNumber","formatPhone","phoneNumber","areaCode","countryCode","DialerPage","propTypes","instanceOf","isRequired","default"],"mappings":";;;;;;;AAAA;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;;;;;AAEA,SAASA,UAAT,CAAoBC,CAApB,QAOG;AAAA,MANDC,IAMC,QANDA,IAMC;AAAA,MALDC,eAKC,QALDA,eAKC;AAAA,MAJDC,mBAIC,QAJDA,mBAIC;AAAA,MAHDC,MAGC,QAHDA,MAGC;AAAA,MAFDC,WAEC,QAFDA,WAEC;AAAA,MADDC,QACC,QADDA,QACC;;AACD,MAAMC,iBAAkBL,gBAAgBM,WAAhB,KAAgC,uBAAaF,QAArE;AACA,MAAMG,2BAA4BF,kBAAkBD,QAAlB,IAA8BA,SAASI,UAAzE;AACA,MAAMC,uBAAwBJ,kBAAkBD,QAAlB,IAA8B,CAACA,SAASM,SAAtE;AACA,SAAO;AACLC,mBAAeT,OAAOS,aADjB;AAELL,iBAAaN,gBAAgBM,WAFxB;AAGLD,kCAHK;AAILO,wBACE,CAACb,KAAKc,MAAN,IACG,CAACZ,oBAAoBa,YADxB,IAEGX,YAAYY,UAFf,IAGGN,oBARA;AAULO,cAAUjB,KAAKiB,QAVV;AAWLC,iBAAajB,gBAAgBiB,WAXxB;AAYLC,gBAAYlB,gBAAgBkB,UAZvB;AAaLC,iBAAa,EACXpB,KAAKqB,KAAL,IACApB,gBAAgBoB,KADhB,IAEAlB,OAAOkB,KAFP,IAGAnB,oBAAoBmB,KAHpB,KAIC,CAACf,cAAD,IAAmB,CAACD,QAApB,IAAgC,CAACG,wBAJlC,CADW;AAbR,GAAP;AAqBD;;AAED,SAASc,cAAT,CAAwBvB,CAAxB,SAIG;AAAA,MAHDC,IAGC,SAHDA,IAGC;AAAA,MAFDC,eAEC,SAFDA,eAEC;AAAA,MADDsB,cACC,SADDA,cACC;;AACD,SAAO;AACLC,kBAAc,sBAACC,KAAD,EAAW;AACvBzB,WAAK0B,gBAAL,CAAsBD,KAAtB;AACD,KAHI;AAILE,YAAQ,kBAAM;AACZ3B,WAAK2B,MAAL;AACD,KANI;AAOLC,sBAAkB;AAAA,aAAa3B,gBAAgB4B,gBAAhB,kCAAb;AAAA,KAPb;AAQLC,iBAAa;AAAA,aAAe,4BAAa;AACvCC,gCADuC;AAEvCC,kBAAUT,kBAAkBA,eAAeS,QAFJ;AAGvCC,qBAAaV,kBAAkBA,eAAeU;AAHP,OAAb,CAAf;AAAA;AARR,GAAP;AAcD;;AAED,IAAMC,aAAa,yBACjBpC,UADiB,EAEjBwB,cAFiB,wBAAnB;;AAKA,IAAMa,YAAY;AAChBnC,QAAM,oBAAUoC,UAAV,iBAA2BC,UADjB;AAEhBpC,mBAAiB,oBAAUmC,UAAV,4BAAsCC,UAFvC;AAGhBnC,uBAAqB,oBAAUkC,UAAV,gCAA0CC,UAH/C;AAIhBlC,UAAQ,oBAAUiC,UAAV,mBAA6BC,UAJrB;AAKhBjC,eAAa,oBAAUgC,UAAV,wBAAkCC;AAL/B,CAAlB;;AAQAH,WAAWC,SAAX,GAAuBA,SAAvB;;QAGEb,c,GAAAA,c;QACAxB,U,GAAAA,U;QACAqC,S,GAAAA,S;QACcG,O,GAAdJ,U","file":"index.js","sourcesContent":["import { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\n\nimport Locale from 'ringcentral-integration/modules/Locale';\nimport CallingSettings from 'ringcentral-integration/modules/CallingSettings';\nimport callingModes from 'ringcentral-integration/modules/CallingSettings/callingModes';\n\nimport Call from 'ringcentral-integration/modules/Call';\nimport ConnectivityMonitor from 'ringcentral-integration/modules/ConnectivityMonitor';\nimport RateLimiter from 'ringcentral-integration/modules/RateLimiter';\n\nimport DialerPanel from '../../components/DialerPanel';\n\nfunction mapToProps(_, {\n  call,\n  callingSettings,\n  connectivityMonitor,\n  locale,\n  rateLimiter,\n  webphone,\n}) {\n  const isWebphoneMode = (callingSettings.callingMode === callingModes.webphone);\n  const waitingWebphoneConnected = (isWebphoneMode && webphone && webphone.connecting);\n  const webphoneDisconnected = (isWebphoneMode && webphone && !webphone.connected);\n  return {\n    currentLocale: locale.currentLocale,\n    callingMode: callingSettings.callingMode,\n    isWebphoneMode,\n    callButtonDisabled: (\n      !call.isIdle\n      || !connectivityMonitor.connectivity\n      || rateLimiter.throttling\n      || webphoneDisconnected\n    ),\n    toNumber: call.toNumber,\n    fromNumbers: callingSettings.fromNumbers,\n    fromNumber: callingSettings.fromNumber,\n    showSpinner: !(\n      call.ready &&\n      callingSettings.ready &&\n      locale.ready &&\n      connectivityMonitor.ready &&\n      (!isWebphoneMode || !webphone || !waitingWebphoneConnected)\n    ),\n  };\n}\n\nfunction mapToFunctions(_, {\n  call,\n  callingSettings,\n  regionSettings,\n}) {\n  return {\n    keepToNumber: (value) => {\n      call.onToNumberChange(value);\n    },\n    onCall: () => {\n      call.onCall();\n    },\n    changeFromNumber: (...args) => callingSettings.updateFromNumber(...args),\n    formatPhone: phoneNumber => formatNumber({\n      phoneNumber,\n      areaCode: regionSettings && regionSettings.areaCode,\n      countryCode: regionSettings && regionSettings.countryCode,\n    }),\n  };\n}\n\nconst DialerPage = connect(\n  mapToProps,\n  mapToFunctions,\n)(DialerPanel);\n\nconst propTypes = {\n  call: PropTypes.instanceOf(Call).isRequired,\n  callingSettings: PropTypes.instanceOf(CallingSettings).isRequired,\n  connectivityMonitor: PropTypes.instanceOf(ConnectivityMonitor).isRequired,\n  locale: PropTypes.instanceOf(Locale).isRequired,\n  rateLimiter: PropTypes.instanceOf(RateLimiter).isRequired,\n};\n\nDialerPage.propTypes = propTypes;\n\nexport {\n  mapToFunctions,\n  mapToProps,\n  propTypes,\n  DialerPage as default,\n};\n"]}