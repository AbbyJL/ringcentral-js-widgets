{"version":3,"sources":["containers/ActiveCallsPage/index.js"],"names":["mapToProps","_","callMonitor","locale","regionSettings","rolesAndPermissions","brand","showContactDisplayPlaceholder","callLogger","hasCalls","calls","length","currentLocale","activeRingCalls","activeOnHoldCalls","activeCurrentCalls","otherDeviceCalls","areaCode","countryCode","outboundSmsPermission","permissions","OutboundSMS","internalSmsPermission","InternalSMS","showSpinner","fullName","autoLog","mapToFunctions","webphone","composeTextRoute","callCtrlRoute","onViewContact","onCreateContact","composeText","onLogCall","contactMatcher","router","contactSearch","isLoggedContact","formatPhone","phoneNumber","webphoneAnswer","answer","webphoneReject","toVoiceMail","webphoneHangup","hangup","webphoneResume","resume","currentPath","push","contact","hasMatchNumber","ignoreCache","undefined","onClickToSms","isDummyContact","name","updateTypingToNumber","search","searchString","addToNumber","typingToNumber","cleanTypingToNumber","entityType","forceMatchNumber","call","redirect","logCall","ActiveCallsPage"],"mappings":"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","file":"index.js","sourcesContent":["import { connect } from 'react-redux';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\n\nimport ActiveCallsPanel from '../../components/ActiveCallsPanel';\n\nfunction mapToProps(_, {\n  callMonitor,\n  locale,\n  regionSettings,\n  rolesAndPermissions,\n  brand,\n  showContactDisplayPlaceholder = false,\n  callLogger,\n}) {\n  return {\n    hasCalls: (callMonitor.calls.length !== 0),\n    currentLocale: locale.currentLocale,\n    activeRingCalls: callMonitor.activeRingCalls,\n    activeOnHoldCalls: callMonitor.activeOnHoldCalls,\n    activeCurrentCalls: callMonitor.activeCurrentCalls,\n    otherDeviceCalls: callMonitor.otherDeviceCalls,\n    areaCode: regionSettings.areaCode,\n    countryCode: regionSettings.countryCode,\n    outboundSmsPermission: !!(\n      rolesAndPermissions.permissions &&\n      rolesAndPermissions.permissions.OutboundSMS\n    ),\n    internalSmsPermission: !!(\n      rolesAndPermissions.permissions &&\n      rolesAndPermissions.permissions.InternalSMS\n    ),\n    showSpinner: false,\n    brand: brand.fullName,\n    showContactDisplayPlaceholder,\n    autoLog: !!(callLogger && callLogger.autoLog),\n  };\n}\n\nfunction mapToFunctions(_, {\n  webphone,\n  regionSettings,\n  composeTextRoute = '/composeText',\n  callCtrlRoute = '/calls/active',\n  onViewContact,\n  onCreateContact,\n  composeText,\n  callLogger,\n  onLogCall,\n  contactMatcher,\n  router,\n  contactSearch,\n  isLoggedContact,\n}) {\n  return {\n    formatPhone: phoneNumber => formatNumber({\n      phoneNumber,\n      areaCode: regionSettings.areaCode,\n      countryCode: regionSettings.countryCode,\n    }),\n    webphoneAnswer: (...args) => (webphone && webphone.answer(...args)),\n    webphoneReject: (...args) => (webphone && webphone.toVoiceMail(...args)),\n    webphoneHangup: (...args) => (webphone && webphone.hangup(...args)),\n    webphoneResume: async (...args) => {\n      if (!webphone) {\n        return;\n      }\n      await webphone.resume(...args);\n      if (router.currentPath !== callCtrlRoute) {\n        router.push(callCtrlRoute);\n      }\n    },\n    onViewContact: onViewContact ?\n      async ({ phoneNumber, contact }) => {\n        const hasMatchNumber = await contactMatcher.hasMatchNumber({\n          phoneNumber,\n          ignoreCache: true\n        });\n        if (hasMatchNumber) {\n          await onViewContact({ phoneNumber, contact });\n        }\n      } :\n      undefined,\n    onClickToSms: composeText ?\n      async (contact, isDummyContact = false) => {\n        if (router) {\n          router.push(composeTextRoute);\n        }\n        if (contact.name && contact.phoneNumber && isDummyContact) {\n          composeText.updateTypingToNumber(contact.name);\n          contactSearch.search({ searchString: contact.name });\n        } else {\n          composeText.addToNumber(contact);\n          if (composeText.typingToNumber === contact.phoneNumber) {\n            composeText.cleanTypingToNumber();\n          }\n        }\n      } :\n      undefined,\n    onCreateContact: onCreateContact ?\n      async ({ phoneNumber, name, entityType }) => {\n        const hasMatchNumber = await contactMatcher.hasMatchNumber({\n          phoneNumber,\n          ignoreCache: true\n        });\n        if (!hasMatchNumber) {\n          await onCreateContact({ phoneNumber, name, entityType });\n          await contactMatcher.forceMatchNumber({ phoneNumber });\n        }\n      } :\n      undefined,\n    isLoggedContact,\n    onLogCall: onLogCall ||\n    (callLogger && (async ({ call, contact, redirect = true }) => {\n      await callLogger.logCall({\n        call,\n        contact,\n        redirect,\n      });\n    })),\n  };\n}\n\nconst ActiveCallsPage = connect(mapToProps, mapToFunctions)(ActiveCallsPanel);\n\nexport default ActiveCallsPage;\n"]}