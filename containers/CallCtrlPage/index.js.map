{"version":3,"sources":["containers/CallCtrlPage/index.js"],"names":["CallCtrlPage","props","state","selectedMatcherIndex","avatarUrl","onSelectMatcherName","option","nameMatches","findIndex","match","id","setState","contact","updateSessionMatchedContact","session","getAvatarUrl","then","onMute","onUnmute","onHold","onUnhold","onRecord","onStopRecord","onHangup","onKeyPadChange","sendDTMF","value","onFlip","onTransfer","onPark","_mounted","_updateAvatarAndMatchIndex","nextProps","contactMatch","phoneNumber","direction","callDirections","outbound","to","from","fallbackUserName","inbound","i18n","getString","currentLocale","backButtonLabel","formatPhone","callStatus","startTime","isOnMute","isOnHold","isOnFlip","isOnTransfer","recordStatus","onBackButtonClick","onAdd","areaCode","countryCode","brand","showContactDisplayPlaceholder","flipNumbers","calls","sourceIcons","searchContactList","searchContact","phoneTypeRenderer","recipientsContactInfoRenderer","recipientsContactPhoneRenderer","children","Component","propTypes","PropTypes","shape","string","number","bool","object","isRequired","func","node","array","defaultProps","undefined","mapToProps","_","phone","webphone","locale","contactMatcher","regionSettings","forwardingNumber","callMonitor","contactSearch","currentSession","activeSession","contactMapping","dataMapping","fromMatches","toMatches","fullName","sortedResult","mapToFunctions","hangup","sessionId","mute","unmute","hold","unhold","startRecord","stopRecord","flipNumber","flip","transferNumber","transfer","park","debouncedSearch","searchString","CallCtrlContainer"],"mappings":"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","file":"index.js","sourcesContent":["import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\nimport callDirections from 'ringcentral-integration/enums/callDirections';\n\nimport CallCtrlPanel from '../../components/CallCtrlPanel';\nimport withPhone from '../../lib/withPhone';\n\nimport i18n from './i18n';\n\nclass CallCtrlPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedMatcherIndex: 0,\n      avatarUrl: null,\n    };\n\n    this.onSelectMatcherName = (option) => {\n      const nameMatches = this.props.nameMatches || [];\n      let selectedMatcherIndex = nameMatches.findIndex(\n        match => match.id === option.id\n      );\n      if (selectedMatcherIndex < 0) {\n        selectedMatcherIndex = 0;\n      }\n      this.setState({\n        selectedMatcherIndex,\n        avatarUrl: null,\n      });\n      const contact = nameMatches[selectedMatcherIndex];\n      if (contact) {\n        this.props.updateSessionMatchedContact(this.props.session.id, contact);\n        this.props.getAvatarUrl(contact).then((avatarUrl) => {\n          this.setState({ avatarUrl });\n        });\n      }\n    };\n\n    this.onMute = () =>\n      this.props.onMute(this.props.session.id);\n    this.onUnmute = () =>\n      this.props.onUnmute(this.props.session.id);\n    this.onHold = () =>\n      this.props.onHold(this.props.session.id);\n    this.onUnhold = () =>\n      this.props.onUnhold(this.props.session.id);\n    this.onRecord = () =>\n      this.props.onRecord(this.props.session.id);\n    this.onStopRecord = () =>\n      this.props.onStopRecord(this.props.session.id);\n    this.onHangup = () =>\n      this.props.onHangup(this.props.session.id);\n    this.onKeyPadChange = value =>\n      this.props.sendDTMF(value, this.props.session.id);\n    this.onFlip = value =>\n      this.props.onFlip(value, this.props.session.id);\n    this.onTransfer = value =>\n      this.props.onTransfer(value, this.props.session.id);\n    this.onPark = () =>\n      this.props.onPark(this.props.session.id);\n  }\n\n  componentDidMount() {\n    this._mounted = true;\n    this._updateAvatarAndMatchIndex(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.session.id !== nextProps.session.id) {\n      this._updateAvatarAndMatchIndex(nextProps);\n    }\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n  }\n\n  _updateAvatarAndMatchIndex(props) {\n    let contact = props.session.contactMatch;\n    let selectedMatcherIndex = 0;\n    if (!contact) {\n      contact = props.nameMatches && props.nameMatches[0];\n    } else {\n      selectedMatcherIndex = props.nameMatches.findIndex(match =>\n        match.id === contact.id\n      );\n    }\n    this.setState({\n      selectedMatcherIndex,\n      avatarUrl: null,\n    });\n    if (contact) {\n      props.getAvatarUrl(contact).then((avatarUrl) => {\n        if (!this._mounted) {\n          return;\n        }\n        this.setState({ avatarUrl });\n      });\n    }\n  }\n\n  render() {\n    const { session } = this.props;\n    if (!session.id) {\n      return null;\n    }\n    const phoneNumber = session.direction === callDirections.outbound ?\n      session.to : session.from;\n    let fallbackUserName;\n    if (session.direction === callDirections.inbound && session.from === 'anonymous') {\n      fallbackUserName = i18n.getString('anonymous', this.props.currentLocale);\n    }\n    if (!fallbackUserName) {\n      fallbackUserName = i18n.getString('unknown', this.props.currentLocale);\n    }\n    // The label of back button is customizable\n    // the property `backButtonLabel` should be internationalizational\n    const backButtonLabel = this.props.backButtonLabel\n      ? this.props.backButtonLabel\n      : i18n.getString('activeCalls', this.props.currentLocale);\n    return (\n      <CallCtrlPanel\n        backButtonLabel={backButtonLabel}\n        currentLocale={this.props.currentLocale}\n        formatPhone={this.props.formatPhone}\n        phoneNumber={phoneNumber}\n        sessionId={session.id}\n        callStatus={session.callStatus}\n        startTime={session.startTime}\n        isOnMute={session.isOnMute}\n        isOnHold={session.isOnHold}\n        isOnFlip={session.isOnFlip}\n        isOnTransfer={session.isOnTransfer}\n        recordStatus={session.recordStatus}\n        onBackButtonClick={this.props.onBackButtonClick}\n        onMute={this.onMute}\n        onUnmute={this.onUnmute}\n        onHold={this.onHold}\n        onUnhold={this.onUnhold}\n        onRecord={this.onRecord}\n        onStopRecord={this.onStopRecord}\n        onKeyPadChange={this.onKeyPadChange}\n        onHangup={this.onHangup}\n        onAdd={this.props.onAdd}\n        onFlip={this.onFlip}\n        onTransfer={this.onTransfer}\n        onPark={this.onPark}\n        nameMatches={this.props.nameMatches}\n        fallBackName={fallbackUserName}\n        areaCode={this.props.areaCode}\n        countryCode={this.props.countryCode}\n        selectedMatcherIndex={this.state.selectedMatcherIndex}\n        onSelectMatcherName={this.onSelectMatcherName}\n        avatarUrl={this.state.avatarUrl}\n        brand={this.props.brand}\n        showContactDisplayPlaceholder={this.props.showContactDisplayPlaceholder}\n        flipNumbers={this.props.flipNumbers}\n        calls={this.props.calls}\n        sourceIcons={this.props.sourceIcons}\n        searchContactList={this.props.searchContactList}\n        searchContact={this.props.searchContact}\n        phoneTypeRenderer={this.props.phoneTypeRenderer}\n        recipientsContactInfoRenderer={this.props.recipientsContactInfoRenderer}\n        recipientsContactPhoneRenderer={this.props.recipientsContactPhoneRenderer}\n      >\n        {this.props.children}\n      </CallCtrlPanel>\n    );\n  }\n}\n\nCallCtrlPage.propTypes = {\n  session: PropTypes.shape({\n    id: PropTypes.string,\n    direction: PropTypes.string,\n    startTime: PropTypes.number,\n    isOnMute: PropTypes.bool,\n    isOnHold: PropTypes.bool,\n    isOnFlip: PropTypes.bool,\n    isOnTransfer: PropTypes.bool,\n    recordStatus: PropTypes.string,\n    to: PropTypes.string,\n    from: PropTypes.string,\n    contactMatch: PropTypes.object,\n  }).isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  onMute: PropTypes.func.isRequired,\n  onUnmute: PropTypes.func.isRequired,\n  onHold: PropTypes.func.isRequired,\n  onUnhold: PropTypes.func.isRequired,\n  onRecord: PropTypes.func.isRequired,\n  onStopRecord: PropTypes.func.isRequired,\n  onHangup: PropTypes.func.isRequired,\n  sendDTMF: PropTypes.func.isRequired,\n  formatPhone: PropTypes.func.isRequired,\n  onAdd: PropTypes.func.isRequired,\n  onFlip: PropTypes.func.isRequired,\n  onPark: PropTypes.func.isRequired,\n  onTransfer: PropTypes.func.isRequired,\n  children: PropTypes.node,\n  nameMatches: PropTypes.array.isRequired,\n  areaCode: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  getAvatarUrl: PropTypes.func.isRequired,\n  onBackButtonClick: PropTypes.func.isRequired,\n  updateSessionMatchedContact: PropTypes.func.isRequired,\n  backButtonLabel: PropTypes.string,\n  brand: PropTypes.string.isRequired,\n  showContactDisplayPlaceholder: PropTypes.bool.isRequired,\n  flipNumbers: PropTypes.array.isRequired,\n  calls: PropTypes.array.isRequired,\n  sourceIcons: PropTypes.object,\n  searchContactList: PropTypes.array.isRequired,\n  searchContact: PropTypes.func.isRequired,\n  phoneTypeRenderer: PropTypes.func,\n  recipientsContactInfoRenderer: PropTypes.func,\n  recipientsContactPhoneRenderer: PropTypes.func,\n};\n\nCallCtrlPage.defaultProps = {\n  children: undefined,\n  backButtonLabel: null,\n  sourceIcons: undefined,\n  phoneTypeRenderer: undefined,\n  recipientsContactInfoRenderer: undefined,\n  recipientsContactPhoneRenderer: undefined,\n};\n\nfunction mapToProps(_, {\n  phone: {\n    webphone,\n    locale,\n    contactMatcher,\n    regionSettings,\n    brand,\n    forwardingNumber,\n    callMonitor,\n    contactSearch,\n  },\n}) {\n  const currentSession = webphone.activeSession || {};\n  const contactMapping = contactMatcher && contactMatcher.dataMapping;\n  const fromMatches = (contactMapping && contactMapping[currentSession.from]) || [];\n  const toMatches = (contactMapping && contactMapping[currentSession.to]) || [];\n  const nameMatches =\n    currentSession.direction === callDirections.outbound ? toMatches : fromMatches;\n  return {\n    brand: brand.fullName,\n    nameMatches,\n    currentLocale: locale.currentLocale,\n    session: currentSession,\n    areaCode: regionSettings.areaCode,\n    countryCode: regionSettings.countryCode,\n    flipNumbers: forwardingNumber.flipNumbers,\n    calls: callMonitor.calls,\n    searchContactList: contactSearch.sortedResult,\n  };\n}\n\nfunction mapToFunctions(_, {\n  phone: {\n    webphone,\n    regionSettings,\n    contactSearch,\n  },\n  getAvatarUrl,\n  onBackButtonClick,\n  onAdd,\n  phoneTypeRenderer,\n  recipientsContactInfoRenderer,\n  recipientsContactPhoneRenderer,\n}) {\n  return {\n    formatPhone: phoneNumber => formatNumber({\n      phoneNumber,\n      areaCode: regionSettings.areaCode,\n      countryCode: regionSettings.countryCode,\n    }),\n    onHangup: sessionId => webphone.hangup(sessionId),\n    onMute: sessionId => webphone.mute(sessionId),\n    onUnmute: sessionId => webphone.unmute(sessionId),\n    onHold: sessionId => webphone.hold(sessionId),\n    onUnhold: sessionId => webphone.unhold(sessionId),\n    onRecord: sessionId => webphone.startRecord(sessionId),\n    onStopRecord: sessionId => webphone.stopRecord(sessionId),\n    sendDTMF: (value, sessionId) => webphone.sendDTMF(value, sessionId),\n    updateSessionMatchedContact: (sessionId, contact) =>\n      webphone.updateSessionMatchedContact(sessionId, contact),\n    getAvatarUrl,\n    onBackButtonClick,\n    onAdd,\n    onFlip: (flipNumber, sessionId) => webphone.flip(flipNumber, sessionId),\n    onTransfer: (transferNumber, sessionId) => webphone.transfer(transferNumber, sessionId),\n    onPark: sessionId => webphone.park(sessionId),\n    searchContact: searchString => (\n      contactSearch.debouncedSearch({ searchString })\n    ),\n    phoneTypeRenderer,\n    recipientsContactInfoRenderer,\n    recipientsContactPhoneRenderer,\n  };\n}\n\nconst CallCtrlContainer = withPhone(connect(\n  mapToProps,\n  mapToFunctions,\n)(CallCtrlPage));\n\nCallCtrlContainer.propTypes = {\n  getAvatarUrl: PropTypes.func,\n  onBackButtonClick: PropTypes.func.isRequired,\n  onAdd: PropTypes.func.isRequired,\n  backButtonLabel: PropTypes.string,\n  children: PropTypes.node,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n};\n\nCallCtrlContainer.defaultProps = {\n  getAvatarUrl: () => null,\n  showContactDisplayPlaceholder: false,\n  children: undefined,\n  sourceIcons: undefined,\n};\n\nexport default CallCtrlContainer;\n"]}