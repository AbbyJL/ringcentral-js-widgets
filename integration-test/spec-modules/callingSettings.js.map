{"version":3,"sources":["integration-test/spec-modules/callingSettings.js"],"names":["mock","authzProfileBody","require","auth","client","alert","account","callingSettings","extensionPhoneNumber","extensionInfo","describe","timeout","mockClient","isLoginSuccess","before","mockForLogin","console","error","skip","it","expect","callWith","to","equals","softphone","callingMode","setData","myphone","ringout","otherphone","customphone","myLocation","ringoutPrompt","beforeEach","dismissAll","state","messages","length","isAlertClear","saveSuccessWithSoftphone","not","equal","undefined","saveSuccess","logout","loginStatus","notLoggedIn","restore","myPhoneNumbers","directNumbers","map","item","phoneNumber","mainCompanyNumber","extensionNumber","push","forEach","number","include","mockAuthzProfile","authzProfile","permissions","filter","p","permission","id","callWithOptions","deep"],"mappings":"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","file":"callingSettings.js","sourcesContent":["import callingOptions from '../../modules/CallingSettings/callingOptions';\nimport callingModes from '../../modules/CallingSettings/callingModes';\nimport callingSettingsMessages from '../..//modules/CallingSettings/callingSettingsMessages';\nimport loginStatus from '../../modules/Auth/loginStatus';\nimport { containsErrorMessage, ensureLogin } from '../utils/HelpUtil';\nimport { waitUntilEqual } from '../utils/WaitUtil';\nimport * as mock from '../mock';\n\nconst authzProfileBody = require('../mock/data/authzProfile');\n\nexport default (auth, client, alert, account, callingSettings, extensionPhoneNumber, extensionInfo) => {\n  describe('Calling Settings', async function () {\n    this.timeout(20000);\n    mock.mockClient(client);\n    let isLoginSuccess;\n\n    describe('When has permission', async function () {\n      this.timeout(20000);\n\n      before(async function () {\n        mock.mockForLogin();\n        isLoginSuccess = await ensureLogin(auth, account);\n        if (!isLoginSuccess) {\n          console.error('Skip test case as failed to login with credential ', account);\n          this.skip();\n        }\n      });\n\n      it('Should Be Make Call with Softphone by Default', async function () {\n        expect(callingSettings.callWith).to.equals(callingOptions.softphone);\n        expect(callingSettings.callingMode).to.equals(callingModes.softphone);\n      });\n\n      describe('Should Save Calling Mode', function () {\n        this.timeout(20000);\n        it('Should Save My RingCentral Phone', async function () {\n          callingSettings.setData({\n            callWith: callingOptions.myphone\n          });\n          expect(callingSettings.callWith).to.equals(callingOptions.myphone);\n          expect(callingSettings.callingMode).to.equals(callingModes.ringout);\n        });\n        it('Should Save Other Phone', async function () {\n          callingSettings.setData({\n            callWith: callingOptions.otherphone\n          });\n          expect(callingSettings.callWith).to.equals(callingOptions.otherphone);\n          expect(callingSettings.callingMode).to.equals(callingModes.ringout);\n        });\n        it('Should Save Custom Phone', async function () {\n          callingSettings.setData({\n            callWith: callingOptions.customphone\n          });\n          expect(callingSettings.callWith).to.equals(callingOptions.customphone);\n          expect(callingSettings.callingMode).to.equals(callingModes.ringout);\n        });\n      });\n\n      describe('Should Save Options in RingOut Mode', function () {\n        this.timeout(20000);\n        it('Should Save From Number', async function () {\n           callingSettings.setData({\n            myLocation: '123'\n          });\n          expect(callingSettings.myLocation).to.equals('123');\n        });\n        it('Should Save RingoutPrompt', async function () {\n           callingSettings.setData({\n            ringoutPrompt: '123'\n          });\n          expect(callingSettings.ringoutPrompt).to.equals('123');\n        });\n      });\n\n      describe('Should Allow Alert', function () {\n        this.timeout(20000);\n        beforeEach(async function () {\n          const isAlertClear = await waitUntilEqual(() => {\n            alert.dismissAll();\n            return alert.state.messages.length;\n          }, 'Alert', 0, 5);\n          if (!isAlertClear) {\n            console.error('Alert is not cleared after dismissAll');\n            this.skip();\n          }\n        });\n        describe('Should Prompt Alerts when withPrompt Equals True', function () {\n          it('Should Prompt Alert of saveSuccessWithSoftphone', async function () {\n            callingSettings.setData({\n              callWith: callingOptions.softphone\n            }, true);\n            expect(containsErrorMessage(alert.state.messages, callingSettingsMessages.saveSuccessWithSoftphone)).to.not.equal(undefined);\n          });\n          it('Should Prompt Alert of saveSuccess when Calling Option is Other Phone', async function () {\n            callingSettings.setData({\n              callWith: callingOptions.otherphone\n            }, true);\n            expect(containsErrorMessage(alert.state.messages, callingSettingsMessages.saveSuccess)).to.not.equal(undefined);\n          });\n          it('Should Prompt Alert of saveSuccess when Calling Option is My RingCentral Phone', async function () {\n            callingSettings.setData({\n              callWith: callingOptions.myphone\n            }, true);\n            expect(containsErrorMessage(alert.state.messages, callingSettingsMessages.saveSuccess)).to.not.equal(undefined);\n          });\n          it('Should Prompt Alert of saveSuccess when Calling Option is Custom Phone', async function () {\n            callingSettings.setData({\n              callWith: callingOptions.customphone\n            }, true);\n            expect(containsErrorMessage(alert.state.messages, callingSettingsMessages.saveSuccess)).to.not.equal(undefined);\n          });\n\n        });\n        describe('Should Not Prompt Alerts when withPrompt Equals False', function() {\n          it('Should Not Prompt Alert when Calling Option is Softphone', async function () {\n            callingSettings.setData({\n              callWith: callingOptions.softphone\n            }, false);\n            expect(containsErrorMessage(alert.state.messages, callingSettingsMessages.saveSuccess)).to.equal(undefined);\n            expect(containsErrorMessage(alert.state.messages, callingSettingsMessages.saveSuccessWithSoftphone)).to.equal(undefined);\n          });\n          it('Should Not Prompt Alert when Calling Option is My RingCentral Phone', async function () {\n            callingSettings.setData({\n              callWith: callingOptions.myphone\n            }, false);\n            expect(containsErrorMessage(alert.state.messages, callingSettingsMessages.saveSuccess)).to.equal(undefined);\n            expect(containsErrorMessage(alert.state.messages, callingSettingsMessages.saveSuccessWithSoftphone)).to.equal(undefined);\n          });\n          it('Should Not Prompt Alert when Calling Option is Other Phone', async function () {\n            callingSettings.setData({\n              callWith: callingOptions.otherphone\n            }, false);\n            expect(containsErrorMessage(alert.state.messages, callingSettingsMessages.saveSuccess)).to.equal(undefined);\n            expect(containsErrorMessage(alert.state.messages, callingSettingsMessages.saveSuccessWithSoftphone)).to.equal(undefined);\n          });\n          it('Should Not Prompt Alert when Calling Option is Custom Phone', async function () {\n            callingSettings.setData({\n              callWith: callingOptions.customphone\n            }, false);\n            expect(containsErrorMessage(alert.state.messages, callingSettingsMessages.saveSuccess)).to.equal(undefined);\n            expect(containsErrorMessage(alert.state.messages, callingSettingsMessages.saveSuccessWithSoftphone)).to.equal(undefined);\n          });\n        });\n      });\n      describe('Should Remember after Logout', function () {\n        this.timeout(20000);\n        it('Should Remember Calling Settings after Re-login', async function () {\n          this.timeout(20000);\n          callingSettings.setData({\n            callWith: callingOptions.customphone,\n            myLocation: '456',\n            ringoutPrompt: '456'\n          });\n          auth.logout();\n          await waitUntilEqual(() => auth.loginStatus, 'LoginStatus', loginStatus.notLoggedIn, 3);\n          mock.restore();\n          mock.mockForLogin();\n          await ensureLogin(auth, account);\n          expect(callingSettings.ringoutPrompt).to.equals('456');\n          expect(callingSettings.myLocation).to.equals('456');\n          expect(callingSettings.callWith).to.equals(callingOptions.customphone);\n          expect(callingSettings.callingMode).to.equals(callingModes.ringout);\n        });\n      });\n      describe('Should Have Required Phone Numbers', function () {\n        this.timeout(20000);\n        it('Should Have My Phone Numbers', async function () {\n          const myPhoneNumbers = extensionPhoneNumber.directNumbers.map(item => item.phoneNumber);\n          const { mainCompanyNumber } = extensionPhoneNumber;\n          const { extensionNumber } = extensionInfo;\n          if (mainCompanyNumber && extensionNumber) {\n            myPhoneNumbers.push(`${mainCompanyNumber.phoneNumber}*${extensionNumber}`);\n          }\n          expect(callingSettings.myPhoneNumbers.length).to.equal(myPhoneNumbers.length);\n          callingSettings.myPhoneNumbers.forEach((number) => {\n            expect(myPhoneNumbers).to.include(number);\n          });\n        });\n        //TODO: Add test cases for Other Phone Numbers\n      });\n    });\n\n    it('Should only include softphone when ReadUserPhoneNumbers is false', async () => {\n      mock.restore();\n      mock.mockForLogin({ mockAuthzProfile: false });\n      mock.authzProfile({\n        permissions: authzProfileBody.permissions.filter(p => p.permission.id !== 'ReadUserPhoneNumbers')\n      });\n      await ensureLogin(auth, account);\n      expect(callingSettings.callWithOptions).to.deep.equals([callingOptions.softphone]);\n      expect(callingSettings.callingMode).to.equals(callingModes.softphone);\n    });\n\n    it('Should only include softphone when ReadUserForwardingFlipNumbers is false', async () => {\n      mock.restore();\n      mock.mockForLogin({ mockAuthzProfile: false });\n      mock.authzProfile({\n        permissions: authzProfileBody.permissions.filter(p => p.permission.id !== 'ReadUserForwardingFlipNumbers')\n      });\n      await ensureLogin(auth, account);\n      expect(callingSettings.callWithOptions).to.deep.equals([\n        callingOptions.softphone,\n        callingOptions.myphone,\n        callingOptions.customphone\n      ]);\n    });\n  });\n};\n"]}