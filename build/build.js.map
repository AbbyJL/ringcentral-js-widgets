{"version":3,"sources":["services/rc-sdk.js","service.js","services/login-service.js","services/call-log-service.js","services/rc-webphone.js","services/phone-service.js","services/rc-contact-service.js","services/contact-search-service.js","services/rc-contact-search-provider.js","services/account-service.js","services/rc-message-service.js","services/rc-message-provider.js","services/message-search-service.js","action.js","actions/interaction.js","util/util.js","component.js","w.js","index.js"],"names":["register","registerComponent"],"mappings":"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","file":"build.js","sourcesContent":["var sdk = new RingCentral.SDK({\n    appKey: '8mOtYiilT5OUPwwdeGgvpw',\n    appSecret: 'cqNn89RmR2SR76Kpp8xJaAdNzNOqR8Qfmjb0B-gDOHTw',\n    server: RingCentral.SDK.server.production\n});\n\nexport default sdk;\n","var services = {};\nfunction register(name, service) {\n    services[name] = service;\n}\nfunction getServices() {\n    return services;\n}\nexport {\n    register,\n    getServices\n};\n","import sdk from './rc-sdk';\nimport { register } from '../service';\nvar LoginService = function(sdk) {\n    var onLoginHandler = [];\n    return {\n        login: function(username, extension, password) {\n            return sdk.platform()\n                .login({\n                    'username': username,\n                    'extension': extension,\n                    'password': password\n                })\n        },\n        logout: function() {\n            return sdk.platform().logout();\n        },\n        checkLoginStatus: function() {\n            return sdk.platform().loggedIn().then(function(isLoggedIn) {\n                if (isLoggedIn) {\n                    onLoginHandler.forEach(handler => handler());\n                }\n                return isLoggedIn;\n            });\n        },\n\n    };\n}(sdk);\nregister('loginService', LoginService);\n","import sdk from './rc-sdk';\nimport { register } from '../service';\nvar CallLogService = (function(sdk) {\n    var period = 7 * 24 * 3600 * 1000;\n    var dateFrom = new Date(Date.now() - (period));\n    return {\n        getCallLogs: function() {\n            return sdk.platform()\n                .get('/account/~/extension/~/call-log', {dateFrom: dateFrom.toISOString()})\n                .then(response => {\n                    console.debug(response.json().records)\n                    return response.json().records;\n                })\n                .catch(function(e) {\n                    console.error('Recent Calls Error: ' + e.message);\n                });\n        },\n    };\n})(sdk);\n\nregister('callLogService', CallLogService);\nexport default CallLogService;\n","var webPhone = new RingCentral.WebPhone({\n    audioHelper: {}\n});\n\nexport default webPhone;\n","import sdk from './rc-sdk';\nimport webPhone from './rc-webphone';\nimport { register } from '../service';\n\nvar PhoneService = function() {\n    var line;\n    var handlers = {\n        called: [],\n        callStarted: [],\n        callRejected: [],\n        callEnded: [],\n        callFailed: []\n    };\n    return {\n        registerSIP: function() {\n            return sdk.platform()\n                .post('/client-info/sip-provision', {\n                    sipInfo: [{\n                        transport: 'WSS'\n                    }]\n                })\n                .then(res => {\n                    return webPhone.register(res.json(), false)\n                        .catch(function(e) {\n                            return Promise.reject(err);\n                        });\n                });\n        },\n        callout: function(fromNumber, toNumber) {\n            // TODO: validate toNumber and fromNumber\n            if (!sdk || !webPhone) {\n                throw Error('Need to set up SDK and webPhone first.');\n                return;\n            }\n            return sdk.platform()\n                .get('/restapi/v1.0/account/~/extension/~')\n                .then(res => {\n                    var info = res.json();\n                    if (info && info.regionalSettings && info.regionalSettings.homeCountry) {\n                        return info.regionalSettings.homeCountry.id;\n                    }\n                    return null;\n                })\n                .then(countryId => {\n                    webPhone.call(toNumber, fromNumber, countryId);\n                });\n        },\n        answer: function() {\n            return webPhone\n                .answer(line);\n        },\n        ignore: function() {},\n        cancel: function() {\n            return line\n                .cancel();\n        },\n        hangup: function() {\n            return webPhone\n                .hangup(line);\n        },\n        on: function(name, handler) {\n            handlers[name].push(handler);\n        },\n        listen: function() {\n            webPhone.ua.on('incomingCall', e => {\n                line = e;\n                handlers.called.forEach(h => h(e));\n            });\n            webPhone.ua.on('callStarted', e => {\n                handlers.callStarted.forEach(h => h(e));\n            });\n            webPhone.ua.on('callRejected', e => {\n                handlers.callRejected.forEach(h => h(e));\n            });\n            webPhone.ua.on('callEnded', e => {\n                handlers.callEnded.forEach(h => h(e));\n            });\n            webPhone.ua.on('callFailed', e => {\n                handlers.callFailed.forEach(h => h(e));\n            });\n        },\n    };\n}();\nregister('phoneService', PhoneService);\n","import sdk from './rc-sdk';\nimport { register } from '../service';\n\nvar rcContactService = function(sdk) {\n    var companyContacts = [];\n\n    function Contact() {\n        this.firstName = null;\n        this.lastName = null;\n        this.displayName = null;\n        this.extension = null;\n        this.phoneNumber = [];\n    }\n\n    function createContact(extension) {\n        var contact = new Contact();\n        contact.extension = extension.extensionNumber;\n        contact.firstName = extension.contact.firstName;\n        contact.lastName = extension.contact.lastName;\n        contact.displayName = contact.firstName + ' ' + contact.lastName;\n        contact.type = 'rc';\n        contact.id  = extension.id;\n        return contact;\n    }\n\n    function fetchCompanyContactByPage(page) {\n        return sdk.platform().get('/account/~/extension/', {perPage: 250, page: page});\n    }\n\n    function fetchCompanyDirectNumbersByPage(page) {\n        return sdk.platform().get('/account/~/phone-number', {perPage: 250, page: page});\n    }\n\n    function fetchCompanyContacts() {\n        var page = 1;\n        fetchCompanyContactByPage(page)\n        .then(function(response) {\n            var respObj = response.json();\n            if (respObj.paging && respObj.paging.totalPages > page) {\n                var promises = [];\n                while (respObj.paging.totalPages > page) {\n                    page++;\n                    promises.push(fetchCompanyContactByPage(page));\n                }\n\n                Promise.all(promises).then(responses=> {\n                    responses.forEach(function(response) {\n                        var records = response.json().records\n                            .filter(extension => {\n                                return extension.status === 'Enabled' && ['DigitalUser', 'User'].indexOf(extension.type) >= 0;\n                            }).map(extension => {\n                                return createContact(extension);\n                            });\n                        companyContacts.push.apply(companyContacts, records);\n                    });\n\n                    fetchCompanyDirectNumbers();\n                });\n            }\n        }).catch(function(e) {\n            console.error(e);\n        });\n    }\n\n    function fetchCompanyDirectNumbers() {\n        var page = 1;\n        fetchCompanyDirectNumbersByPage(page)\n        .then(response => {\n            var respObj = response.json();\n            if (respObj.paging && respObj.paging.totalPages > page) {\n                var promises = [];\n                while (respObj.paging.totalPages > page) {\n                    page++;\n                    promises.push(fetchCompanyDirectNumbersByPage(page));\n                }\n\n                Promise.all(promises).then(responses => {\n                    var numbers = {};\n                    responses.forEach(response => {\n                        var resp = response.json();\n                        resp.records.forEach(el => {\n                            if (el.extension && el.extension.extensionNumber) {\n                                if (!numbers[el.extension.extensionNumber]) {\n                                    numbers[el.extension.extensionNumber] = [];\n                                }\n\n                                numbers[el.extension.extensionNumber].push(el);\n                            }\n                        });\n                    });\n                    companyContacts.forEach(contact => {\n                        var phones = numbers[contact.extension];\n                        if (phones) {\n                            phones.forEach(phone => {\n                                contact.phoneNumber.push(phone.phoneNumber);\n                            });\n                        }\n                    });\n                });\n            }\n        });\n    }\n\n    return {\n        companyContacts: companyContacts,\n        syncCompanyContact: function() {\n            companyContacts.length = 0;\n            fetchCompanyContacts();\n        },\n    };\n}(sdk);\n\nregister('rcContactService', rcContactService);\nexport default rcContactService;\n","import { register } from '../service';\nvar contactSearchService = (function() {\n    var searchProviders = [];\n    var queryCompletedHandlers = [];\n\n    function createResult(item) {\n        return {\n            name: item.name,\n            value: item.value,\n            type: item.type,\n        };\n    }\n    return {\n        query: function(searchFunctions, filter) {\n            return Promise.all(searchFunctions).then(results => {\n                var searchResultsKeys = {};\n                var searchResults = [];\n                results.forEach(result => {\n                    result.forEach(item => {\n                        if (filter) {\n                            if (filter(item)) {\n                                var key = item.name + item.value;\n                                if (!searchResultsKeys[key]) {\n                                    var toAddItem = createResult(item);\n                                    searchResultsKeys[key] = toAddItem;\n                                    searchResults.push(toAddItem);\n                                }\n                            }\n                        } else {\n                            var key = item.name + item.value;\n                            if (!searchResultsKeys[key]) {\n                                var toAddItem = createResult(item);\n                                searchResultsKeys[key] = toAddItem;\n                                searchResults.push(toAddItem);\n                            }\n                        }\n                    });\n                });\n                return searchResults;\n            });\n        },\n    };\n})();\nregister('contactSearchService', contactSearchService);\nexport default contactSearchService;\n","import rcContactService from './rc-contact-service';\nimport { register } from '../service';\nvar rcContactSearchProvider = function() {\n    return {\n        search: function(text) {\n            var results = [];\n            if (text) {\n                text = text.toLowerCase();\n                rcContactService.companyContacts.map(contact => {\n                    if (contact.displayName && contact.displayName.toLowerCase().indexOf(text) >= 0) {\n                        results.push({\n                            name: contact.displayName,\n                            value: contact.extension,\n                            type: 'rc',\n                            id: contact.id,\n                        });\n                        contact.phoneNumber.forEach(phone => {\n                            results.push({\n                                name: contact.displayName,\n                                value: phone,\n                                type: 'rc',\n                                id: contact.id,\n                            });\n                        });\n                    } else {\n                        if (contact.extension && contact.extension.indexOf(text) >= 0) {\n                            results.push({\n                                name: contact.displayName,\n                                value: contact.extension,\n                                type: 'rc',\n                                id: contact.id,\n                            });\n                        }\n\n                        contact.phoneNumber.forEach(phone => {\n                            if (phone.indexOf(text) >= 0) {\n                                results.push({\n                                    name: contact.displayName,\n                                    value: phone,\n                                    type: 'rc',\n                                    id: contact.id,\n                                });\n                            }\n                        });\n                    }\n                });\n            }\n\n            return results;\n        },\n    };\n}();\n\nregister('rcContactSearchProvider', rcContactSearchProvider);\nexport default rcContactSearchProvider;\n","import sdk from './rc-sdk';\nimport { register } from '../service';\nvar accountService = (function(sdk) {\n    var info;\n    var numbers;\n    return {\n        getAccountInfo: function() {\n            return sdk.platform()\n                .get('/account/~/extension/~')\n                .then(response => {\n                    console.debug(response.json());\n                    info = response.json();\n                    return info;\n                })\n                .catch(function(e) {\n                    console.error('Recent Calls Error: ' + e.message);\n                });\n        },\n\n        getPhoneNumber: function() {\n            return sdk.platform()\n                .get('/account/~/extension/~/phone-number')\n                .then(response => {\n                    console.debug(response.json());\n\n                    // info = response.json();\n                    return response.json();\n                })\n                .then(data => {\n                    numbers = data.records;\n                    return data.records;\n                })\n                .catch(function(e) {\n                    console.error('Recent Calls Error: ' + e.message);\n                });\n        },\n\n        hasServiceFeature: function(name) {\n            if (!info)\n                return Error('Need to fetch account info by accountService.getAccountInfo');\n            return info.serviceFeatures\n                .filter(feature => feature.featureName.toLowerCase() === name.toLowerCase())\n                .length > 0;\n        },\n\n        listNumber: function(type) {\n            console.debug(numbers);\n            return numbers\n            .filter(number => number.type === type)\n            .map(number => number.phoneNumber);\n        },\n    };\n})(sdk);\n\nregister('accountService', accountService);\nexport default accountService;\n","import sdk from './rc-sdk';\nimport { register } from '../service';\n\nvar rcMessageService = function(sdk) {\n\n    var MESSAGES_MAX_AGE_HOURS = 7 * 24;\n    var messages = {};\n    var fetchingPromise = null;\n    \n    function fetchMessages(){\n        return sdk.platform().get('/account/~/extension/~/message-store', {\n                    dateFrom: new Date(Date.now() - MESSAGES_MAX_AGE_HOURS * 3600 * 1000).toISOString()\n        }).then(responses => {\n            var results = responses.json().records;\n            results.forEach(message => {\n                if(!messages[message.type]){\n                    messages[message.type] = [];\n                }\n                messages[message.type].push(message);\n            });\n            fetchingPromise = null;\n        });\n    }\n    \n    function concatMessages(){\n        var results = [];\n        for(var key in messages){\n            if(messages.hasOwnProperty(key)){\n                results = results.concat(messages[key]);\n            }\n        }\n        return results;\n    }\n\n    return {\n        syncMessages: function() {\n            fetchingPromise = fetchMessages();\n        },\n        getMessagesByType: function(type){\n            if(!fetchingPromise){\n                if(messages[type]){\n                    return messages[type];\n                }else{\n                    return [];\n                }   \n            }else{\n                return fetchingPromise.then(() => {\n                    return messages[type];\n                });\n            }\n        },\n        getAllMessages: function() {\n            if(!fetchingPromise){\n                return concatMessages();\n            }else{\n                return fetchingPromise.then(() => {\n                    return concatMessages();\n                });\n            }\n        }\n    };\n}(sdk);\n\nregister('rcMessageService', rcMessageService);\nexport default rcMessageService;\n","import rcMessageService from './rc-message-service';\nimport { register } from '../service';\nvar rcMessageProvider = function() {\n    \n    function createResult(message){\n        var result = {};\n        if(message.direction === 'Outbound'){\n            if(message.type === 'Pager'){\n                result.contact = message.to[0].extensionNumber;\n            }else{\n                result.contact = message.to[0].phoneNumber;\n            }\n        }else{\n            if(message.type === 'Pager'){\n                result.contact = message.from.extensionNumber;\n            }else{\n                result.contact = message.from.phoneNumber;            \n            }\n        }\n        //TODO: Use localization string instead of plain text\n        if(message.type === 'SMS' || message.type === 'Pager'){\n            result.subject = message.subject;\n        }else if(message.type === 'VoiceMail'){\n            result.subject = 'Voice Message';\n        }else if(message.type === 'Fax'){\n            result.subject = 'Fax';\n        }\n        result.readStatus = message.readStatus;\n        result.type = message.type;\n        result.id = message.id;\n        result.time = message.lastModifiedTime;\n        return result;\n    }\n    \n    return {\n        getTextMessages: function() {\n            return Promise.resolve(rcMessageService.getMessagesByType('SMS')).then(messages => {\n                var results = [];\n                messages.forEach(message => {\n                    results.push(createResult(message));\n                });\n                return results;\n            });\n        },\n        getAllMessages: function() {\n            return Promise.resolve(rcMessageService.getAllMessages()).then(messages => {\n                var results = [];\n                var added = {};\n                messages.forEach(message => {\n                    var result = createResult(message);\n                    if(message.conversationId){\n                        if(!added[message.conversationId]){\n                            added[message.conversationId] = [];\n                        }\n                        added[message.conversationId].push(result);\n                    }else{\n                        results.push(result);\n                    }\n                });\n                for(var key in added){\n                    if(added.hasOwnProperty(key)){\n                        results.push(added[key][added[key].length-1]);\n                    }\n                }\n                return results;\n            });\n        }\n    };\n}();\nregister('rcMessageProvider', rcMessageProvider);\nexport default rcMessageProvider;\n\n","import { register } from '../service';\nvar messageSearchService = function() {\n    return {\n        getMessages: function(messageProviderFunctions, filter) {\n            return Promise.all(messageProviderFunctions).then(messageResults => {\n                var results = [];\n                messageResults.forEach(messages => {\n                    messages.forEach(message => {\n                        if(filter){\n                            if(filter(message)){\n                                results.push(message);\n                            }\n                        }else{\n                            results.push(message);\n                        }                    \n                    });    \n                });\n                return results;\n            });\n        }\n    }\n}();\nregister('messageSearchService', messageSearchService);\nexport default messageSearchService;","var actions = {};\nfunction register(name, action) {\n    actions[name] = action;\n}\nfunction getActions() {\n    return actions;\n}\nexport {\n    register,\n    getActions\n};\n","import { register } from '../action';\nvar interaction = {\n    show: {\n        before: function() {},\n        method: function(finish) {},\n        after: function(target = this.props.root) {\n            target.classList.remove('display-none');\n        }\n    },\n    hide: {\n        before: function() {},\n        method: function(finish) {},\n        after: function(target = this.props.root) {\n            target.classList.add('display-none');\n        }\n    },\n    diabled: {\n        before: function() {},\n        method: function(finish) {},\n        after: function(target = this.props.root, message) {\n            var mask = document.createElement('div');\n            mask.classList.add('rc-mask');\n            var message = document.createElement('h4');\n            message.classList.add('rc-mask-message');\n            message.textContent = message;\n            target.appendChild(mask);\n            this.props.mask = mask;\n            return mask;\n        }\n    },\n    enable: {\n        before: function() {},\n        method: function(finish) {},\n        after: function() {\n            if (this.props.mask && this.props.mask instanceof HTMLElement) {\n                this.props.mask.parentNode.removeChild(this.props.mask);\n            }\n        }\n    }\n}\nregister('interaction', interaction);\n","function initLogger(level) {\n    return {\n        error: function(...args) {\n            console.error(...args);\n        },\n        warn: function(...args) {\n            if (level > 0)\n                console.warn(...args);\n        },\n        info: function(...args) {\n            if (level > 1)\n                console.info(...args);\n        },\n        log: function(...args) {\n            if (level > 1)\n                console.log(...args);\n        }\n    };\n}\n\nfunction isThenable(result) {\n    if (result.then && typeof result.then === 'function')\n        return true;\n    return false;\n}\n\nfunction isFunction(fn) {\n    return typeof fn === 'function';\n}\n\nexport {\n    initLogger,\n    isThenable,\n    isFunction\n};\n","import {initLogger, isThenable, isFunction, emptyFn} from './util/util'\nvar logger;\nfunction register(globalSettings) {\n    if (!globalSettings.actions)\n        console.warn('Widgets do not have actions defined, maybe you get some typo.');\n\n    ['init', 'render', 'remove', 'error'].forEach(action => {\n        globalSettings.actions[action] = Object.assign({\n            before: function() {},\n            method: function() {},\n            after: function() {},\n            error: function(e) {\n                console.error(e);\n                throw e;\n            }\n        }, globalSettings.actions[action]);\n    });\n    return widget.bind(null, globalSettings);\n}\n\nfunction widget(globalSettings, options) {\n    if (!options.internal) {\n        return Error('You are trying to construct a widget manually, please use w()');\n    }\n    var options = Object.assign({\n        actions: {}\n    }, options);\n    var settings = {\n        // For deep copy\n        actions: Object.assign({}, globalSettings.actions),\n    };\n    this.props = {};\n    this.custom = {};\n    logger = initLogger(options.logLevel);\n\n    Object.keys(settings.actions).forEach(index => {\n        settings.actions[index] = bindScope(this, settings.actions[index]);\n    });\n    Object.keys(options.actions).forEach(index => {\n        options.actions[index] = bindScope(this, options.actions[index]);\n    });\n    Object.keys(settings.actions).forEach(index => {\n        this[index] =\n            generateActions(settings.actions[index], options.actions[index], index);\n    });\n    this.props.dom = generateDocument(this, options.template);\n    this.props.root = getDocumentRoot(options.template);\n    this.props.template = options.template;\n    this.render =\n        generateActions({\n            before: settings.actions.render.before,\n            method: render.bind(this, settings.actions.render.method, this.props.template),\n            after: settings.actions.render.after\n        }, options.actions.render, 'render');\n    this.remove =\n        generateActions({\n            before: settings.actions.remove.before,\n            method: remove.bind(this, settings.actions.remove.method),\n            after: settings.actions.remove.after\n        }, options.actions.remove, 'remove');\n    this.init();\n\n    function remove(widgetRemove) {\n        while (this.props.target.firstChild)\n            this.props.target.removeChild(this.props.target.firstChild);\n    }\n\n    function render(widgetRender, template, finish, target, callback) {\n        if (typeof target === 'string') {\n            target = document.querySelector(target);\n        } else if (target instanceof HTMLElement) {\n            target = target;\n        } else {\n            logger.warn('first argument of render method should be selector string or dom');\n        }\n        target.appendChild(template);\n        this.props.target = target;\n        callback && isFunction(callback) && callback();\n        if (widgetRender && isFunction(widgetRender))\n            return widgetRender.call(this, finish);\n    }\n}\n\nfunction bindScope(scope, action) {\n    return {\n        before: action.before ? action.before.bind(scope) : function() {}.bind(scope),\n        method: action.method ? action.method.bind(scope) : function() {}.bind(scope),\n        after: action.after ? action.after.bind(scope) : function() {}.bind(scope),\n        error: action.error ? action.error.bind(scope) : function(err) {\n            logger.error(err);\n        }.bind(scope)\n    };\n}\n\nfunction generateDocument(widget, template) {\n    var dom = {};\n    Array.from(template.querySelectorAll('[data-info]')).forEach(doc => {\n        var info = doc.getAttribute('data-info');\n        dom[info] = doc;\n    });\n    Array.from(template.querySelectorAll('[data-event]')).forEach(doc => {\n        var events = doc.getAttribute('data-event');\n        events.split('|').forEach(event => {\n            var eventName;\n            var action;\n            event.split(':').forEach((token, index) => {\n                if (index === 0)\n                    eventName = token;\n                else if (index === 1)\n                    action = token;\n            });\n            if (!widget[action]) {\n                logger.warn('No such method:' + action + ' in ' + events + ', check data-event and widget methods definition');\n                return;\n            }\n            doc.addEventListener(eventName, widget[action].bind(widget));\n        });\n    });\n    return dom;\n}\n\nfunction getDocumentRoot(template) {\n    // Assume the template only have one root\n    return template.querySelector('*');\n}\n\nfunction generateActions(widgetAction, userAction, name) {\n    if (!userAction) {\n        userAction = {\n            before: function() {},\n            method: function() {},\n            after: function() {},\n            error: function(e) {\n                logger.error(e);\n                throw e;\n            }\n        };\n        logger.warn('Widget action [%s] is not defined by users', name);\n    }\n    return function(...args) {\n        var before = function(...args) {\n            logger.info('[%s][before](' + [].concat(...args) + ')', name);\n            return wrapUserEvent(widgetAction.before, userAction.before, ...args);\n        };\n        var method = function(arg) {\n            logger.info('[%s][method](' + (isFunction(arg) ? arg() : arg) + ')', name);\n            if (isFunction(arg)) {\n                return widgetAction.method(userAction.method, ...arg()) || arg;\n            }\n            return widgetAction.method(userAction.method, arg) || arg;\n        };\n        var after = function(arg) {\n            logger.info('[%s][after](' + (isFunction(arg) ? arg() : arg) + ')', name);\n            if (isFunction(arg)) {\n                return wrapUserEvent(widgetAction.after, userAction.after, ...arg()) || arg;\n            }\n            return wrapUserEvent(widgetAction.after, userAction.after, arg) || arg;\n        };\n        var error = function(e) {\n            return wrapUserEvent(widgetAction.error, userAction.error, e);\n        };\n        var finish = function(arg) {\n            if (isFunction(arg)) {\n                // flatten one level\n                return Array.isArray(arg()[0])? [].concat.apply([], arg()) : arg()[0];\n            }\n            return arg;\n        };\n        try {\n            return nextAction(before(...args), [before, method, after, finish], error, 0);\n        } catch (e) {\n            error(e);\n        }\n    };\n}\n\nfunction wrapUserEvent(widget, user, ...args) {\n    var continueDefault = (user != null && user(...args));\n    if (continueDefault || typeof continueDefault === 'undefined')\n        return widget(...args) || (() => args);\n    return [].concat(...args);\n}\n\nfunction nextAction(result, actions, error, start) {\n    if (start + 1 === actions.length)\n        return result;\n    if (isThenable(result)) {\n        return actions.reduce((res, action, index) => {\n            if (index > start)\n                return res.then(action);\n            return res;\n        }, result).catch(error);\n    } else {\n        return nextAction(actions[start + 1](result), actions, error, start + 1);\n    }\n}\n\nexport { register };\n","import { register as registerComponent } from './component';\nimport { getServices } from './service';\nimport { getActions } from './action';\n\nfunction fetchWidget(filePath) {\n    return fetch(w.options.path + filePath + (filePath.endsWith('.html') ? '' : '.html'))\n        .then(response => response.text())\n        .then(body => {\n            var template = document.createElement('template');\n            template.innerHTML = body;\n            var clone = document.importNode(template.content, true);\n            return clone;\n        });\n}\n\nfunction parseDocument(template) {\n    var docs = template.querySelectorAll('*');\n    return Promise.all(Array.from(docs).reduce(\n        (result, doc) => {\n            if (doc.tagName.indexOf('-') > -1 || doc instanceof HTMLUnknownElement) {\n                var temp = {};\n                var name = doc.tagName.toLowerCase()\n                temp[name] = name;\n                return result.concat(preload(temp));\n            }\n            return result;\n        }, []));\n}\n\nfunction initNestedWidget(widget) {\n    var template = widget.props.template;\n    var docs = template.querySelectorAll('*');\n    Array.from(docs).forEach(doc => {\n        if (doc.tagName.indexOf('-') > -1 || doc instanceof HTMLUnknownElement) {\n            if (typeof doc.getAttribute('dynamic') !== 'undefine' && doc.getAttribute('dynamic') !== null) {\n                return;\n            }\n            var name = doc.tagName.toLowerCase()\n            var child = w(name, widget.custom[name]);\n            child.render(doc);\n            // FIXME: When multiple child element, has problems\n            var childName = doc.getAttribute('data-info');\n            if (childName)\n                widget.props[childName] = child;\n        }\n    });\n}\n\nfunction preload(widgets, callback) {\n    return Promise.all(\n        Object.keys(widgets).reduce(\n            (result, name) => {\n                if (!w.templates[name]) {\n                    w.templates[name] = {};\n                }\n                if (!w.templates[name].fetch) {\n                    w.templates[name].fetch = fetchWidget(widgets[name]);\n                }\n                return result.concat(\n                    w.templates[name].fetch\n                    .then(template => {\n                        if (!w.templates[name].template) {\n                            w.templates[name].template = template;\n                            var script = template.querySelector('script');\n                            document.body.appendChild(script);\n                            document.body.removeChild(script);\n                        }\n                        return template;\n                    })\n                    .then(parseDocument)\n                    .catch(err => console.error('Widgets preload error:' + err)));\n            }, [])\n    ).then(callback);\n}\n\n// Public API\nfunction w(name, options) {\n    options = options || {};\n    var baseWidget;\n    if (!w.templates[name] || !w.templates[name].widget) {\n        throw Error('you need to preload widget:' + name + ' before init it');\n    }\n    baseWidget = new w.templates[name].widget({\n        template: w.templates[name].template.cloneNode(true),\n        actions: options.actions || {},\n        logLevel: w.options.logLevel,\n        internal: true // for check it's called by internal\n    });\n    initNestedWidget(baseWidget);\n    return baseWidget;\n}\nw.templates = {};\nw.options = {};\nw.register = function(options) {\n    var settings = new options();\n    Object.keys(w.templates).forEach(index => {\n        var template = w.templates[index];\n        if (template.template && !template.widget)\n            template.widget = registerComponent(settings);\n    });\n};\nw.config = function(options, callback) {\n    w.options.preload = options.preload || {};\n    w.options.path = options.path || '';\n    w.options.logLevel = options.logLevel || 0;\n    preload(w.options.preload, callback);\n};\nw.customize = function(context, target, options) {\n    context.custom[target] = options;\n};\nw.service = getServices;\nw.action = function(name) {\n    return Object.assign([], getActions()[name]);\n}\n\nexport default w;\n","// services\nimport LoginService from './services/login-service';\nimport CallLogService from './services/call-log-service';\nimport PhoneService from './services/phone-service';\nimport rcContactService from './services/rc-contact-service';\nimport contactSearchService from './services/contact-search-service';\nimport rcContactSearchProvider from './services/rc-contact-search-provider';\nimport accountService from './services/account-service';\nimport rcMessageService from './services/rc-message-service';\nimport rcMessageProvider from './services/rc-message-provider';\nimport messageSearchService from './services/message-search-service';\n\n// actions\nimport interaction from './actions/interaction';\nimport w from './w';\n// development only\nwindow.w = w;\n// export default w;\n"],"sourceRoot":"/source/"}