{"version":3,"sources":["index.js","services/rc-sdk.js","service.js","services/login-service.js","services/call-log-service.js","services/rc-webphone.js","services/phone-service.js","services/rc-contact-service.js","services/contact-search-service.js","services/rc-contact-search-provider.js","services/account-service.js","services/rc-subscription-service.js","services/rc-message-service.js","services/rc-message-provider.js","action.js","actions/interaction.js","util/index.js","component.js","transition.js","../../node_modules/node-polyglot/lib/polyglot.js","../../node_modules/node-polyglot/index.js","translation.js","w.js"],"names":["register","this","registerComponent"],"mappings":"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","file":"build.js","sourcesContent":["// services\nimport LoginService from './services/login-service';\nimport CallLogService from './services/call-log-service';\nimport PhoneService from './services/phone-service';\nimport rcContactService from './services/rc-contact-service';\nimport contactSearchService from './services/contact-search-service';\nimport rcContactSearchProvider from './services/rc-contact-search-provider';\nimport accountService from './services/account-service';\nimport rcMessageService from './services/rc-message-service';\nimport rcMessageProvider from './services/rc-message-provider';\nimport rcSubscription from './services/rc-subscription-service'\n\n// actions\nimport interaction from './actions/interaction';\nimport w from './w';\n// development only\nwindow.w = w;\n// export default w;\n","var sdk = new RingCentral.SDK({\n    appKey: '8mOtYiilT5OUPwwdeGgvpw',\n    appSecret: 'cqNn89RmR2SR76Kpp8xJaAdNzNOqR8Qfmjb0B-gDOHTw',\n    server: RingCentral.SDK.server.production\n});\n\nexport default sdk;\n","var services = {};\nfunction register(name, service) {\n    services[name] = service;\n}\nfunction getServices() {\n    return services;\n}\nexport {\n    register,\n    getServices\n};\n","import sdk from './rc-sdk';\nimport { register } from '../service';\nvar LoginService = function(sdk) {\n    var onLoginHandler = [];\n    return {\n        login: function(username, extension, password) {\n            return sdk.platform()\n                .login({\n                    'username': username,\n                    'extension': extension,\n                    'password': password\n                });\n        },\n        logout: function() {\n            return sdk.platform().logout();\n        },\n        checkLoginStatus: function() {\n            return sdk.platform().loggedIn().then(function(isLoggedIn) {\n                if (isLoggedIn) {\n                    onLoginHandler.forEach(handler => handler());\n                }\n                return isLoggedIn;\n            });\n        },\n\n    };\n}(sdk);\nregister('loginService', LoginService);\n","import sdk from './rc-sdk';\nimport { register } from '../service';\nvar CallLogService = (function(sdk) {\n    var period = 7 * 24 * 3600 * 1000;\n    var dateFrom = new Date(Date.now() - (period));\n    return {\n        getCallLogs: function() {\n            return sdk.platform()\n                .get('/account/~/extension/~/call-log', {dateFrom: dateFrom.toISOString()})\n                .then(response => {\n                    return response.json().records;\n                })\n        },\n    };\n})(sdk);\n\nregister('callLogService', CallLogService);\nexport default CallLogService;\n","var webPhone = new RingCentral.WebPhone({\n    audioHelper: {}\n});\n\nexport default webPhone;\n","import sdk from './rc-sdk';\nimport webPhone from './rc-webphone';\nimport { register } from '../service';\n\nvar PhoneService = function() {\n    var line;\n    var handlers = {\n        called: [],\n        callStarted: [],\n        callRejected: [],\n        callEnded: [],\n        callFailed: []\n    };\n    return {\n        registerSIP: function() {\n            return sdk.platform()\n                .post('/client-info/sip-provision', {\n                    sipInfo: [{\n                        transport: 'WSS'\n                    }]\n                })\n                .then(res => {\n                    return webPhone.register(res.json(), false)\n                        .catch(function(e) {\n                            return Promise.reject(err);\n                        });\n                });\n        },\n        callout: function(fromNumber, toNumber) {\n            // TODO: validate toNumber and fromNumber\n            if (!sdk || !webPhone) {\n                throw Error('Need to set up SDK and webPhone first.');\n                return;\n            }\n            return sdk.platform()\n                .get('/restapi/v1.0/account/~/extension/~')\n                .then(res => {\n                    var info = res.json();\n                    if (info && info.regionalSettings && info.regionalSettings.homeCountry) {\n                        return info.regionalSettings.homeCountry.id;\n                    }\n                    return null;\n                })\n                .then(countryId => {\n                    webPhone.call(toNumber, fromNumber, countryId);\n                });\n        },\n        answer: function() {\n            return webPhone\n                .answer(line);\n        },\n        ignore: function() {},\n        cancel: function() {\n            return line\n                .cancel();\n        },\n        hangup: function() {\n            return webPhone\n                .hangup(line);\n        },\n        on: function(name, handler) {\n            handlers[name].push(handler);\n        },\n        listen: function() {\n            webPhone.ua.on('incomingCall', e => {\n                line = e;\n                handlers.called.forEach(h => h(e));\n            });\n            webPhone.ua.on('callStarted', e => {\n                handlers.callStarted.forEach(h => h(e));\n            });\n            webPhone.ua.on('callRejected', e => {\n                handlers.callRejected.forEach(h => h(e));\n            });\n            webPhone.ua.on('callEnded', e => {\n                handlers.callEnded.forEach(h => h(e));\n            });\n            webPhone.ua.on('callFailed', e => {\n                handlers.callFailed.forEach(h => h(e));\n            });\n        },\n    };\n}();\nregister('phoneService', PhoneService);\n","import sdk from './rc-sdk';\nimport { register } from '../service';\n\nvar rcContactService = function(sdk) {\n    var companyContacts = [];\n\n    function Contact() {\n        this.firstName = null;\n        this.lastName = null;\n        this.displayName = null;\n        this.extension = null;\n        this.phoneNumber = [];\n    }\n\n    function createContact(extension) {\n        var contact = new Contact();\n        contact.extension = extension.extensionNumber;\n        contact.firstName = extension.contact.firstName;\n        contact.lastName = extension.contact.lastName;\n        contact.displayName = contact.firstName + ' ' + contact.lastName;\n        contact.type = 'rc';\n        contact.id  = extension.id;\n        return contact;\n    }\n\n    function fetchCompanyContactByPage(page) {\n        return sdk.platform().get('/account/~/extension/', {perPage: 250, page: page});\n    }\n\n    function fetchCompanyDirectNumbersByPage(page) {\n        return sdk.platform().get('/account/~/phone-number', {perPage: 250, page: page});\n    }\n\n    function fetchCompanyContacts() {\n        var page = 1;\n        fetchCompanyContactByPage(page)\n        .then(function(response) {\n            var respObj = response.json();\n            if (respObj.paging && respObj.paging.totalPages > page) {\n                var promises = [];\n                while (respObj.paging.totalPages > page) {\n                    page++;\n                    promises.push(fetchCompanyContactByPage(page));\n                }\n\n                Promise.all(promises).then(responses=> {\n                    responses.forEach(function(response) {\n                        var records = response.json().records\n                            .filter(extension => {\n                                return extension.status === 'Enabled' && ['DigitalUser', 'User'].indexOf(extension.type) >= 0;\n                            }).map(extension => {\n                                return createContact(extension);\n                            });\n                        companyContacts.push.apply(companyContacts, records);\n                    });\n\n                    fetchCompanyDirectNumbers();\n                });\n            }\n        }).catch(function(e) {\n            console.error(e);\n        });\n    }\n\n    function fetchCompanyDirectNumbers() {\n        var page = 1;\n        fetchCompanyDirectNumbersByPage(page)\n        .then(response => {\n            var respObj = response.json();\n            if (respObj.paging && respObj.paging.totalPages > page) {\n                var promises = [];\n                while (respObj.paging.totalPages > page) {\n                    page++;\n                    promises.push(fetchCompanyDirectNumbersByPage(page));\n                }\n\n                Promise.all(promises).then(responses => {\n                    var numbers = {};\n                    responses.forEach(response => {\n                        var resp = response.json();\n                        resp.records.forEach(el => {\n                            if (el.extension && el.extension.extensionNumber) {\n                                if (!numbers[el.extension.extensionNumber]) {\n                                    numbers[el.extension.extensionNumber] = [];\n                                }\n\n                                numbers[el.extension.extensionNumber].push(el);\n                            }\n                        });\n                    });\n                    companyContacts.forEach(contact => {\n                        var phones = numbers[contact.extension];\n                        if (phones) {\n                            phones.forEach(phone => {\n                                contact.phoneNumber.push(phone.phoneNumber);\n                            });\n                        }\n                    });\n                });\n            }\n        });\n    }\n\n    return {\n        companyContacts: companyContacts,\n        syncCompanyContact: function() {\n            companyContacts.length = 0;\n            fetchCompanyContacts();\n        },\n    };\n}(sdk);\n\nregister('rcContactService', rcContactService);\nexport default rcContactService;\n","import { register } from '../service';\nvar contactSearchService = (function() {\n    var searchProviders = [];\n    var queryCompletedHandlers = [];\n\n    function createResult(item) {\n        return {\n            name: item.name,\n            value: item.value,\n            type: item.type,\n        };\n    }\n    return {\n        query: function(searchFunctions, filter) {\n            return Promise.all(searchFunctions).then(results => {\n                var searchResultsKeys = {};\n                var searchResults = [];\n                results.forEach(result => {\n                    result.forEach(item => {\n                        if (filter) {\n                            if (filter(item)) {\n                                var key = item.name + item.value;\n                                if (!searchResultsKeys[key]) {\n                                    var toAddItem = createResult(item);\n                                    searchResultsKeys[key] = toAddItem;\n                                    searchResults.push(toAddItem);\n                                }\n                            }\n                        } else {\n                            var key = item.name + item.value;\n                            if (!searchResultsKeys[key]) {\n                                var toAddItem = createResult(item);\n                                searchResultsKeys[key] = toAddItem;\n                                searchResults.push(toAddItem);\n                            }\n                        }\n                    });\n                });\n                return searchResults;\n            });\n        },\n    };\n})();\nregister('contactSearchService', contactSearchService);\nexport default contactSearchService;\n","import rcContactService from './rc-contact-service';\nimport { register } from '../service';\nvar rcContactSearchProvider = function() {\n    return {\n        search: function(text) {\n            var results = [];\n            if (text) {\n                text = text.toLowerCase();\n                rcContactService.companyContacts.map(contact => {\n                    if (contact.displayName && contact.displayName.toLowerCase().indexOf(text) >= 0) {\n                        results.push({\n                            name: contact.displayName,\n                            value: contact.extension,\n                            type: 'rc',\n                            id: contact.id,\n                        });\n                        contact.phoneNumber.forEach(phone => {\n                            results.push({\n                                name: contact.displayName,\n                                value: phone,\n                                type: 'rc',\n                                id: contact.id,\n                            });\n                        });\n                    } else {\n                        if (contact.extension && contact.extension.indexOf(text) >= 0) {\n                            results.push({\n                                name: contact.displayName,\n                                value: contact.extension,\n                                type: 'rc',\n                                id: contact.id,\n                            });\n                        }\n\n                        contact.phoneNumber.forEach(phone => {\n                            if (phone.indexOf(text) >= 0) {\n                                results.push({\n                                    name: contact.displayName,\n                                    value: phone,\n                                    type: 'rc',\n                                    id: contact.id,\n                                });\n                            }\n                        });\n                    }\n                });\n            }\n\n            return results;\n        },\n    };\n}();\n\nregister('rcContactSearchProvider', rcContactSearchProvider);\nexport default rcContactSearchProvider;\n","import sdk from './rc-sdk';\nimport { register } from '../service';\nvar accountService = (function(sdk) {\n    var info;\n    var numbers;\n    return {\n        getAccountInfo: function() {\n            return sdk.platform()\n                .get('/account/~/extension/~')\n                .then(response => {\n                    info = response.json();\n                    return info;\n                })\n                .catch(e => console.error('Recent Calls Error: ' + e.message));\n        },\n\n        getPhoneNumber: function() {\n            return sdk.platform()\n                .get('/account/~/extension/~/phone-number')\n                .then(response => {\n                    return response.json();\n                })\n                .then(data => {\n                    numbers = data.records;\n                    return data.records;\n                })\n                .catch(e => console.error('Recent Calls Error: ' + e.message));\n        },\n\n        hasServiceFeature: function(name) {\n            if (!info)\n                return Error('Need to fetch account info by accountService.getAccountInfo');\n            return info.serviceFeatures\n                .filter(feature => feature.featureName.toLowerCase() === name.toLowerCase())\n                .length > 0;\n        },\n\n        listNumber: function(type) {\n            return numbers\n            .filter(number => number.type === type)\n            .map(number => number.phoneNumber);\n        },\n    };\n})(sdk);\n\nregister('accountService', accountService);\nexport default accountService;\n","import sdk from './rc-sdk';\nimport { register } from '../service';\n\nvar rcSubscription = function() {\n\n    var cacheKey = 'ringcentral-subscription';\n    var subscription = sdk.createCachedSubscription(cacheKey).restore();\n    var handlers = {};\n    subscription.on(subscription.events.notification, function(msg) {\n        for (var key in handlers) {\n            if (handlers.hasOwnProperty(key)) {\n                if (msg.event.indexOf(key) > -1) {\n                    handlers[key].forEach(h => {\n                        try {\n                            h(msg);\n                        } catch (e) {\n                            console.error('Error occurs when invoking subscription notification handler for \"' +\n                        msg.event + '\": ' + e);\n                        }\n                    });\n                }\n            }\n        }\n    });\n\n    return {\n        subscribe: function(suffix, event, handler) {\n            if (event && suffix) {\n                if (!handlers.suffix) {\n                    handlers[suffix] = [];\n                }\n                handlers[suffix].push(handler);\n                subscription.addEventFilters(event).register();\n            }\n        }\n    }\n}();\n\nregister('rcSubscription', rcSubscription);\nexport default rcSubscription;\n","import sdk from './rc-sdk';\nimport rcSubscription from './rc-subscription-service'\nimport { register } from '../service';\n\nvar rcMessageService = function(sdk) {\n\n    var MESSAGES_MAX_AGE_HOURS = 7 * 24;\n    var messages = {};\n    var fetchingPromise = null;\n    var syncToken = null;\n    var messageUpdateHandlers = [];\n\n    function fullSyncMessages() {\n        return sdk.platform().get('/account/~/extension/~/message-sync', {\n            dateFrom: new Date(Date.now() - MESSAGES_MAX_AGE_HOURS * 3600 * 1000).toISOString(),\n            syncType: 'FSync'\n        }).then(responses => {\n            var jsonResponse = responses.json();\n            syncToken = jsonResponse.syncInfo.syncToken;\n            var results = jsonResponse.records;\n            addMessageToList(results);\n            fetchingPromise = null;\n        });\n    }\n\n    function incrementalSyncMessages() {\n        if (syncToken) {\n            return sdk.platform().get('/account/~/extension/~/message-sync', {\n                syncType: 'ISync',\n                syncToken: syncToken\n            }).then(responses => {\n                var jsonResponse = responses.json();\n                var results = jsonResponse.records;\n                updateMessageList(results);\n                messageUpdateHandlers.forEach((h) => {\n                    h(results);\n                });\n            });\n        }\n    }\n\n    function concatMessages() {\n        var results = [];\n        for (var key in messages) {\n            if (messages.hasOwnProperty(key)) {\n                results = results.concat(messages[key]);\n            }\n        }\n        return results;\n    }\n\n    function addMessageToList(results) {\n        results.forEach(message => {\n            if (!messages[message.type]) {\n                messages[message.type] = [];\n            }\n            messages[message.type].push(message);\n        });\n    }\n\n    function updateMessageList(results) {\n        results.forEach(message => {\n            var messageList = messages[message.type];\n            if (!messageList) {\n                if(message.availability === 'Alive'){\n                    messages[message.type] = [];\n                    messages[message.type].splice(0, 0, message);    \n                }\n            }else {\n                var index = 0;\n                for (; index < messageList.length; index++) {\n                    if (messageList[index].id === message.id) {\n                        if(message.availability === 'Alive'){\n                            messageList[index] = message;\n                        }else{\n                            messageList.splice(index, 1);\n                        }\n                        break;\n                    }\n                }\n                if (index === messageList.length) {\n                    if(message.availability === 'Alive'){\n                        messageList.splice(0, 0, message);\n                    }\n                }\n            }\n        });\n    }\n\n    return {\n        syncMessages: function() {\n            fetchingPromise = fullSyncMessages();\n            return fetchingPromise;\n        },\n        getMessagesByType: function(type) {\n            if (!fetchingPromise) {\n                if (messages[type]) {\n                    return messages[type];\n                }else {\n                    return [];\n                }\n            }else {\n                return fetchingPromise.then(() => {\n                    return messages[type];\n                });\n            }\n        },\n        getAllMessages: function() {\n            if (!fetchingPromise) {\n                return concatMessages();\n            }else {\n                return fetchingPromise.then(() => {\n                    return concatMessages();\n                });\n            }\n        },\n        subscribeToMessageUpdate: function(){\n            rcSubscription.subscribe('message-store', '/restapi/v1.0/account/~/extension/~/message-store', (msg) => {\n                incrementalSyncMessages();\n            });\n        },\n        onMessageUpdated: function(handler) {\n            if (handler) {\n                messageUpdateHandlers.push(handler);\n            }\n        }\n    };\n}(sdk);\n\nregister('rcMessageService', rcMessageService);\nexport default rcMessageService;\n","import rcMessageService from './rc-message-service';\nimport { register } from '../service';\nvar rcMessageProvider = function() {\n    \n    var messageUpdatedHandlers = [];\n    rcMessageService.onMessageUpdated(() => {\n        messageUpdatedHandlers.forEach(h => {\n            try{\n                h();\n            }catch(e){\n                console.error(e);\n            }\n        });\n    });\n\n    function createResult(message) {\n        var result = {};\n        if (message.direction === 'Outbound') {\n            if (message.type === 'Pager') {\n                result.contact = message.to[0].extensionNumber;\n            }else {\n                result.contact = message.to[0].phoneNumber;\n            }\n        }else {\n            if (message.type === 'Pager') {\n                result.contact = message.from.extensionNumber;\n            }else {\n                result.contact = message.from.phoneNumber;\n            }\n        }\n        //TODO: Use localization string instead of plain text\n        if (message.type === 'SMS' || message.type === 'Pager') {\n            result.subject = message.subject;\n        }else if (message.type === 'VoiceMail') {\n            result.subject = 'Voice Message';\n        }else if (message.type === 'Fax') {\n            result.subject = 'Fax';\n        }\n        result.readStatus = message.readStatus;\n        result.type = message.type;\n        result.id = message.id;\n        result.time = message.lastModifiedTime;\n        return result;\n    }\n\n    return {\n        getTextMessages: function() {\n            return Promise.resolve(rcMessageService.getMessagesByType('SMS')).then(messages => {\n                var results = [];\n                messages.forEach(message => {\n                    results.push(createResult(message));\n                });\n                return results;\n            });\n        },\n        //Return all messages of type 'VoiceMail' and 'Fax'. For SMS and Pager, only last message in a conversation\n        // will be returned.\n        getLastMessagesOfAllType: function() {\n            return Promise.resolve(rcMessageService.getAllMessages()).then(messages => {\n                var results = [];\n                var added = {};\n                messages.forEach(message => {\n                    var result = createResult(message);\n                    //Combine SMS/Pager messages in conversation\n                    if (message.conversationId) {\n                        if (!added[message.conversationId]) {\n                            added[message.conversationId] = [];\n                        }\n                        added[message.conversationId].push(result);\n                    }else {\n                        results.push(result);\n                    }\n                });\n                for (var key in added) {\n                    if (added.hasOwnProperty(key)) {\n                        results.push(added[key][0]);\n                    }\n                }\n                return results;\n            });\n        },\n        onMessageUpdated: function(handler){\n            messageUpdatedHandlers.push(handler);\n        }\n    };\n}();\nregister('rcMessageProvider', rcMessageProvider);\nexport default rcMessageProvider;\n\n","var actions = {};\nfunction register(name, action) {\n    actions[name] = action;\n}\nfunction getActions() {\n    return actions;\n}\nexport {\n    register,\n    getActions\n};\n","import { register } from '../action';\nvar interaction = {\n    show: {\n        before: function() {},\n        method: function(finish) {},\n        after: function(target = this.props.root) {\n            target.classList.remove('display-none');\n        }\n    },\n    hide: {\n        before: function() {},\n        method: function(finish) {},\n        after: function(target = this.props.root) {\n            target.classList.add('display-none');\n        }\n    },\n    diabled: {\n        before: function() {},\n        method: function(finish) {},\n        after: function(target = this.props.root, message) {\n            var mask = document.createElement('div');\n            // FIXME Decouple from rc\n            mask.classList.add('rc-mask');\n            var message = document.createElement('h4');\n            message.classList.add('rc-mask-message');\n            message.textContent = message;\n            target.appendChild(mask);\n            this.props.mask = mask;\n            return mask;\n        }\n    },\n    enable: {\n        before: function() {},\n        method: function(finish) {},\n        after: function() {\n            if (this.props.mask && this.props.mask instanceof HTMLElement) {\n                this.props.mask.parentNode.removeChild(this.props.mask);\n            }\n        }\n    }\n};\nregister('interaction', interaction);\n","function initLogger(level) {\n    return {\n        error: function(...args) {\n            console.error(...args);\n        },\n        warn: function(...args) {\n            if (level > 0)\n                console.warn(...args);\n        },\n        info: function(...args) {\n            if (level > 1)\n                console.info(...args);\n        },\n        log: function(...args) {\n            if (level > 1)\n                console.log(...args);\n        }\n    };\n}\n\nfunction isThenable(result) {\n    if (result.then && typeof result.then === 'function')\n        return true;\n    return false;\n}\n\nfunction isFunction(fn) {\n    return typeof fn === 'function';\n}\n\nfunction ensureTail(string, tail) {\n    if (string.endsWith(tail))\n        return string;\n    return string + tail;\n}\n\nfunction toFunction(fn, defalut) {\n    if (fn && isFunction(fn))\n        return fn;\n    else if (defalut && isFunction(defalut))\n        return defalut;\n    else\n        return function() {};\n}\n\nfunction shallowCopy(target) {\n    if (Array.isArray(target))\n        return target.slice(0);\n    return Object.assign({}, target);\n}\n\nfunction assign(target, name, source) {\n    var tmp = {};\n    tmp[name] = source;\n    Object.assign(tmp);\n    return target;\n}\n\nexport {\n    initLogger,\n    isThenable,\n    isFunction,\n    toFunction,\n    shallowCopy,\n    ensureTail,\n    assign\n};\n","import {initLogger, isThenable, isFunction, toFunction, shallowCopy, assign} from './util/index'\nvar logger\nvar functionSet = {\n    before: function() {},\n    method: function() {},\n    after: function() {},\n    error: function(e) {\n        logger.error(e)\n        throw e\n    }\n}\nfunction register({actions, data} = settings) {\n    if (!actions)\n        console.warn('Widgets do not have actions defined, maybe you get some typo.');\n    ['init', 'render', 'remove', 'error'].forEach(action => {\n        actions[action] = Object.assign(\n            shallowCopy(functionSet),\n            actions[action]\n        )\n    })\n    return widget.bind(null, {actions, data})\n}\n\nfunction widget({actions, data = {}}, options) {\n    if (!options.internal) {\n        return Error('You are trying to construct a widget manually, please use w()')\n    }\n    var defaultActions = shallowCopy(actions)\n    this.props = {}\n    this.custom = {}\n    this.data = Object.assign(data, options.data)\n    logger = initLogger(options.logLevel)\n\n    Object.keys(defaultActions).forEach(index => {\n        defaultActions[index] = bindScope(this, defaultActions[index])\n    })\n    Object.keys(options.actions).forEach(index => {\n        options.actions[index] = bindScope(this, options.actions[index])\n    })\n    Object.keys(defaultActions).forEach(index => {\n        this[index] =\n            generateActions(defaultActions[index], options.actions[index], index)\n    })\n    this.props.dom = generateDocument(this, options.template)\n    this.props.root = getDocumentRoot(options.template)\n    this.props.template = options.template\n    this.render =\n        generateActions({\n            before: defaultActions.render.before,\n            method: render.bind(this, defaultActions.render.method, this.props.template),\n            after: defaultActions.render.after\n        }, options.actions.render, 'render')\n    this.remove =\n        generateActions({\n            before: defaultActions.remove.before,\n            method: remove.bind(this, defaultActions.remove.method),\n            after: defaultActions.remove.after\n        }, options.actions.remove, 'remove')\n    this.init()\n\n    function remove(widgetRemove, finish) {\n        this.props.target.parentNode.removeChild(this.props.target)\n        if (widgetRemove && isFunction(widgetRemove))\n            return widgetRemove.call(this, finish)\n    }\n\n    function render(widgetRender, template, finish, target, callback) {\n        if (typeof target === 'string') {\n            target = document.querySelector(target)\n        } else if (target instanceof HTMLElement) {\n            target = target\n        } else {\n            logger.warn('first argument of render method should be selector string or dom')\n        }\n        // the template can only have one root\n        this.props.target = shallowCopy(Array.from(template.childNodes))[0]\n        target.appendChild(template)\n        callback && isFunction(callback) && callback()\n        if (widgetRender && isFunction(widgetRender))\n            return widgetRender.call(this, finish)\n        return this\n    }\n}\n\nfunction bindScope(scope, action) {\n    return {\n        before: toFunction(action.before).bind(scope),\n        method: toFunction(action.method).bind(scope),\n        after: toFunction(action.after).bind(scope),\n        error: toFunction(action.error, logger.error).bind(scope),\n    }\n}\n\nfunction generateDocument(widget, template) {\n    var dom = {}\n    Array.from(template.querySelectorAll('[data-info]')).forEach(doc => {\n        var info = doc.getAttribute('data-info')\n        dom[info] = doc\n    })\n    Array.from(template.querySelectorAll('[data-event]')).forEach(doc => {\n        var events = doc.getAttribute('data-event')\n        events.split('|').forEach(event => {\n            var eventName\n            var action\n            event.split(':').forEach((token, index) => {\n                if (index === 0)\n                    eventName = token\n                else if (index === 1)\n                    action = token\n            })\n            if (!widget[action]) {\n                logger.warn(`No such method:${action} in ${events}, check data-event and widget methods definition.`)\n                return\n            }\n            doc.addEventListener(eventName, widget[action].bind(widget))\n        })\n    })\n    return dom\n}\n\nfunction getDocumentRoot(template) {\n    // Assume the template only have one root\n    return template.querySelector('*')\n}\n\nfunction generateActions(widgetAction, userAction = shallowCopy(functionSet), name) {\n    return function(...args) {\n        var before = function(...args) {\n            logger.info(`[${name}][before](${[].concat(...args)})`)\n            return wrapUserEvent(widgetAction.before, userAction.before, ...args)\n        }\n        var method = function(arg) {\n            logger.info(`[${name}][before](${isFunction(arg) ? arg() : arg})`)\n            if (isFunction(arg))\n                return widgetAction.method(userAction.method, ...arg()) || arg\n            return widgetAction.method(userAction.method, arg) || arg\n        }\n        var after = function(arg) {\n            logger.info(`[${name}][after](${isFunction(arg) ? arg() : arg})`)\n            if (isFunction(arg))\n                return wrapUserEvent(widgetAction.after, userAction.after, ...arg()) || arg\n            return wrapUserEvent(widgetAction.after, userAction.after, arg) || arg\n        }\n        var error = function(e) {\n            return wrapUserEvent(widgetAction.error, userAction.error, e)\n        }\n        var finish = function(arg) {\n            if (isFunction(arg))\n                // flatten one level\n                return Array.isArray(arg()[0]) ? [].concat.apply([], arg()) : arg()[0]\n            return arg\n        }\n        try {\n            return nextAction(before(...args), [before, method, after, finish], error)\n        } catch (e) {\n            error(e)\n        }\n    }\n}\n\nfunction wrapUserEvent(widget, user, ...args) {\n    var continueDefault = (user != null && user(...args))\n    if (continueDefault || typeof continueDefault === 'undefined')\n        return widget(...args) || (() => args)\n    return [].concat(...args)\n}\n\nfunction nextAction(result, actions, error, start = 0) {\n    if (start + 1 === actions.length)\n        return result\n    if (isThenable(result)) {\n        return actions.reduce((res, action, index) => {\n            if (index > start)\n                return res.then(action)\n            return res\n        }, result).catch(error)\n    } else {\n        return nextAction(actions[start + 1](result), actions, error, start + 1)\n    }\n}\n\nexport { register }\n","function transitionIn(effect, target, options = {}) {\n    options && options.before && options.before();\n    target.classList.add(effect)\n    target.classList.add(`${effect}-in`)\n    target.classList.remove(`${effect}-out`)\n    window.setTimeout(() => target.classList.remove(`${effect}-in`), 17)\n    var after = function() {\n        options && options.after && options.after()\n        target.removeEventListener('transitionend', after)\n    }\n    target.addEventListener('transitionend', after)\n}\nfunction transitionOut(effect, target, options = {}) {\n    options && options.before && options.before();\n    target.classList.add(effect)\n    target.classList.remove(`${effect}-in`)\n    window.setTimeout(() => target.classList.add(`${effect}-out`), 17)\n    var after = function() {\n        options && options.after && options.after()\n        target.removeEventListener('transitionend', after)\n    }\n    target.addEventListener('transitionend', after)\n}\nfunction transitionInit(effect, target, options = {}) {\n    options && options.before && options.before();\n    target.classList.add(`${effect}-in`)\n    // window.setTimeout(() => target.classList.add(effect), 17)\n    var after = function() {\n        options && options.after && options.after()\n        target.removeEventListener('transitionend', after)\n    }\n    target.addEventListener('transitionend', after)\n}\nfunction transitionToggle(effect, target, options = {}) {\n    if (target.classList.contains(`${effect}-out`) || target.classList.contains(`${effect}-in`))\n        transitionIn(effect, target, options);\n    else\n        transitionOut(effect, target, options);\n}\nexport {\n    transitionIn,\n    transitionOut,\n    transitionToggle,\n    transitionInit\n}\n","//     (c) 2012 Airbnb, Inc.\n//\n//     polyglot.js may be freely distributed under the terms of the BSD\n//     license. For all licensing information, details, and documention:\n//     http://airbnb.github.com/polyglot.js\n//\n//\n// Polyglot.js is an I18n helper library written in JavaScript, made to\n// work both in the browser and in Node. It provides a simple solution for\n// interpolation and pluralization, based off of Airbnb's\n// experience adding I18n functionality to its Backbone.js and Node apps.\n//\n// Polylglot is agnostic to your translation backend. It doesn't perform any\n// translation; it simply gives you a way to manage translated phrases from\n// your client- or server-side JavaScript application.\n//\n\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return factory(root);\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = factory(root);\n  } else {\n    root.Polyglot = factory(root);\n  }\n}(this, function(root) {\n  'use strict';\n\n  var replace = String.prototype.replace;\n\n  // ### Polyglot class constructor\n  function Polyglot(options) {\n    options = options || {};\n    this.phrases = {};\n    this.extend(options.phrases || {});\n    this.currentLocale = options.locale || 'en';\n    this.allowMissing = !!options.allowMissing;\n    this.warn = options.warn || warn;\n  }\n\n  // ### Version\n  Polyglot.VERSION = '1.0.0';\n\n  // ### polyglot.locale([locale])\n  //\n  // Get or set locale. Internally, Polyglot only uses locale for pluralization.\n  Polyglot.prototype.locale = function(newLocale) {\n    if (newLocale) this.currentLocale = newLocale;\n    return this.currentLocale;\n  };\n\n  // ### polyglot.extend(phrases)\n  //\n  // Use `extend` to tell Polyglot how to translate a given key.\n  //\n  //     polyglot.extend({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     });\n  //\n  // The key can be any string.  Feel free to call `extend` multiple times;\n  // it will override any phrases with the same key, but leave existing phrases\n  // untouched.\n  //\n  // It is also possible to pass nested phrase objects, which get flattened\n  // into an object with the nested keys concatenated using dot notation.\n  //\n  //     polyglot.extend({\n  //       \"nav\": {\n  //         \"hello\": \"Hello\",\n  //         \"hello_name\": \"Hello, %{name}\",\n  //         \"sidebar\": {\n  //           \"welcome\": \"Welcome\"\n  //         }\n  //       }\n  //     });\n  //\n  //     console.log(polyglot.phrases);\n  //     // {\n  //     //   'nav.hello': 'Hello',\n  //     //   'nav.hello_name': 'Hello, %{name}',\n  //     //   'nav.sidebar.welcome': 'Welcome'\n  //     // }\n  //\n  // `extend` accepts an optional second argument, `prefix`, which can be used\n  // to prefix every key in the phrases object with some string, using dot\n  // notation.\n  //\n  //     polyglot.extend({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     }, \"nav\");\n  //\n  //     console.log(polyglot.phrases);\n  //     // {\n  //     //   'nav.hello': 'Hello',\n  //     //   'nav.hello_name': 'Hello, %{name}'\n  //     // }\n  //\n  // This feature is used internally to support nested phrase objects.\n  Polyglot.prototype.extend = function(morePhrases, prefix) {\n    var phrase;\n\n    for (var key in morePhrases) {\n      if (morePhrases.hasOwnProperty(key)) {\n        phrase = morePhrases[key];\n        if (prefix) key = prefix + '.' + key;\n        if (typeof phrase === 'object') {\n          this.extend(phrase, key);\n        } else {\n          this.phrases[key] = phrase;\n        }\n      }\n    }\n  };\n\n  // ### polyglot.unset(phrases)\n  // Use `unset` to selectively remove keys from a polyglot instance.\n  //\n  //     polyglot.unset(\"some_key\");\n  //     polyglot.unset({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     });\n  //\n  // The unset method can take either a string (for the key), or an object hash with\n  // the keys that you would like to unset.\n  Polyglot.prototype.unset = function(morePhrases, prefix) {\n    var phrase;\n\n    if (typeof morePhrases === 'string') {\n      delete this.phrases[morePhrases];\n    } else {\n      for (var key in morePhrases) {\n        if (morePhrases.hasOwnProperty(key)) {\n          phrase = morePhrases[key];\n          if (prefix) key = prefix + '.' + key;\n          if (typeof phrase === 'object') {\n            this.unset(phrase, key);\n          } else {\n            delete this.phrases[key];\n          }\n        }\n      }\n    }\n  };\n\n  // ### polyglot.clear()\n  //\n  // Clears all phrases. Useful for special cases, such as freeing\n  // up memory if you have lots of phrases but no longer need to\n  // perform any translation. Also used internally by `replace`.\n  Polyglot.prototype.clear = function() {\n    this.phrases = {};\n  };\n\n  // ### polyglot.replace(phrases)\n  //\n  // Completely replace the existing phrases with a new set of phrases.\n  // Normally, just use `extend` to add more phrases, but under certain\n  // circumstances, you may want to make sure no old phrases are lying around.\n  Polyglot.prototype.replace = function(newPhrases) {\n    this.clear();\n    this.extend(newPhrases);\n  };\n\n\n  // ### polyglot.t(key, options)\n  //\n  // The most-used method. Provide a key, and `t` will return the\n  // phrase.\n  //\n  //     polyglot.t(\"hello\");\n  //     => \"Hello\"\n  //\n  // The phrase value is provided first by a call to `polyglot.extend()` or\n  // `polyglot.replace()`.\n  //\n  // Pass in an object as the second argument to perform interpolation.\n  //\n  //     polyglot.t(\"hello_name\", {name: \"Spike\"});\n  //     => \"Hello, Spike\"\n  //\n  // If you like, you can provide a default value in case the phrase is missing.\n  // Use the special option key \"_\" to specify a default.\n  //\n  //     polyglot.t(\"i_like_to_write_in_language\", {\n  //       _: \"I like to write in %{language}.\",\n  //       language: \"JavaScript\"\n  //     });\n  //     => \"I like to write in JavaScript.\"\n  //\n  Polyglot.prototype.t = function(key, options) {\n    var phrase, result;\n    options = options == null ? {} : options;\n    // allow number as a pluralization shortcut\n    if (typeof options === 'number') {\n      options = {smart_count: options};\n    }\n    if (typeof this.phrases[key] === 'string') {\n      phrase = this.phrases[key];\n    } else if (typeof options._ === 'string') {\n      phrase = options._;\n    } else if (this.allowMissing) {\n      phrase = key;\n    } else {\n      this.warn('Missing translation for key: \"'+key+'\"');\n      result = key;\n    }\n    if (typeof phrase === 'string') {\n      options = clone(options);\n      result = choosePluralForm(phrase, this.currentLocale, options.smart_count);\n      result = interpolate(result, options);\n    }\n    return result;\n  };\n\n\n  // ### polyglot.has(key)\n  //\n  // Check if polyglot has a translation for given key\n  Polyglot.prototype.has = function(key) {\n    return key in this.phrases;\n  };\n\n\n  // #### Pluralization methods\n  // The string that separates the different phrase possibilities.\n  var delimeter = '||||';\n\n  // Mapping from pluralization group plural logic.\n  var pluralTypes = {\n    chinese:   function(n) { return 0; },\n    german:    function(n) { return n !== 1 ? 1 : 0; },\n    french:    function(n) { return n > 1 ? 1 : 0; },\n    russian:   function(n) { return n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2; },\n    czech:     function(n) { return (n === 1) ? 0 : (n >= 2 && n <= 4) ? 1 : 2; },\n    polish:    function(n) { return (n === 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2); },\n    icelandic: function(n) { return (n % 10 !== 1 || n % 100 === 11) ? 1 : 0; }\n  };\n\n  // Mapping from pluralization group to individual locales.\n  var pluralTypeToLanguages = {\n    chinese:   ['fa', 'id', 'ja', 'ko', 'lo', 'ms', 'th', 'tr', 'zh'],\n    german:    ['da', 'de', 'en', 'es', 'fi', 'el', 'he', 'hu', 'it', 'nl', 'no', 'pt', 'sv'],\n    french:    ['fr', 'tl', 'pt-br'],\n    russian:   ['hr', 'ru'],\n    czech:     ['cs'],\n    polish:    ['pl'],\n    icelandic: ['is']\n  };\n\n  function langToTypeMap(mapping) {\n    var type, langs, l, ret = {};\n    for (type in mapping) {\n      if (mapping.hasOwnProperty(type)) {\n        langs = mapping[type];\n        for (l in langs) {\n          ret[langs[l]] = type;\n        }\n      }\n    }\n    return ret;\n  }\n\n  // Trim a string.\n  var trimRe = /^\\s+|\\s+$/g;\n  function trim(str){\n    return replace.call(str, trimRe, '');\n  }\n\n  // Based on a phrase text that contains `n` plural forms separated\n  // by `delimeter`, a `locale`, and a `count`, choose the correct\n  // plural form, or none if `count` is `null`.\n  function choosePluralForm(text, locale, count){\n    var ret, texts, chosenText;\n    if (count != null && text) {\n      texts = text.split(delimeter);\n      chosenText = texts[pluralTypeIndex(locale, count)] || texts[0];\n      ret = trim(chosenText);\n    } else {\n      ret = text;\n    }\n    return ret;\n  }\n\n  function pluralTypeName(locale) {\n    var langToPluralType = langToTypeMap(pluralTypeToLanguages);\n    return langToPluralType[locale] || langToPluralType.en;\n  }\n\n  function pluralTypeIndex(locale, count) {\n    return pluralTypes[pluralTypeName(locale)](count);\n  }\n\n  // ### interpolate\n  //\n  // Does the dirty work. Creates a `RegExp` object for each\n  // interpolation placeholder.\n  var dollarRegex = /\\$/g;\n  var dollarBillsYall = '$$$$';\n  function interpolate(phrase, options) {\n    for (var arg in options) {\n      if (arg !== '_' && options.hasOwnProperty(arg)) {\n        // Ensure replacement value is escaped to prevent special $-prefixed\n        // regex replace tokens. the \"$$$$\" is needed because each \"$\" needs to\n        // be escaped with \"$\" itself, and we need two in the resulting output.\n        var replacement = options[arg];\n        if (typeof replacement === 'string') {\n          replacement = replace.call(options[arg], dollarRegex, dollarBillsYall);\n        }\n        // We create a new `RegExp` each time instead of using a more-efficient\n        // string replace so that the same argument can be replaced multiple times\n        // in the same phrase.\n        phrase = replace.call(phrase, new RegExp('%\\\\{'+arg+'\\\\}', 'g'), replacement);\n      }\n    }\n    return phrase;\n  }\n\n  // ### warn\n  //\n  // Provides a warning in the console if a phrase key is missing.\n  function warn(message) {\n    root.console && root.console.warn && root.console.warn('WARNING: ' + message);\n  }\n\n  // ### clone\n  //\n  // Clone an object.\n  function clone(source) {\n    var ret = {};\n    for (var prop in source) {\n      ret[prop] = source[prop];\n    }\n    return ret;\n  }\n\n  return Polyglot;\n}));\n","// Added for convenience in the Node environment.\n// The meat and potatoes exist in ./lib/polyglot.js.\nmodule.exports = require('./lib/polyglot');\n","import Polyglot from 'node-polyglot'\n\nvar polyglots = {}\nvar polyglot = new Polyglot()\nfunction loadLocale(name, file) {\n    fetch(file)\n    .then(response => response.json())\n    .then(data => polyglots[name] = new Polyglot({phrases: data}))\n}\nfunction translate(locale) {\n    return string => polyglots[locale]? polyglots[locale].t(string): ''\n}\nexport {\n    loadLocale,\n    translate\n}\n","import { register as registerComponent } from './component'\nimport { getServices } from './service'\nimport { getActions } from './action'\nimport { transitionIn, transitionOut, transitionInit, transitionToggle } from './transition'\nimport { ensureTail } from './util/index'\nimport { loadLocale, translate } from './translation'\nfunction fetchWidget(file) {\n    return fetch(w.options.path + ensureTail(file, '.html'))\n        .then(response => response.text())\n        .then(body => {\n            var template = document.createElement('template')\n            template.innerHTML = body\n            var clone = document.importNode(template.content, true)\n            return clone\n        })\n}\n\nfunction parseDocument(template) {\n    return Promise.all(Array.from(template.querySelectorAll('*'))\n        .filter(doc => doc.tagName.indexOf('-') > -1 || doc instanceof HTMLUnknownElement)\n        .reduce((result, doc) => {\n            return result.concat(preload({\n                [doc.tagName.toLowerCase()]: doc.tagName.toLowerCase()\n            }))\n        }, []))\n}\n\nfunction initNestedWidget(widget) {\n    var template = widget.props.template\n    var docs = template.querySelectorAll('*')\n    Array.from(docs).forEach(doc => {\n        if (doc.tagName.indexOf('-') > -1 || doc instanceof HTMLUnknownElement) {\n            if (typeof doc.getAttribute('dynamic') !== 'undefine' && doc.getAttribute('dynamic') !== null) {\n                return\n            }\n            var name = doc.tagName.toLowerCase()\n            var child = w(name, widget.custom[name])\n            child.render(doc)\n            var childName = doc.getAttribute('data-info');\n            if (childName)\n                widget.props[childName] = child\n        }\n    })\n    return widget\n}\n\nfunction preload(widgets, callback) {\n    return Promise.all(\n        Object.keys(widgets).reduce(\n            (result, name) => {\n                if (!w.templates[name])\n                    w.templates[name] = {}\n                if (!w.templates[name].fetch)\n                    w.templates[name].fetch = fetchWidget(widgets[name])\n                return result.concat(\n                    w.templates[name].fetch\n                    .then(template => {\n                        if (!w.templates[name].template) {\n                            w.templates[name].template = template\n                            var script = template.querySelector('script')\n                            var style = template.querySelector('style')\n                            if (script) {\n                                document.body.appendChild(script)\n                                document.body.removeChild(script)\n                            }\n                            if (style)\n                                document.head.appendChild(style)\n                        }\n                        return template\n                    })\n                    .then(parseDocument)\n                    .catch(err => console.error('Widgets preload error:' + err)))\n            }, [])\n    ).then(callback)\n}\n\n// Public API\nfunction w(name, options = {}) {\n    if (!w.templates[name] || !w.templates[name].widget)\n        throw Error('you need to preload widget:' + name + ' before init it')\n    return initNestedWidget(new w.templates[name].widget({\n        template: w.templates[name].template.cloneNode(true),\n        actions: options.actions || {},\n        data: options.data || {},\n        logLevel: w.options.logLevel,\n        internal: true // for check it's called by internal\n    }))\n}\nw.templates = {}\nw.options = {}\nw.register = function(settings) {\n    var settings = new settings()\n    Object.keys(w.templates).forEach(index => {\n        var template = w.templates[index]\n        if (template.template && !template.widget)\n            template.widget = registerComponent(settings)\n    })\n}\nw.config = function(options, callback) {\n    w.options.preload = options.preload || {}\n    w.options.path = options.path || ''\n    w.options.logLevel = options.logLevel || 0\n    w.options.locale = options.locale\n    Promise.all([\n        preload(w.options.preload),\n        Object.keys(w.options.locale).forEach(index => {\n            var locale = w.options.locale[index]\n            loadLocale(index, locale)\n        })\n    ]).then(callback)\n}\nw.customize = function(context, target, options) {\n    // inherit parent's data\n    options.data = Object.assign(context.data , options.data)\n    context.custom[target] = options\n}\nw.service = getServices\nw.action = function(name) {\n    return Object.assign({}, getActions()[name])\n}\nw.transition = function(effect) {\n    return {\n        init: (target, options) => transitionInit(effect, target, options),\n        in: (target, options) => transitionIn(effect, target, options),\n        out: (target, options) => transitionOut(effect, target, options),\n        toggle: (target, options) => transitionToggle(effect, target, options)\n    }\n}\nw.locale = loadLocale\nw.translate = translate\nw.t = translate\nexport default w\n"],"sourceRoot":"/source/"}