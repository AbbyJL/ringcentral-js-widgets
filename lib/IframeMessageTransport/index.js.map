{"version":3,"sources":["lib/IframeMessageTransport/index.js"],"names":["IframeMessageTransport","targetIframe","targetWindow","_onMessage","msg","data","_distributeMessage","_targetIframe","_targetWindow","window","addEventListener","removeEventListener","target","contentWindow","postMessage"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;IAEqBA,sB;;;AACnB,wCAGG;AAAA,QAFDC,YAEC,QAFDA,YAEC;AAAA,QADDC,YACC,QADDA,YACC;AAAA;;AAAA;;AAAA,UAMHC,UANG,GAMU,UAACC,GAAD,EAAS;AACpB,UAAIA,OAAOA,IAAIC,IAAf,EAAqB;AACnB,cAAKC,kBAAL,CAAwBF,IAAIC,IAA5B;AACD;AACF,KAVE;;AAED,UAAKE,aAAL,GAAqBN,YAArB;AACA,UAAKO,aAAL,GAAqBN,YAArB;AACAO,WAAOC,gBAAP,CAAwB,SAAxB,EAAmC,MAAKP,UAAxC;AAJC;AAKF;;;;8BAOS;AACRM,aAAOE,mBAAP,CAA2B,SAA3B,EAAsC,KAAKR,UAA3C;AACD;;;gCACWC,G,EAAK;AACf,UAAMQ,SAAS,KAAKJ,aAAL,IAAsB,KAAKD,aAAL,IAAsB,KAAKA,aAAL,CAAmBM,aAA9E;AACA,UAAID,MAAJ,EAAY;AACVA,eAAOE,WAAP,CAAmBV,GAAnB,EAAwB,GAAxB;AACD;AACF;;;;;kBAxBkBJ,sB","file":"index.js","sourcesContent":["import MessageTransportCore from '../MessageTransportCore';\r\n\r\nexport default class IframeMessageTransport extends MessageTransportCore {\r\n  constructor({\r\n    targetIframe,\r\n    targetWindow,\r\n  }) {\r\n    super();\r\n    this._targetIframe = targetIframe;\r\n    this._targetWindow = targetWindow;\r\n    window.addEventListener('message', this._onMessage);\r\n  }\r\n  _onMessage = (msg) => {\r\n    if (msg && msg.data) {\r\n      this._distributeMessage(msg.data);\r\n    }\r\n  }\r\n\r\n  dispose() {\r\n    window.removeEventListener('message', this._onMessage);\r\n  }\r\n  postMessage(msg) {\r\n    const target = this._targetWindow || this._targetIframe && this._targetIframe.contentWindow;\r\n    if (target) {\r\n      target.postMessage(msg, '*');\r\n    }\r\n  }\r\n}\r\n"]}