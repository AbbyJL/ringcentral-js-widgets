{"version":3,"sources":["lib/parseCallbackUri.js"],"names":["parseCallbackUri","callbackUri","parse","query","hash","hashObject","replace","error","Error","key","Object","prototype","hasOwnProperty"],"mappings":";;;;;;;;;;kBAQwBA,gB;;AARxB;;;;AACA;;;;;;AAEA;;;;;AAKe,SAASA,gBAAT,CAA0BC,WAA1B,EAAuC;AAAA,mBAC5B,cAAIC,KAAJ,CAAUD,WAAV,EAAuB,IAAvB,CAD4B;AAAA,MAC5CE,KAD4C,cAC5CA,KAD4C;AAAA,MACrCC,IADqC,cACrCA,IADqC;;AAEpD,MAAMC,aAAaD,OAAO,aAAGF,KAAH,CAASE,KAAKE,OAAL,CAAa,IAAb,EAAmB,EAAnB,CAAT,CAAP,GAA0C,EAA7D;AACA,MAAIH,MAAMI,KAAN,IAAeF,WAAWE,KAA9B,EAAqC;AACnC,QAAMA,QAAQ,IAAIC,KAAJ,CAAUL,MAAMI,KAAN,IAAeF,WAAWE,KAApC,CAAd;AACA,SAAK,IAAME,GAAX,IAAkBN,KAAlB,EAAyB;AACvB,UAAWO,OAAOC,SAAP,CAAiBC,cAAxB,aAAuCH,GAAvC,CAAJ,EAAiD;AAC/CF,cAAME,GAAN,IAAaN,MAAMM,GAAN,CAAb;AACD;AACD,UAAgBC,OAAOC,SAAP,CAAiBC,cAA7B,kBAA4CH,GAA5C,CAAJ,EAAsD;AACpDF,cAAME,GAAN,IAAaN,MAAMM,GAAN,CAAb;AACD;AACF;AACD,UAAMF,KAAN;AACD;;AAED,oCACKJ,KADL,EAEKE,UAFL;AAID","file":"parseCallbackUri.js","sourcesContent":["import url from 'url';\nimport qs from 'qs';\n\n/**\n * @function\n * @param {String} callbackUri\n * @return {Object}\n */\nexport default function parseCallbackUri(callbackUri) {\n  const { query, hash } = url.parse(callbackUri, true);\n  const hashObject = hash ? qs.parse(hash.replace(/^#/, '')) : {};\n  if (query.error || hashObject.error) {\n    const error = new Error(query.error || hashObject.error);\n    for (const key in query) {\n      if (query::Object.prototype.hasOwnProperty(key)) {\n        error[key] = query[key];\n      }\n      if (hashObject::Object.prototype.hasOwnProperty(key)) {\n        error[key] = query[key];\n      }\n    }\n    throw error;\n  }\n\n  return {\n    ...query,\n    ...hashObject,\n  };\n}\n"]}