{"version":3,"sources":["components/ContactItem/index.js"],"names":["AvatarNode","name","avatarUrl","avatarNode","propTypes","string","defaultProps","undefined","ContactItem","props","state","loading","presence","onItemSelected","bind","_mounted","setTimeout","setState","getAvatarUrl","contact","then","getPresence","func","onSelect","root","phoneNumber","entityType","showPhoneNumber","sourceNodeRenderer","sourceNode","sourceType","contactProfile","avatarNodeContainer","sourceNodeContainer","presenceNodeContainer","presenceNode","contactName","shape","id","type","hasProfileImage","bool","email","isRequired"],"mappings":"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","file":"index.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport PresenceStatusIcon from '../PresenceStatusIcon';\nimport DefaultAvatar from '../../assets/images/DefaultAvatar.svg';\n\nimport styles from './styles.scss';\n\nfunction AvatarNode({ name, avatarUrl }) {\n  return avatarUrl ?\n    (\n      <img\n        className={styles.avatarNode}\n        alt={name}\n        src={avatarUrl}\n      />\n    ) :\n    (\n      <DefaultAvatar\n        className={styles.avatarNode}\n      />\n    );\n}\nAvatarNode.propTypes = {\n  name: PropTypes.string,\n  avatarUrl: PropTypes.string,\n};\nAvatarNode.defaultProps = {\n  name: undefined,\n  avatarUrl: undefined,\n};\n\nexport default class ContactItem extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      avatarUrl: undefined,\n      presence: undefined,\n    };\n\n    this.onItemSelected = this.onItemSelected.bind(this);\n  }\n\n  componentDidMount() {\n    this._mounted = true;\n    setTimeout(() => {\n      // clear timeout is probably not necessary\n      if (this._mounted) {\n        this.setState({\n          loading: false,\n        });\n      }\n    }, 10);\n\n    this.props.getAvatarUrl(this.props.contact).then((avatarUrl) => {\n      if (this._mounted) {\n        this.setState({\n          avatarUrl,\n        });\n      }\n    });\n\n    this.props.getPresence(this.props.contact).then((presence) => {\n      if (this._mounted) {\n        this.setState({\n          presence,\n        });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n  }\n\n  onItemSelected() {\n    const func = this.props.onSelect;\n    if (func) {\n      func(this.props.contact);\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <div className={styles.root} />\n      );\n    }\n\n    const {\n      name,\n      phoneNumber,\n      entityType,\n      showPhoneNumber,\n    } = this.props.contact;\n\n    const { sourceNodeRenderer } = this.props;\n    const sourceNode = sourceNodeRenderer({ sourceType: entityType });\n    return (\n      <div\n        className={styles.root}\n        onClick={this.onItemSelected}\n      >\n        <div className={styles.contactProfile}>\n          <div className={styles.avatarNodeContainer}>\n            <AvatarNode\n              name={name}\n              avatarUrl={this.state.avatarUrl}\n            />\n          </div>\n          {\n            sourceNode\n              ? (\n                <div className={styles.sourceNodeContainer}>\n                  {sourceNode}\n                </div>\n              )\n              : null\n          }\n          {\n            this.state.presence ? (\n              <div className={styles.presenceNodeContainer}>\n                <PresenceStatusIcon\n                  className={styles.presenceNode}\n                  {...this.state.presence}\n                />\n              </div>\n            ) : null\n          }\n        </div>\n        <div className={styles.contactName} title={name}>\n          {name}\n        </div>\n        <div className={styles.phoneNumber} title={phoneNumber}>\n          {showPhoneNumber ? phoneNumber : null}\n        </div>\n      </div>\n    );\n  }\n}\n\nContactItem.propTypes = {\n  contact: PropTypes.shape({\n    id: PropTypes.string,\n    type: PropTypes.string,\n    hasProfileImage: PropTypes.bool,\n    showPhoneNumber: PropTypes.bool,\n    entityType: PropTypes.string,\n    name: PropTypes.string,\n    phoneNumber: PropTypes.string,\n    email: PropTypes.string,\n  }).isRequired,\n  getAvatarUrl: PropTypes.func.isRequired,\n  getPresence: PropTypes.func.isRequired,\n  onSelect: PropTypes.func,\n  sourceNodeRenderer: PropTypes.func,\n};\n\nContactItem.defaultProps = {\n  onSelect: undefined,\n  sourceNodeRenderer: () => null,\n};\n"]}