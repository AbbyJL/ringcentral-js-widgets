{"version":3,"sources":["components/ContactDetails/index.js"],"names":["getPresenceStatusName","currentUserStatus","currentDndStatus","currentLocale","busy","getString","AvatarNode","name","avatarUrl","avatarNode","propTypes","string","defaultProps","undefined","ContactDetails","onClickToDial","phoneNumber","props","onClickToSMS","contact","onClickMailTo","email","contactType","contactItem","sourceNodeRenderer","presence","profileImageUrl","type","sourceNode","sourceType","presenceName","userStatus","dndStatus","contactProfile","avatar","avatarNodeContainer","sourceNodeContainer","info","nameWithoutPresence","presenceNodeContainer","presenceNode","presenceStatus","extensionNumber","item","label","number","menu","call","composeText","phoneNumbers","phoneNumberListView","map","index","phoneType","formattedPhoneNumber","formatNumber","faxIcon","filter","v","length","emails","emailListView","extensionCellView","renderExtensionCell","directNumberCellView","renderDirectNumberCell","root","profile","renderProfile","contacts","renderEmailCell","contactItemPropTypes","id","oneOfType","isRequired","firstName","lastName","hasProfileImage","bool","arrayOf","shape","func"],"mappings":"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","file":"index.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport presenceStatus from 'ringcentral-integration/modules/Presence/presenceStatus';\nimport PresenceStatusIcon from '../PresenceStatusIcon';\nimport dynamicsFont from '../../assets/DynamicsFont/DynamicsFont.scss';\nimport DefaultAvatar from '../../assets/images/DefaultAvatar.svg';\nimport FaxIcon from '../../assets/images/Fax.svg';\nimport i18n from './i18n';\n\nimport styles from './styles.scss';\n\nexport function getPresenceStatusName(currentUserStatus, currentDndStatus, currentLocale) {\n  if (currentUserStatus !== presenceStatus.busy) {\n    return i18n.getString(currentUserStatus, currentLocale);\n  }\n  return i18n.getString(currentUserStatus + currentDndStatus, currentLocale);\n}\n\nfunction AvatarNode({ name, avatarUrl }) {\n  return avatarUrl ?\n    (\n      <img\n        className={styles.avatarNode}\n        alt={name}\n        src={avatarUrl}\n      />\n    ) :\n    (\n      <DefaultAvatar\n        className={styles.avatarNode}\n      />\n    );\n}\nAvatarNode.propTypes = {\n  name: PropTypes.string,\n  avatarUrl: PropTypes.string,\n};\nAvatarNode.defaultProps = {\n  name: undefined,\n  avatarUrl: undefined,\n};\n\nexport default class ContactDetails extends PureComponent {\n  onClickToDial = (phoneNumber) => {\n    this.props.onClickToDial(phoneNumber);\n  }\n\n  onClickToSMS = (contact, phoneNumber) => {\n    this.props.onClickToSMS({\n      ...contact,\n      phoneNumber\n    });\n  }\n\n  onClickMailTo = (email, contactType) => {\n    this.props.onClickMailTo(email, contactType);\n  }\n\n  renderProfile() {\n    const { contactItem, sourceNodeRenderer, currentLocale } = this.props;\n    const { name, presence, profileImageUrl, type } = contactItem;\n    const sourceNode = sourceNodeRenderer({ sourceType: type });\n    const presenceName = presence\n      ? getPresenceStatusName(presence.userStatus, presence.dndStatus, currentLocale)\n      : null;\n    return (\n      <div className={styles.contactProfile}>\n        <div className={styles.avatar}>\n          <div className={styles.avatarNodeContainer}>\n            <AvatarNode\n              name={name}\n              avatarUrl={profileImageUrl}\n            />\n            {\n              sourceNode\n                ? (\n                  <div className={styles.sourceNodeContainer}>\n                    {sourceNode}\n                  </div>\n                ) : null\n            }\n          </div>\n        </div>\n        <div className={styles.info}>\n          <div className={classnames(styles.name, !presence ? styles.nameWithoutPresence : null)}>\n            <span title={name}>{name}</span>\n          </div>\n          {\n            presence\n              ? (\n                <div className={styles.presence}>\n                  <div className={styles.presenceNodeContainer}>\n                    <PresenceStatusIcon\n                      className={styles.presenceNode}\n                      {...presence}\n                    />\n                  </div>\n                  <span className={styles.presenceStatus}>\n                    {presenceName}\n                  </span>\n                </div>\n              ) : null\n          }\n        </div>\n      </div>\n    );\n  }\n\n  renderExtensionCell() {\n    const { contactItem, currentLocale } = this.props;\n    const { extensionNumber } = contactItem;\n    if (!extensionNumber) return null;\n    return (\n      <div className={styles.item}>\n        <div className={styles.label}>\n          <span>{ i18n.getString('extensionLabel', currentLocale) }</span>\n        </div>\n        <ul>\n          <li>\n            <div className={styles.number}>\n              <span title={extensionNumber}>{extensionNumber}</span>\n            </div>\n            <div className={styles.menu}>\n              <button title={i18n.getString('call', currentLocale)} onClick={() => this.onClickToDial(extensionNumber)}>\n                <i className={dynamicsFont.call} />\n              </button>\n              <button title={i18n.getString('text', currentLocale)} onClick={() => this.onClickToSMS(contactItem, extensionNumber)}>\n                <i className={dynamicsFont.composeText} />\n              </button>\n            </div>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n\n  renderDirectNumberCell() {\n    const { contactItem, currentLocale } = this.props;\n    const { phoneNumbers } = contactItem;\n    const phoneNumberListView = phoneNumbers.map(({ phoneType, phoneNumber }, index) => {\n      if (phoneType === 'extension') return null;\n      const formattedPhoneNumber = this.props.formatNumber(phoneNumber);\n      return (\n        <li key={index}>\n          <div className={styles.number}>\n            <span title={formattedPhoneNumber}>{formattedPhoneNumber}</span>\n          </div>\n          <div className={styles.menu}>\n            <button title={i18n.getString('call', currentLocale)} onClick={() => this.onClickToDial(phoneNumber)}>\n              <i className={dynamicsFont.call} />\n            </button>\n            <button title={i18n.getString('text', currentLocale)} onClick={() => this.onClickToSMS(contactItem, phoneNumber)}>\n              <i className={dynamicsFont.composeText} />\n            </button>\n            <button>\n              <FaxIcon className={styles.faxIcon} />\n            </button>\n          </div>\n        </li>\n      );\n    }).filter(v => !!v);\n    if (phoneNumberListView.length <= 0) return null;\n    return (\n      <div className={styles.item}>\n        <div className={styles.label}>\n          <span>{i18n.getString('directLabel', currentLocale)}</span>\n        </div>\n        <ul>\n          {phoneNumberListView}\n        </ul>\n      </div>\n    );\n  }\n\n  renderEmailCell() {\n    const { emails, type } = this.props.contactItem;\n    if (!emails || emails.length <= 0) return null;\n    const emailListView = emails.map((email, index) => (\n      <li key={index}><a onClick={() => this.onClickMailTo(email, type)}>{email}</a></li>\n    ));\n    return (\n      <div>\n        <div className={styles.label}>\n          <span>{i18n.getString('emailLabel', this.props.currentLocale)}</span>\n        </div>\n        <ul>{emailListView}</ul>\n      </div>\n    );\n  }\n\n  render() {\n    const extensionCellView = this.renderExtensionCell();\n    const directNumberCellView = this.renderDirectNumberCell();\n    return (\n      <div className={styles.root}>\n        <div className={styles.profile}>\n          {this.renderProfile()}\n        </div>\n        {\n          extensionCellView || directNumberCellView\n            ? (\n              <div className={styles.contacts}>\n                {extensionCellView}\n                {directNumberCellView}\n              </div>\n            ) : null\n        }\n        <div className={styles.email}>\n          {this.renderEmailCell()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const contactItemPropTypes = {\n  id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  type: PropTypes.string.isRequired,\n  firstName: PropTypes.string,\n  lastName: PropTypes.string,\n  email: PropTypes.string,\n  hasProfileImage: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  phoneNumbers: PropTypes.arrayOf(PropTypes.shape({\n    phoneNumber: PropTypes.string,\n    phoneType: PropTypes.string,\n  })),\n};\n\nContactDetails.propTypes = {\n  currentLocale: PropTypes.string.isRequired,\n  contactItem: PropTypes.shape(contactItemPropTypes).isRequired,\n  sourceNodeRenderer: PropTypes.func,\n  onClickToSMS: PropTypes.func,\n  onClickToDial: PropTypes.func,\n  onClickMailTo: PropTypes.func,\n  formatNumber: PropTypes.func.isRequired,\n};\n\nContactDetails.defaultProps = {\n  onClickToSMS: undefined,\n  onClickToDial: undefined,\n  onClickMailTo: undefined,\n  onClickMailTo: undefined,\n  sourceNodeRenderer: () => null,\n};\n"]}