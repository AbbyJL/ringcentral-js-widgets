{"version":3,"sources":["components/MessageList/index.js"],"names":["NoMessages","props","noMessages","placeholder","propTypes","string","isRequired","MessageList","onScroll","totalScrollHeight","messagesListBody","scrollHeight","clientHeight","currentScrollTop","scrollTop","_scrollTop","setState","page","state","className","currentLocale","conversations","perPage","disableLinks","childProps","lastIndex","content","length","slice","map","item","id","root","list","brand","arrayOf","shape","number","conversationId","subject","bool","showConversationDetail","func","readVoicemail","markVoicemail","dateTimeFormatter","showContactDisplayPlaceholder","sourceIcons","object","showGroupNumberName","defaultProps","undefined"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport MessageItem from '../MessageItem';\nimport styles from './styles.scss';\n\nfunction NoMessages(props) {\n  return (\n    <p className={styles.noMessages}>{props.placeholder}</p>\n  );\n}\n\nNoMessages.propTypes = {\n  placeholder: PropTypes.string.isRequired,\n};\n\nexport default class MessageList extends Component {\n  constructor(props) {\n    super(props);\n    this._scrollTop = 0;\n    this.state = {\n      page: 0,\n    };\n  }\n  onScroll = () => {\n    const totalScrollHeight = this.messagesListBody.scrollHeight;\n    const clientHeight = this.messagesListBody.clientHeight;\n    const currentScrollTop = this.messagesListBody.scrollTop;\n    // load next page if scroll near buttom\n    if (\n      (totalScrollHeight - this._scrollTop) > (clientHeight + 10) &&\n      (totalScrollHeight - currentScrollTop) <= (clientHeight + 10)\n    ) {\n      this.setState({\n        page: this.state.page + 1,\n      });\n    }\n    this._scrollTop = currentScrollTop;\n  }\n\n  render() {\n    const {\n      className,\n      currentLocale,\n      conversations,\n      perPage,\n      disableLinks,\n      placeholder,\n      ...childProps,\n    } = this.props;\n\n    const lastIndex = ((this.state.page + 1) * perPage) - 1;\n\n    const content = (conversations && conversations.length) ?\n      conversations.slice(0, lastIndex).map(item => (\n        <MessageItem\n          {...childProps}\n          conversation={item}\n          currentLocale={currentLocale}\n          key={item.id}\n          disableLinks={disableLinks}\n        />\n      ))\n      : <NoMessages placeholder={placeholder} />;\n    return (\n      <div\n        className={classnames(styles.root, className)}\n        onScroll={this.onScroll}\n        ref={(list) => { this.messagesListBody = list; }}\n        >\n        {content}\n      </div>\n    );\n  }\n}\n\nMessageList.propTypes = {\n  brand: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  conversations: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number,\n    conversationId: PropTypes.string.isRequired,\n    subject: PropTypes.string,\n  })).isRequired,\n  disableLinks: PropTypes.bool,\n  perPage: PropTypes.number,\n  className: PropTypes.string,\n  showConversationDetail: PropTypes.func.isRequired,\n  readVoicemail: PropTypes.func.isRequired,\n  markVoicemail: PropTypes.func.isRequired,\n  dateTimeFormatter: PropTypes.func,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  showGroupNumberName: PropTypes.bool,\n  placeholder: PropTypes.string,\n};\nMessageList.defaultProps = {\n  perPage: 20,\n  className: undefined,\n  disableLinks: false,\n  dateTimeFormatter: undefined,\n  showContactDisplayPlaceholder: true,\n  sourceIcons: undefined,\n  showGroupNumberName: false,\n  placeholder: undefined,\n};\n"]}