{"version":3,"sources":["components/MessageList/index.js"],"names":["NoMessages","props","styles","noMessages","placeholder","propTypes","PropTypes","string","isRequired","MessageList","onScroll","totalScrollHeight","messagesListBody","scrollHeight","clientHeight","currentScrollTop","scrollTop","_scrollTop","setState","page","state","className","currentLocale","conversations","perPage","disableLinks","childProps","lastIndex","content","length","slice","map","item","id","root","list","Component","brand","arrayOf","shape","number","conversationId","subject","bool","showConversationDetail","func","readMessage","markMessage","unmarkMessage","dateTimeFormatter","showContactDisplayPlaceholder","sourceIcons","object","showGroupNumberName","defaultProps","undefined"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport MessageItem from '../MessageItem';\nimport styles from './styles.scss';\n\nfunction NoMessages(props) {\n  return (\n    <p className={styles.noMessages}>{props.placeholder}</p>\n  );\n}\n\nNoMessages.propTypes = {\n  placeholder: PropTypes.string.isRequired,\n};\n\nexport default class MessageList extends Component {\n  constructor(props) {\n    super(props);\n    this._scrollTop = 0;\n    this.state = {\n      page: 0,\n    };\n  }\n  onScroll = () => {\n    const totalScrollHeight = this.messagesListBody.scrollHeight;\n    const { clientHeight } = this.messagesListBody;\n    const currentScrollTop = this.messagesListBody.scrollTop;\n    // load next page if scroll near buttom\n    if (\n      (totalScrollHeight - this._scrollTop) > (clientHeight + 10) &&\n      (totalScrollHeight - currentScrollTop) <= (clientHeight + 10)\n    ) {\n      this.setState({\n        page: this.state.page + 1,\n      });\n    }\n    this._scrollTop = currentScrollTop;\n  }\n\n  render() {\n    const {\n      className,\n      currentLocale,\n      conversations,\n      perPage,\n      disableLinks,\n      placeholder,\n      ...childProps,\n    } = this.props;\n\n    const lastIndex = ((this.state.page + 1) * perPage) - 1;\n\n    const content = (conversations && conversations.length) ?\n      conversations.slice(0, lastIndex).map(item => (\n        <MessageItem\n          {...childProps}\n          conversation={item}\n          currentLocale={currentLocale}\n          key={item.id}\n          disableLinks={disableLinks}\n        />\n      ))\n      : <NoMessages placeholder={placeholder} />;\n    return (\n      <div\n        className={classnames(styles.root, className)}\n        onScroll={this.onScroll}\n        ref={(list) => { this.messagesListBody = list; }}\n        >\n        {content}\n      </div>\n    );\n  }\n}\n\nMessageList.propTypes = {\n  brand: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  conversations: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number,\n    conversationId: PropTypes.string.isRequired,\n    subject: PropTypes.string,\n  })).isRequired,\n  disableLinks: PropTypes.bool,\n  perPage: PropTypes.number,\n  className: PropTypes.string,\n  showConversationDetail: PropTypes.func.isRequired,\n  readMessage: PropTypes.func.isRequired,\n  markMessage: PropTypes.func.isRequired,\n  unmarkMessage: PropTypes.func.isRequired,\n  dateTimeFormatter: PropTypes.func,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  showGroupNumberName: PropTypes.bool,\n  placeholder: PropTypes.string,\n};\nMessageList.defaultProps = {\n  perPage: 20,\n  className: undefined,\n  disableLinks: false,\n  dateTimeFormatter: undefined,\n  showContactDisplayPlaceholder: true,\n  sourceIcons: undefined,\n  showGroupNumberName: false,\n  placeholder: undefined,\n};\n"]}