{"version":3,"sources":["components/MessageList/index.js"],"names":["NoMessages","props","placeholder","propTypes","string","isRequired","MessageList","lastScrollHeight","currentScrollHeight","onScroll","totalScrollHeight","messagesListBody","scrollHeight","clientHeight","scrollTop","loadNextPageMessages","messages","messageList","list","length","map","message","type","unreadCounts","conversation","subject","getMessageRecipientNames","creationTime","formatDateTime","id","loading","getString","arrayOf","shape","number","object","to","array","from","func","bool","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAEA;;;;AAEA;;;;AACA;;;;;;AAEA,SAASA,UAAT,CAAoBC,KAApB,EAA2B;AACzB,SACE;AAAA;AAAA,MAAG,WAAW,iBAAOD,UAArB;AAAkCC,UAAMC;AAAxC,GADF;AAGD;;AAEDF,WAAWG,SAAX,GAAuB;AACrBD,eAAa,iBAAUE,MAAV,CAAiBC;AADT,CAAvB;;IAIqBC,W;;;AACnB,uBAAYL,KAAZ,EAAmB;AAAA;;AAAA,gJACXA,KADW;;AAEjB,QAAIM,mBAAmB,CAAvB;AACA,QAAIC,sBAAsB,CAA1B;;AAEA,UAAKC,QAAL,GAAgB,YAAM;AACpB,UAAMC,oBAAoB,MAAKC,gBAAL,CAAsBC,YAAhD;AACA,UAAMC,eAAe,MAAKF,gBAAL,CAAsBE,YAA3C;AACAL,4BAAsB,MAAKG,gBAAL,CAAsBG,SAA5C;AACA,UACGJ,oBAAoBH,gBAArB,GAA0CM,eAAe,EAAzD,IACCH,oBAAoBF,mBAArB,IAA8CK,eAAe,EAF/D,EAGE;AACA,cAAKZ,KAAL,CAAWc,oBAAX;AACD;AACDR,yBAAmBC,mBAAnB;AACD,KAXD;AALiB;AAiBlB;;;;6BAEQ;AAAA;;AACP,UAAMQ,WAAW,KAAKf,KAAL,CAAWe,QAA5B;AACA,aACE;AAAA;AAAA;AACE,qBAAW,iBAAOC,WADpB;AAEE,oBAAU,KAAKR,QAFjB;AAGE,eAAK,aAACS,IAAD,EAAU;AAAE,mBAAKP,gBAAL,GAAwBO,IAAxB;AAA+B;AAHlD;AAKGF,oBAAYA,SAASG,MAArB,GACGH,SAASI,GAAT,CACE;AAAA,iBACE;AACE,kBAAMC,QAAQC,IADhB;AAEE,0BAAcD,QAAQE,YAFxB;AAGE,0BAAcF,QAAQG,YAHxB;AAIE,qBAASH,QAAQI,OAJnB;AAKE,yBAAa,OAAKxB,KAAL,CAAWyB,wBAAX,CAAoCL,OAApC,CALf;AAME,0BAAcA,QAAQM,YANxB;AAOE,4BAAgB,OAAK1B,KAAL,CAAW2B,cAP7B;AAQE,iBAAKP,QAAQQ,EARf,GADF;AAAA,SADF,CADH,GAaG,8BAAC,UAAD,IAAY,aAAa,KAAK5B,KAAL,CAAWC,WAApC,GAlBN;AAoBE;AAAA;AAAA,YAAK,WAAW,iBAAO4B,OAAvB;AAAiC,eAAK7B,KAAL,CAAW6B,OAAX,IAAsB,eAAKC,SAAL,CAAe,SAAf;AAAvD;AApBF,OADF;AAwBD;;;;;kBA9CkBzB,W;;;AAiDrBA,YAAYH,SAAZ,GAAwB;AACtBa,YAAU,iBAAUgB,OAAV,CAAkB,iBAAUC,KAAV,CAAgB;AAC1CJ,QAAI,iBAAUK,MAD4B;AAE1CZ,UAAM,iBAAUlB,MAF0B;AAG1CmB,kBAAc,iBAAUW,MAHkB;AAI1CV,kBAAc,iBAAUW,MAAV,CAAiB9B,UAJW;AAK1CoB,aAAS,iBAAUrB,MALuB;AAM1CuB,kBAAc,iBAAUvB,MANkB;AAO1CgC,QAAI,iBAAUC,KAP4B;AAQ1CC,UAAM,iBAAUH;AAR0B,GAAhB,CAAlB,EASN9B,UAVkB;AAWtBU,wBAAsB,iBAAUwB,IAAV,CAAelC,UAXf;AAYtByB,WAAS,iBAAUU,IAZG;AAatBtC,eAAa,iBAAUE,MAAV,CAAiBC,UAbR;AActBuB,kBAAgB,iBAAUW,IAAV,CAAelC,UAdT;AAetBqB,4BAA0B,iBAAUa,IAAV,CAAelC;AAfnB,CAAxB;;AAkBAC,YAAYmC,YAAZ,GAA2B;AACzBX,WAAS;AADgB,CAA3B","file":"index.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\n\nimport MessageItem from '../MessageItem';\n\nimport styles from './styles.scss';\nimport i18n from './i18n';\n\nfunction NoMessages(props) {\n  return (\n    <p className={styles.NoMessages}>{props.placeholder}</p>\n  );\n}\n\nNoMessages.propTypes = {\n  placeholder: PropTypes.string.isRequired,\n};\n\nexport default class MessageList extends Component {\n  constructor(props) {\n    super(props);\n    let lastScrollHeight = 0;\n    let currentScrollHeight = 0;\n\n    this.onScroll = () => {\n      const totalScrollHeight = this.messagesListBody.scrollHeight;\n      const clientHeight = this.messagesListBody.clientHeight;\n      currentScrollHeight = this.messagesListBody.scrollTop;\n      if (\n        (totalScrollHeight - lastScrollHeight) > (clientHeight + 10) &&\n        (totalScrollHeight - currentScrollHeight) <= (clientHeight + 10)\n      ) {\n        this.props.loadNextPageMessages();\n      }\n      lastScrollHeight = currentScrollHeight;\n    };\n  }\n\n  render() {\n    const messages = this.props.messages;\n    return (\n      <div\n        className={styles.messageList}\n        onScroll={this.onScroll}\n        ref={(list) => { this.messagesListBody = list; }}\n      >\n        {messages && messages.length\n          ? messages.map(\n              message =>\n                <MessageItem\n                  type={message.type}\n                  unreadCounts={message.unreadCounts}\n                  conversation={message.conversation}\n                  subject={message.subject}\n                  contactList={this.props.getMessageRecipientNames(message)}\n                  creationTime={message.creationTime}\n                  formatDateTime={this.props.formatDateTime}\n                  key={message.id} />\n            )\n          : <NoMessages placeholder={this.props.placeholder} />\n        }\n        <div className={styles.loading}>{this.props.loading && i18n.getString('Loading')}</div>\n      </div>\n    );\n  }\n}\n\nMessageList.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number,\n    type: PropTypes.string,\n    unreadCounts: PropTypes.number,\n    conversation: PropTypes.object.isRequired,\n    subject: PropTypes.string,\n    creationTime: PropTypes.string,\n    to: PropTypes.array,\n    from: PropTypes.object,\n  })).isRequired,\n  loadNextPageMessages: PropTypes.func.isRequired,\n  loading: PropTypes.bool,\n  placeholder: PropTypes.string.isRequired,\n  formatDateTime: PropTypes.func.isRequired,\n  getMessageRecipientNames: PropTypes.func.isRequired,\n};\n\nMessageList.defaultProps = {\n  loading: false,\n};\n"]}