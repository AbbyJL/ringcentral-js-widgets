{"version":3,"sources":["components/ActiveCallItem/index.js"],"names":["callIconMap","callDirections","inbound","dynamicsFont","outbound","CallIcon","direction","ringing","inboundTitle","outboundTitle","title","styles","callIcon","activeCall","propTypes","PropTypes","string","isRequired","bool","defaultProps","undefined","WebphoneButtons","session","webphoneAnswer","webphoneReject","webphoneHangup","webphoneResume","hangupFunc","resumeFunc","endIcon","EndIcon","rejectTitle","i18n","getString","acceptTitle","callStatus","sessionStatus","connecting","VoicemailIcon","webphoneButtons","rejectButton","e","stopPropagation","id","answerButton","AnswerIcon","object","func","ActiveCallItem","props","onSelectContact","value","nameMatches","getContactMatches","selected","findIndex","match","_userSelection","setState","call","activityMatches","length","autoLog","logCall","redirect","getSelectedContact","state","contactMatches","clickToSms","onClickToSms","phoneNumber","getPhoneNumber","contact","formatted","formatPhone","name","enableContactFallback","getFallbackContactName","createSelectedContact","entityType","onCreateContact","_mounted","isCreating","viewSelectedContact","onViewContact","bind","isLogging","extended","toggleExtended","contactDisplay","contains","target","preState","webphoneToVoicemail","sessionId","toVoicemailTimeout","setTimeout","clearTimeout","from","to","nextProps","fromMatches","toMatches","extensionNumber","telephonyStatus","startTime","webphoneSession","offset","disableLinks","currentLocale","myPhoneNumber","getMyPhoneNumber","callDetail","label","telephonyStatusInfo","split","onLogCall","areaCode","countryCode","outboundSmsPermission","internalSmsPermission","brand","showContactDisplayPlaceholder","sourceIcons","renderContactName","renderExtraButton","contactDisplayStyle","parsedInfo","isExtension","hasPlus","number","showClickToSms","fallbackContactName","getCallInfo","contactName","extraButton","root","callInfo","Component","shape","array"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport sessionStatus from 'ringcentral-integration/modules/Webphone/sessionStatus';\nimport callDirections from 'ringcentral-integration/enums/callDirections';\nimport { isInbound, isRinging } from 'ringcentral-integration/lib/callLogHelpers';\nimport parseNumber from 'ringcentral-integration/lib/parseNumber';\n\nimport dynamicsFont from '../../assets/DynamicsFont/DynamicsFont.scss';\nimport DurationCounter from '../DurationCounter';\nimport ContactDisplay from '../ContactDisplay';\nimport ActionMenu from '../ActionMenu';\nimport CircleButton from '../CircleButton';\nimport EndIcon from '../../assets/images/End.svg';\nimport AnswerIcon from '../../assets/images/Answer.svg';\nimport VoicemailIcon from '../../assets/images/Voicemail.svg';\n\nimport styles from './styles.scss';\n\nimport i18n from './i18n';\n\nconst callIconMap = {\n  [callDirections.inbound]: dynamicsFont.inbound,\n  [callDirections.outbound]: dynamicsFont.outbound,\n};\n\nfunction CallIcon({\n  direction,\n  ringing,\n  inboundTitle,\n  outboundTitle,\n}) {\n  const title = (direction === callDirections.inbound) ? inboundTitle : outboundTitle;\n  return (\n    <div className={styles.callIcon}>\n      <span\n        className={classnames(\n          callIconMap[direction],\n          styles.activeCall,\n          ringing && styles.ringing,\n        )}\n        title={title}\n      />\n    </div>\n  );\n}\n\nCallIcon.propTypes = {\n  direction: PropTypes.string.isRequired,\n  ringing: PropTypes.bool,\n  inboundTitle: PropTypes.string,\n  outboundTitle: PropTypes.string,\n};\n\nCallIcon.defaultProps = {\n  ringing: false,\n  inboundTitle: undefined,\n  outboundTitle: undefined,\n};\n\nfunction WebphoneButtons({\n  session,\n  webphoneAnswer,\n  webphoneReject,\n  webphoneHangup,\n  webphoneResume,\n}) {\n  if (!session || !webphoneAnswer || !webphoneHangup) {\n    return null;\n  }\n  let hangupFunc = webphoneHangup;\n  let resumeFunc = webphoneResume;\n  let endIcon = EndIcon;\n  let rejectTitle = i18n.getString('hangup');\n  const acceptTitle = i18n.getString('accept');\n  if (\n    session.direction === callDirections.inbound &&\n    session.callStatus === sessionStatus.connecting\n  ) {\n    hangupFunc = webphoneReject;\n    resumeFunc = webphoneAnswer;\n    endIcon = VoicemailIcon;\n    rejectTitle = i18n.getString('toVoicemail');\n  }\n  return (\n    <div className={styles.webphoneButtons}>\n      <span title={rejectTitle}>\n        <CircleButton\n          className={styles.rejectButton}\n          onClick={(e) => {\n            e.stopPropagation();\n            hangupFunc(session.id);\n          }}\n          iconWidth={260}\n          iconX={120}\n          icon={endIcon}\n          showBorder={false}\n        />\n      </span>\n      <span title={acceptTitle}>\n        <CircleButton\n          className={styles.answerButton}\n          onClick={(e) => {\n            e.stopPropagation();\n            resumeFunc(session.id);\n          }}\n          icon={AnswerIcon}\n          showBorder={false}\n      />\n      </span>\n    </div>\n  );\n}\n\nWebphoneButtons.propTypes = {\n  session: PropTypes.object,\n  webphoneAnswer: PropTypes.func,\n  webphoneReject: PropTypes.func,\n  webphoneHangup: PropTypes.func,\n  webphoneResume: PropTypes.func,\n};\n\nWebphoneButtons.defaultProps = {\n  session: undefined,\n  webphoneAnswer: undefined,\n  webphoneReject: undefined,\n  webphoneHangup: undefined,\n  webphoneResume: undefined,\n};\n\nexport default class ActiveCallItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: 0,\n      isLogging: false,\n      extended: false,\n      isCreating: false,\n    };\n    this._userSelection = false;\n\n    this.toggleExtended = (e) => {\n      if ((\n        this.contactDisplay &&\n        this.contactDisplay.contains(e.target))\n      ) {\n        return;\n      }\n      this.setState(preState => ({\n        extended: !preState.extended,\n      }));\n    };\n\n    this.webphoneToVoicemail = (sessionId) => {\n      if (typeof this.props.webphoneToVoicemail !== 'function') {\n        return;\n      }\n      this.props.webphoneToVoicemail(sessionId);\n      this.toVoicemailTimeout = setTimeout(() => {\n        this.props.webphoneReject(sessionId);\n      }, 3000);\n    };\n  }\n\n  componentDidMount() {\n    this._mounted = true;\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n    if (this.toVoicemailTimeout) {\n      clearTimeout(this.toVoicemailTimeout);\n      this.toVoicemailTimeout = null;\n    }\n  }\n\n  onSelectContact = (value) => {\n    const nameMatches = this.getContactMatches();\n    const selected = nameMatches.findIndex(\n      match => match.id === value.id\n    );\n    this._userSelection = true;\n    this.setState({\n      selected,\n    });\n    if (\n      this.props.call.activityMatches.length > 0 &&\n      this.props.autoLog\n    ) {\n      this.logCall({ redirect: false, selected });\n    }\n  }\n\n  getFallbackContactName() {\n    return isInbound(this.props.call) ?\n      (this.props.call.from.name) :\n      (this.props.call.to.name);\n  }\n\n  getSelectedContact = (selected = this.state.selected) => {\n    const contactMatches = this.getContactMatches();\n    return (selected > -1 && contactMatches[selected]) ||\n      (contactMatches.length === 1 && contactMatches[0]) ||\n      null;\n  }\n\n  getContactMatches(nextProps = this.props) {\n    return isInbound(nextProps.call) ?\n      nextProps.call.fromMatches :\n      nextProps.call.toMatches;\n  }\n\n  getPhoneNumber() {\n    return isInbound(this.props.call) ?\n      (this.props.call.from.phoneNumber || this.props.call.from.extensionNumber) :\n      (this.props.call.to.phoneNumber || this.props.call.to.extensionNumber);\n  }\n\n  getMyPhoneNumber() {\n    return isInbound(this.props.call) ?\n      (this.props.call.to.phoneNumber || this.props.call.to.extensionNumber) :\n      (this.props.call.from.phoneNumber || this.props.call.from.extensionNumber);\n  }\n\n  getCallInfo() {\n    const {\n      call: {\n        telephonyStatus,\n        startTime,\n        webphoneSession,\n        offset,\n      },\n      disableLinks,\n      currentLocale,\n      formatPhone,\n    } = this.props;\n    const myPhoneNumber = this.getMyPhoneNumber();\n    if (webphoneSession) {\n      return (\n        <div className={styles.callDetail}>\n          <span className={styles.label}>\n            {\n              isInbound(this.props.call) ?\n                i18n.getString('to', currentLocale) :\n                i18n.getString('from', currentLocale)\n            }:\n          </span>\n          {formatPhone(myPhoneNumber)}\n        </div>\n      );\n    }\n    const telephonyStatusInfo = i18n.getString(telephonyStatus, currentLocale);\n    return (\n      <div className={styles.callDetail}>\n        {\n          disableLinks ?\n            i18n.getString('unavailable', currentLocale) :\n            <DurationCounter startTime={startTime} offset={offset} />\n        }\n        <span className={styles.split}>|</span>\n        <span title={telephonyStatusInfo}>\n          {telephonyStatusInfo}\n        </span>\n      </div>\n    );\n  }\n\n  clickToSms = () => {\n    if (this.props.onClickToSms) {\n      const phoneNumber = this.getPhoneNumber();\n      const contact = this.getSelectedContact();\n      if (contact) {\n        this.props.onClickToSms({\n          ...contact,\n          phoneNumber,\n        });\n      } else {\n        const formatted = this.props.formatPhone(phoneNumber);\n        this.props.onClickToSms({\n          name: this.props.enableContactFallback ? this.getFallbackContactName() : formatted,\n          phoneNumber,\n        }, true);\n      }\n    }\n  }\n\n  createSelectedContact = async (entityType) => {\n    // console.log('click createSelectedContact!!', entityType);\n    if (typeof this.props.onCreateContact === 'function' &&\n      this._mounted &&\n      !this.state.isCreating) {\n      this.setState({\n        isCreating: true,\n      });\n      // console.log('start to create: isCreating...', this.state.isCreating);\n      const phoneNumber = this.getPhoneNumber();\n      await this.props.onCreateContact({\n        phoneNumber,\n        name: this.props.enableContactFallback ? this.getFallbackContactName() : '',\n        entityType,\n      });\n\n      if (this._mounted) {\n        this.setState({\n          isCreating: false,\n        });\n        // console.log('created: isCreating...', this.state.isCreating);\n      }\n    }\n  }\n\n  viewSelectedContact = () => {\n    if (typeof this.props.onViewContact === 'function') {\n      this.props.onViewContact({\n        contact: this.getSelectedContact(),\n      });\n    }\n  }\n\n  async logCall({ redirect = true, selected }) {\n    if (\n      typeof this.props.onLogCall === 'function' &&\n      this._mounted &&\n      !this.state.isLogging\n    ) {\n      this.setState({\n        isLogging: true,\n      });\n      await this.props.onLogCall({\n        contact: this.getSelectedContact(selected),\n        call: this.props.call,\n        redirect,\n      });\n      if (this._mounted) {\n        this.setState({\n          isLogging: false,\n        });\n      }\n    }\n  }\n  logCall = this.logCall.bind(this)\n\n  render() {\n    const {\n      call: {\n        direction,\n        activityMatches,\n        webphoneSession,\n      },\n      disableLinks,\n      currentLocale,\n      areaCode,\n      countryCode,\n      outboundSmsPermission,\n      internalSmsPermission,\n      enableContactFallback,\n      isLogging,\n      brand,\n      showContactDisplayPlaceholder,\n      onClickToSms,\n      onViewContact,\n      onCreateContact,\n      onLogCall,\n      webphoneAnswer,\n      webphoneHangup,\n      webphoneResume,\n      sourceIcons,\n      renderContactName,\n      renderExtraButton,\n      contactDisplayStyle,\n    } = this.props;\n    const phoneNumber = this.getPhoneNumber();\n    const parsedInfo = parseNumber(phoneNumber);\n    const isExtension = !parsedInfo.hasPlus &&\n      parsedInfo.number.length <= 6;\n    const showClickToSms = !!(\n      onClickToSms &&\n      (\n        isExtension ?\n          internalSmsPermission :\n          outboundSmsPermission\n      )\n    );\n    const contactMatches = this.getContactMatches();\n    const fallbackContactName = this.getFallbackContactName();\n    const ringing = isRinging(this.props.call);\n    const callDetail = this.getCallInfo();\n    const contactName = typeof renderContactName === 'function' ?\n      renderContactName(this.props.call) :\n      undefined;\n    const extraButton = typeof renderExtraButton === 'function' ?\n      renderExtraButton(this.props.call) :\n      undefined;\n    return (\n      <div className={styles.root} onClick={this.toggleExtended}>\n        <div className={styles.callInfo}>\n          <CallIcon\n            direction={direction}\n            ringing={ringing}\n            active\n            missed={false}\n            inboundTitle={i18n.getString('inboundCall', currentLocale)}\n            outboundTitle={i18n.getString('outboundCall', currentLocale)}\n            missedTitle={i18n.getString('missedCall', currentLocale)}\n          />\n          <ContactDisplay\n            contactName={contactName}\n            className={classnames(styles.contactDisplay, contactDisplayStyle)}\n            contactMatches={contactMatches}\n            selected={this.state.selected}\n            onSelectContact={this.onSelectContact}\n            disabled={disableLinks}\n            isLogging={isLogging || this.state.isLogging}\n            fallBackName={fallbackContactName}\n            enableContactFallback={enableContactFallback}\n            areaCode={areaCode}\n            countryCode={countryCode}\n            phoneNumber={phoneNumber}\n            currentLocale={currentLocale}\n            brand={brand}\n            showPlaceholder={showContactDisplayPlaceholder}\n            showType={false}\n            sourceIcons={sourceIcons}\n            stopPropagation\n          />\n          {callDetail}\n          <WebphoneButtons\n            session={webphoneSession}\n            webphoneAnswer={webphoneAnswer}\n            webphoneReject={this.webphoneToVoicemail}\n            webphoneHangup={webphoneHangup}\n            webphoneResume={webphoneResume}\n          />\n          {extraButton}\n        </div>\n        <ActionMenu\n          extended={this.state.extended}\n          onToggle={this.toggleExtended}\n          currentLocale={currentLocale}\n          disableLinks={disableLinks}\n          phoneNumber={phoneNumber}\n          onClickToSms={\n            showClickToSms ?\n              () => this.clickToSms({ countryCode, areaCode })\n              : undefined\n          }\n          hasEntity={!!contactMatches.length}\n          onViewEntity={onViewContact && this.viewSelectedContact}\n          onCreateEntity={onCreateContact && this.createSelectedContact}\n          textTitle={i18n.getString('text', currentLocale)}\n          onLog={onLogCall}\n          isLogging={isLogging || this.state.isLogging}\n          isLogged={activityMatches.length > 0}\n          isCreating={this.state.isCreating}\n          addLogTitle={i18n.getString('addLog', currentLocale)}\n          editLogTitle={i18n.getString('editLog', currentLocale)}\n          createEntityTitle={i18n.getString('addEntity', currentLocale)}\n          viewEntityTitle={i18n.getString('viewDetails', currentLocale)}\n        />\n      </div>\n    );\n  }\n}\n\nActiveCallItem.propTypes = {\n  call: PropTypes.shape({\n    direction: PropTypes.string.isRequired,\n    telephonyStatus: PropTypes.string,\n    startTime: PropTypes.number.isRequired,\n    activityMatches: PropTypes.array.isRequired,\n    fromMatches: PropTypes.array.isRequired,\n    toMatches: PropTypes.array.isRequired,\n    from: PropTypes.shape({\n      phoneNumber: PropTypes.string,\n      extensionNumber: PropTypes.string,\n      name: PropTypes.string,\n    }).isRequired,\n    to: PropTypes.shape({\n      phoneNumber: PropTypes.string,\n      extensionNumber: PropTypes.string,\n      name: PropTypes.string,\n    }),\n    webphoneSession: PropTypes.object,\n  }).isRequired,\n  areaCode: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  disableLinks: PropTypes.bool,\n  outboundSmsPermission: PropTypes.bool,\n  internalSmsPermission: PropTypes.bool,\n  isLogging: PropTypes.bool,\n  webphoneAnswer: PropTypes.func,\n  webphoneReject: PropTypes.func,\n  webphoneHangup: PropTypes.func,\n  webphoneResume: PropTypes.func,\n  webphoneToVoicemail: PropTypes.func,\n  enableContactFallback: PropTypes.bool,\n  autoLog: PropTypes.bool,\n  brand: PropTypes.string,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  formatPhone: PropTypes.func.isRequired,\n  onClickToSms: PropTypes.func,\n  onCreateContact: PropTypes.func,\n  onLogCall: PropTypes.func,\n  onViewContact: PropTypes.func,\n  sourceIcons: PropTypes.object,\n  renderContactName: PropTypes.func,\n  renderExtraButton: PropTypes.func,\n  contactDisplayStyle: PropTypes.string,\n};\n\nActiveCallItem.defaultProps = {\n  onLogCall: undefined,\n  onClickToSms: undefined,\n  onViewContact: undefined,\n  onCreateContact: undefined,\n  isLogging: false,\n  outboundSmsPermission: false,\n  internalSmsPermission: false,\n  disableLinks: false,\n  webphoneAnswer: undefined,\n  webphoneReject: undefined,\n  webphoneHangup: undefined,\n  webphoneResume: undefined,\n  webphoneToVoicemail: undefined,\n  enableContactFallback: undefined,\n  autoLog: false,\n  brand: 'RingCentral',\n  showContactDisplayPlaceholder: true,\n  sourceIcons: undefined,\n  renderContactName: undefined,\n  renderExtraButton: undefined,\n  contactDisplayStyle: undefined,\n};\n"]}