{"version":3,"sources":["components/DialButton/index.js"],"names":["ALTERNATIVE_TIMEOUT","DialButton","props","args","state","pressed","timeout","document","createElement","btn","value","audio","src","onMouseDown","canPlayType","volume","muted","currentTime","play","onPress","setTimeout","clearTimeout","onOutput","alternativeValue","setState","alternativeTimeout","onMouseUp","onMouseLeave","isSpecial","root","className","btnSvg","btnSvgGroup","circle","btnValue","special","btnText","dx","text","propTypes","shape","string","isRequired","func","number","bool","defaultProps","undefined"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport styles from './styles.scss';\nimport audios from './audios';\n\nconst ALTERNATIVE_TIMEOUT = 1000;\n\nexport default class DialButton extends Component {\n  constructor(props, ...args) {\n    super(props, ...args);\n    this.state = {\n      pressed: false,\n    };\n    this.timeout = null;\n    if (typeof document !== 'undefined' && document.createElement && audios[props.btn.value]) {\n      this.audio = document.createElement('audio');\n      this.audio.src = audios[props.btn.value];\n    }\n    this.onMouseDown = () => {\n      if (this.audio && this.audio.canPlayType('audio/ogg') !== '') {\n        this.audio.volume = this.props.volume;\n        this.audio.muted = this.props.muted;\n        this.audio.currentTime = 0;\n        this.audio.play();\n      }\n      if (typeof this.props.onPress === 'function') {\n        this.props.onPress(this.props.btn.value);\n      }\n\n      this.timeout = setTimeout(() => {\n        if (this.state.pressed) {\n          if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n          }\n          if (typeof this.props.onOutput === 'function') {\n            this.props.onOutput(this.props.btn.alternativeValue || this.props.btn.value);\n          }\n          this.setState({\n            pressed: false,\n          });\n        }\n      }, this.props.alternativeTimeout || ALTERNATIVE_TIMEOUT);\n\n      this.setState({\n        pressed: true,\n      });\n    };\n    this.onMouseUp = () => {\n      if (this.state.pressed) {\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n          this.timeout = null;\n        }\n        if (typeof this.props.onOutput === 'function') {\n          this.props.onOutput(this.props.btn.value);\n        }\n        this.setState({\n          pressed: false,\n        });\n      }\n    };\n    this.onMouseLeave = () => {\n      if (this.state.pressed) {\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n          this.timeout = null;\n        }\n        this.setState({\n          pressed: false,\n        });\n      }\n    };\n  }\n  render() {\n    const isSpecial = this.props.btn.value === '*';\n    return (\n      <div className={classnames(styles.root, this.props.className)}>\n        <svg className={styles.btnSvg} viewBox=\"0 0 500 500\">\n          <g\n            className={classnames(\n              styles.btnSvgGroup,\n              this.state.pressed && styles.pressed\n            )}\n            onMouseUp={this.onMouseUp}\n            onMouseDown={this.onMouseDown}\n            onMouseLeave={this.onMouseLeave}>\n            <circle\n              className={styles.circle}\n              cx=\"250\"\n              cy=\"250\"\n              r=\"191\"\n            />\n            <text\n              className={\n                classnames(\n                  styles.btnValue,\n                  isSpecial ? styles.special : null\n                )\n              }\n              x=\"0\"\n              dx=\"216\"\n              y=\"0\"\n              dy={isSpecial ? 350 : 250}\n            >\n              {this.props.btn.value}\n            </text>\n            <text\n              className={styles.btnText}\n              x=\"0\"\n              dx={this.props.btn.dx}\n              y=\"0\"\n              dy=\"360\">\n              {this.props.btn.text}\n            </text>\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nDialButton.propTypes = {\n  btn: PropTypes.shape({\n    value: PropTypes.string.isRequired,\n    text: PropTypes.string,\n    alternativeValue: PropTypes.string,\n    dx: PropTypes.string,\n  }).isRequired,\n  className: PropTypes.string,\n  onPress: PropTypes.func,\n  onOutput: PropTypes.func,\n  alternativeTimeout: PropTypes.number,\n  volume: PropTypes.number,\n  muted: PropTypes.bool,\n};\n\nDialButton.defaultProps = {\n  className: null,\n  onPress: undefined,\n  onOutput: undefined,\n  alternativeTimeout: undefined,\n  volume: 1,\n  muted: false,\n};\n"]}