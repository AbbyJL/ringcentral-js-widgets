{"version":3,"sources":["components/ContactList/index.js"],"names":["NoContacts","currentLocale","noContacts","getString","propTypes","string","isRequired","ContactGroup","caption","contacts","getAvatarUrl","getPresence","onItemSelect","sourceNodeRenderer","contactGroup","groupCaption","map","contact","type","id","func","arrayOf","defaultProps","undefined","ContactList","props","downwards","onScroll","bind","setTimeout","detectNextPage","rootElem","ev","target","el","scrollTop","clientHeight","scrollHeight","currentPage","onNextPage","curr","contactGroups","root","length","group","shape","number"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport ContactItem from '../ContactItem';\nimport styles from './styles.scss';\nimport i18n from './i18n';\n\nfunction NoContacts({ currentLocale }) {\n  return (\n    <p className={styles.noContacts}>\n      {i18n.getString('noContacts', currentLocale)}\n    </p>\n  );\n}\nNoContacts.propTypes = {\n  currentLocale: PropTypes.string.isRequired,\n};\n\nfunction ContactGroup({\n  caption,\n  contacts,\n  getAvatarUrl,\n  getPresence,\n  onItemSelect,\n  sourceNodeRenderer\n}) {\n  return (\n    <div className={styles.contactGroup}>\n      <div className={styles.groupCaption}>\n        {caption}\n      </div>\n      {\n        contacts.map(contact => (\n          <ContactItem\n            key={`${contact.type}${contact.id}`}\n            contact={contact}\n            getAvatarUrl={getAvatarUrl}\n            getPresence={getPresence}\n            onSelect={onItemSelect}\n            sourceNodeRenderer={sourceNodeRenderer}\n          />\n        ))\n      }\n    </div>\n  );\n}\nContactGroup.propTypes = {\n  onItemSelect: PropTypes.func,\n  getAvatarUrl: PropTypes.func.isRequired,\n  getPresence: PropTypes.func.isRequired,\n  caption: PropTypes.string.isRequired,\n  contacts: PropTypes.arrayOf(ContactItem.propTypes.contact).isRequired,\n  sourceNodeRenderer: PropTypes.func,\n};\nContactGroup.defaultProps = {\n  onItemSelect: undefined,\n  sourceNodeRenderer: undefined,\n};\n\nexport default class ContactList extends Component {\n  constructor(props) {\n    super(props);\n    this.downwards = true;\n    this.onScroll = this.onScroll.bind(this);\n  }\n\n  componentDidMount() {\n    // wait for contact items rendering\n    setTimeout(() => {\n      // detect here for the case when there is no scroll bar\n      this.detectNextPage(this.rootElem);\n    }, 0);\n  }\n\n  onScroll(ev) {\n    this.detectNextPage(ev.target);\n  }\n\n  detectNextPage(el) {\n    if (!el) {\n      return;\n    }\n    if (this.downwards) {\n      if ((el.scrollTop + el.clientHeight) > (el.scrollHeight - 20)) {\n        this.downwards = false;\n        const { currentPage, onNextPage } = this.props;\n        if (onNextPage) {\n          const curr = (currentPage || 1);\n          onNextPage(curr + 1);\n        }\n      }\n    } else if ((el.scrollTop + el.clientHeight) < (el.scrollHeight - 30)) {\n      this.downwards = true;\n    }\n  }\n\n  render() {\n    const {\n      currentLocale,\n      contactGroups,\n      getAvatarUrl,\n      getPresence,\n      onItemSelect,\n      sourceNodeRenderer,\n    } = this.props;\n    return (\n      <div\n        className={styles.root}\n        onScroll={this.onScroll}\n        ref={(el) => { this.rootElem = el; }}\n      >\n        {\n          contactGroups.length ?\n            contactGroups.map(group => (\n              <ContactGroup\n                key={group.id}\n                caption={group.caption}\n                contacts={group.contacts}\n                getAvatarUrl={getAvatarUrl}\n                getPresence={getPresence}\n                onItemSelect={onItemSelect}\n                sourceNodeRenderer={sourceNodeRenderer}\n              />\n            )) :\n            <NoContacts\n              currentLocale={currentLocale}\n            />\n        }\n      </div>\n    );\n  }\n}\n\nContactList.propTypes = {\n  currentLocale: PropTypes.string.isRequired,\n  contactGroups: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    caption: PropTypes.string.isRequired,\n    contacts: PropTypes.arrayOf(ContactItem.propTypes.contact).isRequired,\n  })).isRequired,\n  getAvatarUrl: PropTypes.func.isRequired,\n  getPresence: PropTypes.func.isRequired,\n  currentPage: PropTypes.number,\n  onNextPage: PropTypes.func,\n  onItemSelect: PropTypes.func,\n  sourceNodeRenderer: PropTypes.func,\n};\n\nContactList.defaultProps = {\n  currentPage: undefined,\n  onNextPage: undefined,\n  onItemSelect: undefined,\n  sourceNodeRenderer: undefined,\n};\n"]}