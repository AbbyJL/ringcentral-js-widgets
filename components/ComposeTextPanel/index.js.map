{"version":3,"sources":["components/ComposeTextPanel/index.js"],"names":["ComposeTextPanel","props","state","messageText","onSenderChange","value","updateSenderNumber","cleanReceiverValue","cleanTypingToNumber","addToRecipients","receiver","shouldClean","addToNumber","isAdded","removeFromRecipients","phoneNumber","removeToNumber","nextProps","setState","senderNumbers","length","showSpinner","root","className","currentLocale","outboundSMS","hasSenderNumbers","brand","typingToNumber","updateTypingToNumber","toNumbers","searchContact","searchContactList","formatContactPhone","phoneTypeRenderer","recipientsContactInfoRenderer","recipientsContactPhoneRenderer","autoFocus","senderField","senderNumber","formatPhone","updateMessageText","sendButtonDisabled","send","propTypes","string","func","isRequired","arrayOf","shape","bool","name","entityType","phoneType","defaultProps","undefined"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport styles from './styles.scss';\nimport RecipientsInput from '../RecipientsInput';\nimport SpinnerOverlay from '../SpinnerOverlay';\nimport NoSenderAlert from './NoSenderAlert';\nimport FromField from '../FromField';\nimport MessageInput from '../MessageInput';\n\n\nclass ComposeTextPanel extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      messageText: props.messageText,\n    };\n\n    this.onSenderChange = (value) => {\n      this.props.updateSenderNumber(value);\n    };\n\n\n    this.cleanReceiverValue = () => {\n      this.props.cleanTypingToNumber();\n    };\n\n    this.addToRecipients = async (receiver, shouldClean = true) => {\n      const isAdded = await this.props.addToNumber(receiver);\n      if (isAdded && shouldClean) {\n        this.props.cleanTypingToNumber();\n      }\n    };\n\n    this.removeFromRecipients = (phoneNumber) => {\n      this.props.removeToNumber({ phoneNumber });\n    };\n  }\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.messageText !== this.state.messageText) {\n      this.setState({\n        messageText: nextProps.messageText,\n      });\n    }\n  }\n\n  hasSenderNumbers() {\n    return this.props.senderNumbers.length > 0;\n  }\n\n  render() {\n    if (this.props.showSpinner) {\n      return (\n        <div className={classnames(styles.root, this.props.className)}>\n          <SpinnerOverlay />\n        </div>\n      );\n    }\n    return (\n      <div className={classnames(styles.root, this.props.className)}>\n        <NoSenderAlert\n          currentLocale={this.props.currentLocale}\n          outboundSMS={this.props.outboundSMS}\n          hasSenderNumbers={this.hasSenderNumbers()}\n          brand={this.props.brand}\n        />\n        <RecipientsInput\n          value={this.props.typingToNumber}\n          onChange={this.props.updateTypingToNumber}\n          onClean={this.cleanReceiverValue}\n          recipients={this.props.toNumbers}\n          addToRecipients={this.addToRecipients}\n          removeFromRecipients={this.removeFromRecipients}\n          searchContact={this.props.searchContact}\n          searchContactList={this.props.searchContactList}\n          formatContactPhone={this.props.formatContactPhone}\n          currentLocale={this.props.currentLocale}\n          phoneTypeRenderer={this.props.phoneTypeRenderer}\n          contactInfoRenderer={this.props.recipientsContactInfoRenderer}\n          contactPhoneRenderer={this.props.recipientsContactPhoneRenderer}\n          titleEnabled\n          autoFocus={this.props.autoFocus}\n          multiple\n        />\n        <div className={styles.senderField}>\n          <FromField\n            currentLocale={this.props.currentLocale}\n            fromNumber={this.props.senderNumber}\n            fromNumbers={this.props.senderNumbers}\n            formatPhone={this.props.formatPhone}\n            onChange={this.onSenderChange}\n            hidden={!this.hasSenderNumbers()}\n            showAnonymous={false}\n          />\n        </div>\n        <MessageInput\n          value={this.props.messageText}\n          onChange={this.props.updateMessageText}\n          disabled={this.props.sendButtonDisabled}\n          currentLocale={this.props.currentLocale}\n          onSend={this.props.send}\n        />\n      </div>\n    );\n  }\n}\n\nComposeTextPanel.propTypes = {\n  brand: PropTypes.string,\n  className: PropTypes.string,\n  send: PropTypes.func.isRequired,\n  senderNumbers: PropTypes.arrayOf(PropTypes.shape({\n    phoneNumber: PropTypes.string.isRequired,\n  })).isRequired,\n  sendButtonDisabled: PropTypes.bool.isRequired,\n  formatPhone: PropTypes.func.isRequired,\n  formatContactPhone: PropTypes.func.isRequired,\n  searchContact: PropTypes.func.isRequired,\n  searchContactList: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    entityType: PropTypes.string.isRequired,\n    phoneType: PropTypes.string.isRequired,\n    phoneNumber: PropTypes.string.isRequired,\n  })).isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  updateSenderNumber: PropTypes.func.isRequired,\n  updateTypingToNumber: PropTypes.func.isRequired,\n  cleanTypingToNumber: PropTypes.func.isRequired,\n  addToNumber: PropTypes.func.isRequired,\n  removeToNumber: PropTypes.func.isRequired,\n  updateMessageText: PropTypes.func.isRequired,\n  messageText: PropTypes.string,\n  typingToNumber: PropTypes.string,\n  senderNumber: PropTypes.string,\n  toNumbers: PropTypes.arrayOf(PropTypes.shape({\n    phoneNumber: PropTypes.string.isRequired,\n    name: PropTypes.string,\n  })).isRequired,\n  outboundSMS: PropTypes.bool,\n  showSpinner: PropTypes.bool,\n  phoneTypeRenderer: PropTypes.func,\n  recipientsContactInfoRenderer: PropTypes.func,\n  recipientsContactPhoneRenderer: PropTypes.func,\n  autoFocus: PropTypes.bool,\n};\n\nComposeTextPanel.defaultProps = {\n  brand: 'RingCentral',\n  className: null,\n  messageText: '',\n  typingToNumber: '',\n  senderNumber: '',\n  outboundSMS: false,\n  showSpinner: false,\n  phoneTypeRenderer: undefined,\n  recipientsContactInfoRenderer: undefined,\n  recipientsContactPhoneRenderer: undefined,\n  autoFocus: false,\n};\n\nexport default ComposeTextPanel;\n"]}