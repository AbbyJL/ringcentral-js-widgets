{"version":3,"sources":["components/ComposeTextPanel/index.js"],"names":["ComposeTextPanel","props","onSenderChange","e","value","currentTarget","updateSenderNumber","onReceiverChange","updateTypingToNumber","cleanReceiverValue","cleanTypingToNumber","onReceiverInputKeyDown","key","preventDefault","typingToNumber","length","addToNumber","name","formatPhone","phoneNumber","onReceiverInputKeyUp","searchContact","addToRecipients","receiver","removeFromRecipients","removeToNumber","onTextChange","updateMessageText","onTextAreaKeyDown","send","handleSubmit","console","debug","root","receiverField","getString","currentLocale","rightPanel","toNumbers","searchContactList","senderField","senderInput","senderSelect","senderNumber","senderNumbers","option","buttomField","textField","messageText","submitField","submitButton","sendButtonDisabled","propTypes","func","isRequired","arrayOf","string","bool","shape","entityType","phoneType","PropTypes","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["import React, { PropTypes, Component } from 'react';\nimport i18n from './i18n';\nimport styles from './styles.scss';\nimport RecipientsInput from '../RecipientsInput';\nimport Select from '../Select';\n\nclass ComposeTextPanel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSenderChange = (e) => {\n      const value = e.currentTarget.value;\n      this.props.updateSenderNumber(value);\n    };\n\n    this.onReceiverChange = (e) => {\n      const value = e.currentTarget.value;\n      this.props.updateTypingToNumber(value);\n    };\n\n    this.cleanReceiverValue = () => {\n      this.props.cleanTypingToNumber();\n    };\n\n    this.onReceiverInputKeyDown = (e) => {\n      if (e.key === ',' || e.key === ';' || e.key === 'Enter') {\n        e.preventDefault();\n        if (this.props.typingToNumber.length === 0) {\n          return;\n        }\n        this.props.addToNumber({\n          name: this.props.formatPhone(this.props.typingToNumber),\n          phoneNumber: this.props.typingToNumber,\n        });\n        this.props.cleanTypingToNumber();\n      }\n    };\n\n    this.onReceiverInputKeyUp = (e) => {\n      this.props.searchContact(e.currentTarget.value);\n    };\n\n    this.addToRecipients = (receiver) => {\n      this.props.addToNumber(receiver);\n      this.props.cleanTypingToNumber();\n    };\n\n    this.removeFromRecipients = (phoneNumber) => {\n      this.props.removeToNumber({ phoneNumber });\n    };\n\n    this.onTextChange = (e) => {\n      const value = e.currentTarget.value;\n      this.props.updateMessageText(value);\n    };\n\n    this.onTextAreaKeyDown = (e) => {\n      if (e.key === 'Enter') {\n        e.preventDefault();\n        this.props.send();\n      }\n    };\n\n    this.handleSubmit = (e) => {\n      e.preventDefault();\n      this.props.send();\n      console.debug('send message ...');\n    };\n  }\n\n  render() {\n    return (\n      <div className={styles.root}>\n        <form onSubmit={this.handleSubmit}>\n          <div className={styles.receiverField}>\n            <label>{i18n.getString('to', this.props.currentLocale)}:</label>\n            <div className={styles.rightPanel}>\n              <RecipientsInput\n                value={this.props.typingToNumber}\n                onChange={this.onReceiverChange}\n                onClean={this.cleanReceiverValue}\n                placeholder={i18n.getString('enterNameOrNumber', this.props.currentLocale)}\n                recipients={this.props.toNumbers}\n                addToRecipients={this.addToRecipients}\n                removeFromRecipients={this.removeFromRecipients}\n                searchContactList={this.props.searchContactList}\n                onKeyUp={this.onReceiverInputKeyUp}\n                onKeyDown={this.onReceiverInputKeyDown}\n                formatPhone={this.props.formatPhone}\n              />\n            </div>\n          </div>\n          <div className={styles.senderField}>\n            <label>{i18n.getString('from', this.props.currentLocale)}:</label>\n            <div className={styles.senderInput}>\n              <Select\n                className={styles.senderSelect}\n                value={this.props.senderNumber}\n                onChange={this.onSenderChange}\n                options={this.props.senderNumbers}\n                paddingLeft={0}\n                valueFunction={option => option}\n                renderFunction={this.props.formatPhone}\n              />\n            </div>\n          </div>\n          <div className={styles.buttomField}>\n            <div className={styles.textField}>\n              <textarea\n                placeholder={i18n.getString('typeMessage', this.props.currentLocale)}\n                value={this.props.messageText}\n                maxLength=\"1000\"\n                onChange={this.onTextChange}\n                onKeyDown={this.onTextAreaKeyDown}\n              />\n            </div>\n            <div className={styles.submitField}>\n              <input\n                type=\"submit\"\n                value={i18n.getString('send', this.props.currentLocale)}\n                className={styles.submitButton}\n                disabled={this.props.sendButtonDisabled}\n              />\n            </div>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nComposeTextPanel.propTypes = {\n  send: PropTypes.func.isRequired,\n  senderNumbers: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n  sendButtonDisabled: PropTypes.bool.isRequired,\n  formatPhone: PropTypes.func.isRequired,\n  searchContact: PropTypes.func.isRequired,\n  searchContactList: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    entityType: PropTypes.string.isRequired,\n    phoneType: PropTypes.string.isRequired,\n    phoneNumber: PropTypes.string.isRequired,\n  })).isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  updateSenderNumber: PropTypes.func.isRequired,\n  updateTypingToNumber: PropTypes.func.isRequired,\n  cleanTypingToNumber: PropTypes.func.isRequired,\n  addToNumber: PropTypes.func.isRequired,\n  removeToNumber: PropTypes.func.isRequired,\n  updateMessageText: PropTypes.func.isRequired,\n  messageText: PropTypes.string,\n  typingToNumber: PropTypes.string,\n  senderNumber: PropTypes.string,\n  toNumbers: React.PropTypes.arrayOf(PropTypes.shape({\n    phoneNumber: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n  })).isRequired,\n};\n\nComposeTextPanel.defaultProps = {\n  messageText: '',\n  typingToNumber: '',\n  senderNumber: '',\n};\n\nexport default ComposeTextPanel;\n"]}