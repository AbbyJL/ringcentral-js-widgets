{"version":3,"sources":["components/IncomingCallPad/index.js"],"names":["IncomingCallPad","props","state","showForward","forwardNumber","replyMessage","showReplyWithMessage","toVoiceMailEnabled","replyMessageEnabled","onShowForwardChange","visible","setState","onForwardNumberChange","closeForwardForm","onShowReplyWithMessageChange","onReplyMessageChange","message","closeReplyWithMessage","toVoiceMail","voicemailTimeout","setTimeout","reject","replyWithMessage","value","replyTimeout","newProps","sessionId","clearTimeout","currentLocale","answer","forwardingNumbers","formatPhone","className","hasOtherActiveCall","answerAndEnd","answerAndHold","multiCallButtons","buttonRow","multiCallsButtonGroup","getString","callButton","voiceMailButton","singleCallButtons","answerButtonGroup","bigCallButton","answerButton","root","forwardContainner","containner","replyWithMessageContainner","onForward","propTypes","func","isRequired","string","array","bool","defaultProps","phone"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport Tooltip from 'rc-tooltip';\nimport 'rc-tooltip/assets/bootstrap_white.css';\n\nimport ForwardForm from '../ForwardForm';\nimport ReplyWithMessage from '../ReplyWithMessage';\nimport ActiveCallButton from '../ActiveCallButton';\nimport MultiCallAnswerButton from '../MultiCallAnswerButton';\n\nimport MessageIcon from '../../assets/images/MessageFill.svg';\nimport ForwardIcon from '../../assets/images/Forward.svg';\nimport IgnoreIcon from '../../assets/images/Ignore.svg';\nimport VoicemailIcon from '../../assets/images/Voicemail.svg';\nimport AnswerIcon from '../../assets/images/Answer.svg';\nimport styles from './styles.scss';\n\nimport i18n from './i18n';\n\nexport default class IncomingCallPad extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showForward: false,\n      forwardNumber: '',\n      replyMessage: null,\n      showReplyWithMessage: false,\n      toVoiceMailEnabled: true,\n      replyMessageEnabled: true,\n    };\n    this.onShowForwardChange = (visible) => {\n      this.setState({\n        showForward: visible,\n        forwardNumber: '',\n      });\n    };\n    this.onForwardNumberChange = (forwardNumber) => {\n      this.setState({ forwardNumber });\n    };\n    this.closeForwardForm = () => {\n      this.onShowForwardChange(false);\n    };\n    this.onShowReplyWithMessageChange = (visible) => {\n      this.setState({\n        showReplyWithMessage: visible,\n      });\n    };\n    this.onReplyMessageChange = (message) => {\n      this.setState({ replyMessage: message });\n    };\n    this.closeReplyWithMessage = () => {\n      this.onShowReplyWithMessageChange(false);\n    };\n    this.toVoiceMail = () => {\n      this.props.toVoiceMail();\n      if (this.props.toVoiceMail) {\n        this.setState({\n          toVoiceMailEnabled: false\n        });\n        this.voicemailTimeout = setTimeout(() => {\n          this.props.reject();\n        }, 3000);\n      }\n    };\n    this.replyWithMessage = (value) => {\n      this.props.replyWithMessage(value);\n      if (this.props.replyWithMessage) {\n        this.setState({\n          replyMessageEnabled: false\n        });\n        this.replyTimeout = setTimeout(() => {\n          this.props.reject();\n        }, 3000);\n      }\n    };\n  }\n  componentWillReceiveProps(newProps) {\n    if (this.props.sessionId !== newProps.sessionId) {\n      if (this.replyTimeout) {\n        clearTimeout(this.replyTimeout);\n        this.replyTimeout = null;\n      }\n      if (this.voicemailTimeout) {\n        clearTimeout(this.voicemailTimeout);\n        this.voicemailTimeout = null;\n      }\n    }\n  }\n  componentWillUnmount() {\n    if (this.replyTimeout) {\n      clearTimeout(this.replyTimeout);\n      this.replyTimeout = null;\n    }\n    if (this.voicemailTimeout) {\n      clearTimeout(this.voicemailTimeout);\n      this.voicemailTimeout = null;\n    }\n  }\n  render() {\n    const {\n      currentLocale,\n      reject,\n      answer,\n      forwardingNumbers,\n      formatPhone,\n      className,\n      hasOtherActiveCall,\n      answerAndEnd,\n      answerAndHold,\n    } = this.props;\n    // const isMultiCall = true;\n    const multiCallButtons = (\n      <div className={classnames(styles.buttonRow, styles.multiCallsButtonGroup)}>\n        <MultiCallAnswerButton\n          onClick={answerAndEnd}\n          title={i18n.getString('answerAndEnd', currentLocale)}\n          className={styles.callButton}\n          isEndOtherCall\n        />\n        <ActiveCallButton\n          onClick={this.toVoiceMail}\n          title={i18n.getString('toVoicemail', currentLocale)}\n          buttonClassName={this.state.toVoiceMailEnabled ? styles.voiceMailButton : ''}\n          icon={VoicemailIcon}\n          iconWidth={274}\n          iconX={116}\n          showBorder={!this.state.toVoiceMailEnabled}\n          className={styles.callButton}\n          disabled={!this.state.toVoiceMailEnabled}\n        />\n        <MultiCallAnswerButton\n          onClick={answerAndHold}\n          title={i18n.getString('answerAndHold', currentLocale)}\n          className={styles.callButton}\n          isEndOtherCall={false}\n        />\n      </div>\n    );\n    const singleCallButtons = (\n      <div className={classnames(styles.buttonRow, styles.answerButtonGroup)}>\n        <ActiveCallButton\n          onClick={this.toVoiceMail}\n          title={i18n.getString('toVoicemail', currentLocale)}\n          buttonClassName={this.state.toVoiceMailEnabled ? styles.voiceMailButton : ''}\n          icon={VoicemailIcon}\n          iconWidth={274}\n          iconX={116}\n          showBorder={!this.state.toVoiceMailEnabled}\n          className={styles.bigCallButton}\n          disabled={!this.state.toVoiceMailEnabled}\n        />\n        <ActiveCallButton\n          onClick={answer}\n          title={i18n.getString('answer', currentLocale)}\n          buttonClassName={styles.answerButton}\n          icon={AnswerIcon}\n          showBorder={false}\n          className={styles.bigCallButton}\n        />\n      </div>\n    );\n    return (\n      <div className={classnames(styles.root, className)}>\n        <div\n          className={styles.forwardContainner}\n          ref={(containner) => {\n            this.forwardContainner = containner;\n          }}\n        />\n        <div\n          className={styles.replyWithMessageContainner}\n          ref={(containner) => {\n            this.replyWithMessageContainner = containner;\n          }}\n        />\n        <div className={styles.buttonRow}>\n          <Tooltip\n            defaultVisible={false}\n            visible={this.state.showForward}\n            onVisibleChange={this.onShowForwardChange}\n            placement=\"topRight\"\n            trigger=\"click\"\n            arrowContent={<div className=\"rc-tooltip-arrow-inner\" />}\n            getTooltipContainer={() => this.forwardContainner}\n            overlay={\n              <ForwardForm\n                forwardingNumbers={forwardingNumbers}\n                currentLocale={currentLocale}\n                onCancel={this.closeForwardForm}\n                formatPhone={formatPhone}\n                value={this.state.forwardNumber}\n                onChange={this.onForwardNumberChange}\n                onForward={this.props.onForward}\n              />\n            }\n          >\n            <ActiveCallButton\n              icon={ForwardIcon}\n              iconWidth={250}\n              iconX={125}\n              onClick={() => null}\n              title={i18n.getString('forward', currentLocale)}\n              className={styles.callButton}\n            />\n          </Tooltip>\n          <Tooltip\n            defaultVisible={false}\n            visible={this.state.showReplyWithMessage}\n            onVisibleChange={this.onShowReplyWithMessageChange}\n            placement=\"top\"\n            trigger=\"click\"\n            arrowContent={<div className=\"rc-tooltip-arrow-inner\" />}\n            getTooltipContainer={() => this.replyWithMessageContainner}\n            overlay={\n              <ReplyWithMessage\n                currentLocale={currentLocale}\n                onCancel={this.closeReplyWithMessage}\n                value={this.state.replyMessage}\n                onChange={this.onReplyMessageChange}\n                onReply={this.replyWithMessage}\n                disabled={!this.state.replyMessageEnabled}\n              />\n            }\n          >\n            <ActiveCallButton\n              onClick={() => null}\n              icon={MessageIcon}\n              title={i18n.getString('reply', currentLocale)}\n              className={styles.callButton}\n            />\n          </Tooltip>\n          <ActiveCallButton\n            onClick={reject}\n            icon={IgnoreIcon}\n            title={i18n.getString('ignore', currentLocale)}\n            className={styles.callButton}\n          />\n        </div>\n        {hasOtherActiveCall ? multiCallButtons : singleCallButtons}\n      </div>\n    );\n  }\n}\n\nIncomingCallPad.propTypes = {\n  answer: PropTypes.func.isRequired,\n  reject: PropTypes.func.isRequired,\n  toVoiceMail: PropTypes.func.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  forwardingNumbers: PropTypes.array.isRequired,\n  formatPhone: PropTypes.func,\n  onForward: PropTypes.func.isRequired,\n  replyWithMessage: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  answerAndEnd: PropTypes.func,\n  answerAndHold: PropTypes.func,\n  hasOtherActiveCall: PropTypes.bool,\n  sessionId: PropTypes.string.isRequired,\n};\n\nIncomingCallPad.defaultProps = {\n  formatPhone: phone => phone,\n  className: null,\n  answerAndEnd: () => null,\n  answerAndHold: () => null,\n  hasOtherActiveCall: false,\n};\n"]}