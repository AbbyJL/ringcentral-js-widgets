{"version":3,"sources":["components/RecipientsInput/index.js"],"names":["SelectedRecipientItem","phoneNumber","name","onRemove","className","length","extension","removeReceiver","propTypes","string","isRequired","func","defaultProps","undefined","SelectedRecipients","recipient","recipients","multiple","selectReceivers","map","item","shape","arrayOf","bool","RecipientsInput","props","onReceiverInputKeyUp","e","searchContact","currentTarget","value","setState","isFocusOnInput","onReceiverChange","onChange","clickHandler","evt","listRef","contains","target","inputRef","_addToRecipients","addToRecipients","state","selectedContactIndex","scrollDirection","setSelectedIndex","index","scrollOperation","direction","addSelectedContactIndex","searchContactList","preState","reduceSelectedContactIndex","isSplitter","key","keyCode","handleHotKey","preventDefault","relatedContactList","currentSelected","replace","onClean","window","addEventListener","removeEventListener","slice","label","getString","currentLocale","toNumberInput","inputField","ref","numberInput","placeholder","autoFocus","removeButton","container","rightPanel","removeFromRecipients","phoneTypeRenderer","formatContactPhone","titleEnabled","entityType","phoneType"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './styles.scss';\nimport RemoveButton from '../RemoveButton';\nimport ContactDropdownList from '../ContactDropdownList';\nimport i18n from './i18n';\n\nfunction SelectedRecipientItem({\n  phoneNumber,\n  name = phoneNumber,\n  onRemove,\n}) {\n  const className = phoneNumber.length > 5 ? styles.phoneNumber : styles.extension;\n  return (\n    <li className={className}>\n      <span>{name}</span>\n      <RemoveButton\n        className={styles.removeReceiver}\n        onClick={onRemove}\n        visibility\n      />\n    </li>\n  );\n}\n\nSelectedRecipientItem.propTypes = {\n  name: PropTypes.string,\n  phoneNumber: PropTypes.string.isRequired,\n  onRemove: PropTypes.func.isRequired,\n};\nSelectedRecipientItem.defaultProps = {\n  name: undefined,\n};\n\nfunction SelectedRecipients({\n  recipient,\n  recipients,\n  multiple,\n  onRemove,\n}) {\n  if (multiple && recipients.length) {\n    return (\n      <ul className={styles.selectReceivers}>\n        {\n          recipients.map(item => (\n            <SelectedRecipientItem\n              key={item.phoneNumber}\n              name={item.name}\n              phoneNumber={item.phoneNumber}\n              onRemove={() => onRemove(item.phoneNumber)}\n            />\n          ))\n        }\n      </ul>\n    );\n  } else if (!multiple && recipient) {\n    return (\n      <ul className={styles.selectReceivers}>\n        <SelectedRecipientItem\n          key={recipient.phoneNumber}\n          name={recipient.name}\n          phoneNumber={recipient.phoneNumber}\n          onRemove={() => onRemove(recipient.phoneNumber)}\n        />\n      </ul>\n    );\n  }\n  return null;\n}\n\nSelectedRecipients.propTypes = {\n  onRemove: PropTypes.func.isRequired,\n  recipient: PropTypes.shape({\n    phoneNumber: PropTypes.string.isRequired,\n    name: PropTypes.string,\n  }),\n  recipients: PropTypes.arrayOf(PropTypes.shape({\n    phoneNumber: PropTypes.string.isRequired,\n    name: PropTypes.string,\n  })).isRequired,\n  multiple: PropTypes.bool.isRequired,\n};\nSelectedRecipients.defaultProps = {\n  recipient: null,\n};\n\nclass RecipientsInput extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFocusOnInput: false,\n      selectedContactIndex: 0,\n      scrollDirection: null,\n    };\n\n    this.setSelectedIndex = (index) => {\n      this.setState({\n        selectedContactIndex: index,\n        scrollDirection: null,\n      });\n    };\n    this.scrollOperation = (direction) => {\n      if (direction === 'ArrowDown' || direction === 'ArrowUp') {\n        this.setState({\n          scrollDirection: direction,\n        });\n      }\n    };\n    this.addSelectedContactIndex = () => {\n      const length = this.props.searchContactList.length;\n      if (this.state.selectedContactIndex >= (length - 1)) {\n        this.setState({\n          selectedContactIndex: length - 1,\n        });\n      } else {\n        this.setState(preState => ({\n          selectedContactIndex: (preState.selectedContactIndex + 1),\n        }));\n      }\n    };\n\n    this.reduceSelectedContactIndex = () => {\n      if (this.state.selectedContactIndex > 0) {\n        this.setState(preState => ({\n          selectedContactIndex: (preState.selectedContactIndex - 1),\n        }));\n      } else {\n        this.setState({\n          selectedContactIndex: 0,\n        });\n      }\n    };\n\n    this.isSplitter = (e) => {\n      if (\n        e.key === ',' || e.key === ';' || e.key === 'Enter' ||\n        (e.key === 'Unidentified' && // for Safari (FF cannot rely on keyCode...)\n          (e.keyCode === 186 || // semicolon\n            e.keyCode === 188 || // comma\n            e.keyCode === 13)) // enter\n      ) {\n        return true;\n      }\n      return false;\n    };\n    // using React SyntheticEvent to deal with cross browser issue\n    this.handleHotKey = (e: React.KeyboardEvent) => {\n      if (this.state.isFocusOnInput && this.props.value.length >= 3) {\n        if (e.key === 'ArrowUp') {\n          this.reduceSelectedContactIndex();\n          this.scrollOperation(e.key);\n        } else if (e.key === 'ArrowDown') {\n          this.addSelectedContactIndex();\n          this.scrollOperation(e.key);\n        }\n      } else {\n        this.setState({\n          selectedContactIndex: 0,\n        });\n      }\n      if (this.isSplitter(e)) {\n        e.preventDefault();\n        if (this.props.value.length === 0) {\n          return;\n        }\n        const relatedContactList = this.props.value.length >= 3 ?\n          this.props.searchContactList : [];\n        const currentSelected\n          = relatedContactList[this.state.selectedContactIndex];\n        if (currentSelected && e.key === 'Enter') {\n          this.props.addToRecipients({\n            name: currentSelected.name,\n            phoneNumber: currentSelected.phoneNumber,\n          });\n        } else {\n          this.props.addToRecipients({\n            name: this.props.value.replace(',', ''),\n            phoneNumber: this.props.value.replace(',', ''),\n          });\n          this.props.onClean();\n        }\n        this.props.onClean();\n      }\n    };\n  }\n  onReceiverInputKeyUp = (e) => {\n    this.props.searchContact(e.currentTarget.value);\n    this.setState({\n      isFocusOnInput: true\n    });\n  }\n  onReceiverChange = (e) => {\n    this.props.onChange(e.currentTarget.value);\n  }\n  componentDidMount() {\n    this.props.searchContact(this.props.value);\n    window.addEventListener('click', this.clickHandler);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('click', this.clickHandler);\n  }\n\n  clickHandler = (evt) => {\n    if (this.listRef && this.listRef.contains(evt.target)) return;\n    if (this.inputRef && this.inputRef.contains(evt.target)) return;\n    this.setState({\n      isFocusOnInput: false\n    });\n  }\n\n  _addToRecipients = (item) => {\n    this.props.addToRecipients(item);\n    this.setState({\n      isFocusOnInput: false\n    });\n  }\n\n  render() {\n    // TODO a temporary fix for rendering slower search result.\n    const relatedContactList = this.props.value.length >= 3 ?\n      this.props.searchContactList.slice(0, 50) : [];\n    const label = (\n      <label>\n        {\n          this.props.label ||\n          i18n.getString('to', this.props.currentLocale)\n        }\n      :\n      </label>\n    );\n    const toNumberInput = !this.props.multiple && this.props.recipient ?\n      null :\n      (\n        <div>\n          <div className={styles.inputField}>\n            <input\n              ref={(ref) => { this.inputRef = ref; }}\n              name=\"receiver\"\n              value={this.props.value}\n              onChange={this.onReceiverChange}\n              className={styles.numberInput}\n              maxLength={30}\n              onKeyUp={this.onReceiverInputKeyUp}\n              placeholder={\n                this.props.placeholder ||\n                i18n.getString('enterNameOrNumber', this.props.currentLocale)\n              }\n              autoComplete=\"off\"\n              autoFocus={this.props.autoFocus} // eslint-disable-line\n            />\n          </div>\n          <RemoveButton\n            className={styles.removeButton}\n            onClick={this.props.onClean}\n            visibility={\n              this.props.value.length > 0 &&\n              this.state.isFocusOnInput\n            }\n          />\n        </div>\n      );\n\n    return (\n      <div className={styles.container} onKeyDown={this.handleHotKey}>\n        {label}\n        <div className={styles.rightPanel}>\n          <SelectedRecipients\n            recipient={this.props.recipient}\n            recipients={this.props.recipients}\n            multiple={this.props.multiple}\n            onRemove={this.props.removeFromRecipients}\n          />\n          {toNumberInput}\n        </div>\n        <ContactDropdownList\n          listRef={(ref) => { this.listRef = ref; }}\n          phoneTypeRenderer={this.props.phoneTypeRenderer}\n          scrollDirection={this.state.scrollDirection}\n          selectedIndex={this.state.selectedContactIndex}\n          setSelectedIndex={this.setSelectedIndex}\n          addToRecipients={this._addToRecipients}\n          items={relatedContactList}\n          formatContactPhone={this.props.formatContactPhone}\n          visibility={this.state.isFocusOnInput}\n          titleEnabled={this.props.titleEnabled}\n        />\n      </div>\n    );\n  }\n}\n\nRecipientsInput.propTypes = {\n  label: PropTypes.string,\n  placeholder: PropTypes.string,\n  searchContactList: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    entityType: PropTypes.string.isRequired,\n    phoneType: PropTypes.string.isRequired,\n    phoneNumber: PropTypes.string.isRequired,\n  })).isRequired,\n  recipient: PropTypes.shape({\n    phoneNumber: PropTypes.string.isRequired,\n    name: PropTypes.string,\n  }),\n  recipients: PropTypes.arrayOf(PropTypes.shape({\n    phoneNumber: PropTypes.string.isRequired,\n    name: PropTypes.string,\n  })),\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onClean: PropTypes.func.isRequired,\n  addToRecipients: PropTypes.func.isRequired,\n  removeFromRecipients: PropTypes.func.isRequired,\n  formatContactPhone: PropTypes.func.isRequired,\n  searchContact: PropTypes.func,\n  titleEnabled: PropTypes.bool,\n  autoFocus: PropTypes.bool,\n  currentLocale: PropTypes.string.isRequired,\n  multiple: PropTypes.bool,\n  phoneTypeRenderer: PropTypes.func,\n};\n\nRecipientsInput.defaultProps = {\n  label: undefined,\n  placeholder: undefined,\n  recipient: null,\n  recipients: [],\n  searchContact: () => null,\n  titleEnabled: undefined,\n  autoFocus: false,\n  multiple: false,\n  phoneTypeRenderer: undefined,\n};\n\nexport default RecipientsInput;\n"]}