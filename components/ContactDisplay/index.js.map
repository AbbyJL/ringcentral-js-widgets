{"version":3,"sources":["components/ContactDisplay/index.js"],"names":["ContactDisplay","displayFormatter","entityName","entityType","phoneNumber","currentLocale","brand","typeName","phoneSourceNames","getString","ContactDisplayItem","sourceIcons","SourceIcon","phoneSources","rcContact","brandIcon","undefined","styles","typeIcon","propTypes","PropTypes","string","isRequired","object","reference","className","contactMatches","selected","onSelectContact","disabled","isLogging","fallBackName","enableContactFallback","areaCode","countryCode","groupNumbers","showType","selectClassName","showPlaceholder","stopPropagation","showGroupNumberName","contactName","contentEl","currentName","groupNames","map","groupNumber","groupContact","find","match","extensionNumber","name","display","join","length","i18n","title","options","placeholder","_selected","select","entity","value","root","func","arrayOf","any","number","bool","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\nimport formatMessage from 'format-message';\nimport DropdownSelect from '../DropdownSelect';\nimport i18n from './i18n';\nimport styles from './styles.scss';\nimport phoneSourceNames from '../../lib/phoneSourceNames';\nimport phoneSources from '../../enums/phoneSources';\n\nconst displayFormatter = ({\n  entityName,\n  entityType,\n  phoneNumber,\n  currentLocale,\n  brand,\n}) => {\n  let typeName;\n  if (entityType) {\n    typeName = formatMessage(\n      phoneSourceNames.getString(entityType, currentLocale),\n      { brand }\n    );\n  }\n  if (phoneNumber && entityName && entityType) {\n    return `${entityName} | ${typeName} ${phoneNumber}`;\n  } else if (entityName && entityType) {\n    return `${entityName} | ${typeName}`;\n  } else if (entityName) {\n    return entityName;\n  } else if (phoneNumber) {\n    return `${phoneNumber}`;\n  }\n  return '';\n};\n\nfunction ContactDisplayItem({\n  entityName,\n  entityType,\n  phoneNumber,\n  sourceIcons\n}) {\n  let SourceIcon = null;\n  if (entityType) {\n    if (entityType === phoneSources.rcContact) {\n      SourceIcon = sourceIcons.brandIcon;\n    } else {\n      SourceIcon = sourceIcons[entityType];\n    }\n  }\n  if (phoneNumber && entityName !== undefined && SourceIcon) {\n    return (\n      <span>\n        <SourceIcon className={styles.typeIcon} width={10} height={10} />\n        <span className={styles.typeName}>{entityName}</span>\n      </span>\n    );\n  } else if (entityName !== undefined && SourceIcon) {\n    return (\n      <span>\n        <SourceIcon className={styles.typeIcon} width={10} height={10} />\n        <span className={styles.typeName}>{entityName}</span>\n      </span>\n    );\n  } else if (entityName !== undefined) {\n    return <span>{entityName}</span>;\n  } else if (phoneNumber) {\n    return <span>{phoneNumber}</span>;\n  }\n  return null;\n}\n\nContactDisplayItem.propTypes = {\n  entityName: PropTypes.string.isRequired,\n  entityType: PropTypes.string.isRequired,\n  phoneNumber: PropTypes.string.isRequired,\n  sourceIcons: PropTypes.object.isRequired,\n};\n\nexport default function ContactDisplay({\n  reference,\n  className,\n  contactMatches,\n  selected,\n  onSelectContact,\n  disabled,\n  isLogging,\n  fallBackName,\n  enableContactFallback,\n  areaCode,\n  countryCode,\n  phoneNumber,\n  currentLocale,\n  groupNumbers,\n  showType,\n  selectClassName,\n  showPlaceholder,\n  brand,\n  stopPropagation,\n  sourceIcons = {},\n  showGroupNumberName,\n  contactName,\n}) {\n  let contentEl;\n  if (contactName) {\n    contentEl = (\n      <div title={contactName} className={styles.currentName}>\n        {contactName}\n      </div>\n    );\n  } else if (groupNumbers && showGroupNumberName) {\n    const groupNames = groupNumbers.map((groupNumber) => {\n      const groupContact = contactMatches.find(match => match.extensionNumber === groupNumber);\n      return (groupContact && groupContact.name) || groupNumber;\n    });\n    const display = groupNames.join(', ');\n    contentEl = (\n      <div title={display} className={styles.currentName}>\n        {display}\n      </div>\n    );\n  } else if (groupNumbers) {\n    const display = groupNumbers.join(', ');\n    contentEl = (\n      <div title={display} className={styles.currentName}>\n        {display}\n      </div>\n    );\n  } else if (contactMatches.length === 0) {\n    const display = (enableContactFallback && fallBackName) ||\n      (phoneNumber && formatNumber({\n        phoneNumber,\n        countryCode,\n        areaCode,\n      })) ||\n      i18n.getString('unknownNumber', currentLocale);\n    const title = (enableContactFallback && fallBackName) ||\n      phoneNumber || '';\n    contentEl = (\n      <div title={title} className={styles.currentName}>\n        {display}\n      </div>\n    );\n  } else if (contactMatches.length === 1) {\n    const display = contactMatches[0].name;\n    const title = displayFormatter({\n      entityName: display,\n      entityType: contactMatches[0].entityType,\n      phoneNumber,\n      brand,\n      currentLocale\n    });\n    contentEl = (\n      <div title={title} className={styles.currentName}>\n        {display}\n      </div>\n    );\n  } else if (contactMatches.length > 1) {\n    const options = [\n      ...contactMatches,\n    ];\n    let placeholder;\n    let _selected = selected;\n    if (showPlaceholder) {\n      placeholder = i18n.getString('select', currentLocale);\n    } else {\n      _selected = _selected < 0 ? 0 : _selected;\n    }\n    contentEl = (\n      <DropdownSelect\n        reference={reference}\n        className={classnames(styles.select, selectClassName)}\n        value={`${_selected}`}\n        onChange={onSelectContact}\n        disabled={disabled || isLogging}\n        options={options}\n        placeholder={placeholder}\n        renderFunction={entity => (\n          ContactDisplayItem({\n            entityName: entity.name,\n            entityType: entity.entityType,\n            brand,\n            currentLocale,\n            sourceIcons\n          })\n        )}\n        renderValue={value => (\n          displayFormatter({\n            entityName: options[value].name,\n            entityType: showType && options[value].entityType,\n            brand,\n            currentLocale,\n          })\n        )}\n        renderTitle={entity => (\n          entity ? displayFormatter({\n            entityName: entity.name,\n            entityType: entity.entityType,\n            phoneNumber,\n            brand,\n            currentLocale,\n          }) : phoneNumber)\n        }\n        dropdownAlign=\"left\"\n        titleEnabled\n        noPadding\n        stopPropagation={stopPropagation}\n      />\n    );\n  }\n  return (\n    <div\n      className={classnames(\n        styles.root,\n        className,\n      )} >\n      {contentEl}\n    </div>\n  );\n}\nContactDisplay.propTypes = {\n  reference: PropTypes.func,\n  className: PropTypes.string,\n  contactMatches: PropTypes.arrayOf(PropTypes.any).isRequired,\n  selected: PropTypes.number.isRequired,\n  onSelectContact: PropTypes.func,\n  disabled: PropTypes.bool.isRequired,\n  isLogging: PropTypes.bool.isRequired,\n  fallBackName: PropTypes.string,\n  enableContactFallback: PropTypes.bool,\n  areaCode: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  phoneNumber: PropTypes.string,\n  currentLocale: PropTypes.string.isRequired,\n  groupNumbers: PropTypes.arrayOf(PropTypes.string),\n  showType: PropTypes.bool,\n  selectClassName: PropTypes.string,\n  showPlaceholder: PropTypes.bool,\n  brand: PropTypes.string,\n  stopPropagation: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  showGroupNumberName: PropTypes.bool,\n  contactName: PropTypes.any,\n};\nContactDisplay.defaultProps = {\n  reference: undefined,\n  className: undefined,\n  onSelectContact: undefined,\n  fallBackName: '',\n  phoneNumber: undefined,\n  groupNumbers: undefined,\n  enableContactFallback: undefined,\n  showType: true,\n  selectClassName: undefined,\n  showPlaceholder: true,\n  brand: undefined,\n  stopPropagation: true,\n  sourceIcons: undefined,\n  showGroupNumberName: false,\n  contactName: undefined,\n};\n"]}